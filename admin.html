<!DOCTYPE html>
<html lang="en">
<head>
    <meta data-cfasync="false">
    <meta name="cf:disable-email-protection" content="true">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creators Corner - Dashboard</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/litepicker/dist/litepicker.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/litepicker/dist/plugins/ranges.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/themes/dark.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/admin.css">
</head>
<body>
    <!-- Auth Check Overlay -->
    <div id="authCheck" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: #12141a; z-index: 9999; display: flex; align-items: center; justify-content: center; flex-direction: column; gap: 16px;">
        <div style="width: 40px; height: 40px; border: 3px solid #2e3440; border-top-color: #f5c518; border-radius: 50%; animation: spin 0.8s linear infinite;"></div>
        <div style="color: #9aa5b8; font-family: Inter, sans-serif;">Checking authorization...</div>
        <style>@keyframes spin { to { transform: rotate(360deg); } }</style>
    </div>

    <!-- Access Request Screen -->
    <div id="accessRequestScreen" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: #12141a; z-index: 9999; font-family: Inter, sans-serif;">
        <div style="max-width: 480px; margin: 80px auto; padding: 40px; background: #1a1d24; border-radius: 16px; border: 1px solid rgba(255,255,255,0.1);">
            <div style="text-align: center; margin-bottom: 32px;">
                <div style="font-size: 3rem; margin-bottom: 16px;">üîê</div>
                <h1 style="color: #fff; font-size: 1.5rem; margin-bottom: 8px;">Admin Access Required</h1>
                <p style="color: #9aa5b8; font-size: 0.95rem;" id="accessRequestMessage">You need team access to use this dashboard.</p>
            </div>
            
            <!-- Request Form -->
            <div id="accessRequestForm">
                <div style="margin-bottom: 20px;">
                    <label style="display: block; color: #9aa5b8; font-size: 0.85rem; margin-bottom: 8px;">Your Name</label>
                    <input type="text" id="requestName" placeholder="Enter your name" style="width: 100%; padding: 12px 16px; background: #12141a; border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: #fff; font-size: 1rem;">
                </div>
                <div style="margin-bottom: 20px;">
                    <label style="display: block; color: #9aa5b8; font-size: 0.85rem; margin-bottom: 8px;">Requested Role</label>
                    <select id="requestRole" style="width: 100%; padding: 12px 16px; background: #12141a; border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: #fff; font-size: 1rem;">
                        <option value="va">VA (Virtual Assistant)</option>
                        <option value="payments">Payments</option>
                        <option value="analyst">Analyst</option>
                        <option value="content_lead">Content Lead</option>
                        <option value="admin">Admin</option>
                    </select>
                </div>
                <div style="margin-bottom: 24px;">
                    <label style="display: block; color: #9aa5b8; font-size: 0.85rem; margin-bottom: 8px;">Why do you need access? (Optional)</label>
                    <textarea id="requestReason" placeholder="Briefly describe your role..." style="width: 100%; padding: 12px 16px; background: #12141a; border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: #fff; font-size: 1rem; min-height: 80px; resize: vertical;"></textarea>
                </div>
                <button onclick="submitAccessRequest()" style="width: 100%; padding: 14px; background: linear-gradient(135deg, #f5c518 0%, #ff6b35 100%); border: none; border-radius: 8px; color: #000; font-weight: 600; font-size: 1rem; cursor: pointer;">
                    Request Access
                </button>
            </div>
            
            <!-- Pending State -->
            <div id="accessPendingState" style="display: none; text-align: center;">
                <div style="font-size: 2rem; margin-bottom: 16px;">‚è≥</div>
                <p style="color: #f5c518; font-weight: 600; margin-bottom: 8px;">Request Pending</p>
                <p style="color: #9aa5b8; font-size: 0.9rem;">Your access request has been submitted. An admin will review it shortly.</p>
                <p style="color: #6b7280; font-size: 0.8rem; margin-top: 16px;" id="requestSubmittedAt"></p>
            </div>
            
            <!-- Denied State -->
            <div id="accessDeniedState" style="display: none; text-align: center;">
                <div style="font-size: 2rem; margin-bottom: 16px;">‚ùå</div>
                <p style="color: #ef4444; font-weight: 600; margin-bottom: 8px;">Access Denied</p>
                <p style="color: #9aa5b8; font-size: 0.9rem;" id="deniedReason">Your request was not approved.</p>
                <button onclick="resetAccessRequest()" style="margin-top: 20px; padding: 10px 20px; background: #2e3440; border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: #fff; cursor: pointer;">
                    Request Again
                </button>
            </div>
            
            <div style="text-align: center; margin-top: 24px; padding-top: 24px; border-top: 1px solid rgba(255,255,255,0.1);">
                <button onclick="accessLogout()" style="padding: 10px 20px; background: transparent; border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: #9aa5b8; cursor: pointer; font-size: 0.9rem;">
                    Sign Out
                </button>
            </div>
        </div>
    </div>

    <script src="js/auth.js"></script>

    <!-- Mobile Header -->
    <div class="mobile-header">
        <button class="mobile-menu-btn" onclick="toggleMobileMenu()">‚ò∞</button>
        <img src="logo.png" alt="Creators Corner" class="mobile-logo" onerror="this.outerHTML='<span style=\'font-weight:800;color:#f5c518;\'>CREATORS CORNER</span>'">
        <a href="upload.html" class="btn btn-primary" style="padding: 6px 12px; font-size: 0.8rem;">üì§ Upload</a>
    </div>
    <div class="mobile-overlay" onclick="toggleMobileMenu()"></div>

    <!-- Mobile Bottom Navigation -->
    <nav class="mobile-bottom-nav">
        <button class="mobile-nav-item active" onclick="switchView('overview')">
            <span class="mobile-nav-icon">üìä</span>
            <span>Overview</span>
        </button>
        <button class="mobile-nav-item" onclick="switchView('creators')">
            <span class="mobile-nav-icon">üë•</span>
            <span>Creators</span>
        </button>
        <button class="mobile-nav-item" onclick="switchView('brands')">
            <span class="mobile-nav-icon">üè∑Ô∏è</span>
            <span>Brands</span>
        </button>
        <button class="mobile-nav-item" onclick="switchView('videos')">
            <span class="mobile-nav-icon">üé¨</span>
            <span>Videos</span>
        </button>
        <button class="mobile-nav-item" onclick="toggleMobileMenu()">
            <span class="mobile-nav-icon">‚ò∞</span>
            <span>More</span>
        </button>
    </nav>

    <aside class="sidebar">
        <div class="logo-section">
            <img src="logo.png" alt="Creators Corner" class="logo-img" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
            <div style="display:none; font-size: 1.2rem; font-weight: 800; color: var(--accent); letter-spacing: 1px;">CREATORS CORNER</div>
        </div>
        
        <nav class="nav-section">
            <div class="nav-label">Operations</div>
            <a class="nav-item" data-view="opscenter" href="#" onclick="switchView('opscenter'); return false;">
                <span class="icon">üéØ</span> Ops Center
            </a>
            <a class="nav-item" data-view="brands" href="#" onclick="switchView('brands'); return false;">
                <span class="icon">üè¢</span> Brands
            </a>
            
            <div class="nav-label">Creators</div>
            <a class="nav-item" data-view="roster" href="#" onclick="switchView('roster'); return false;">
                <span class="icon">üìã</span> Roster
            </a>
            <a class="nav-item" data-view="applications" href="#" onclick="switchView('applications'); return false;">
                <span class="icon">üì•</span> Applications
                <span class="badge-count" id="pendingAppsBadge" style="display: none;">0</span>
            </a>
            
            <div class="nav-label">Data</div>
            <a class="nav-item" data-view="creators" href="#" onclick="switchView('creators'); return false;">
                <span class="icon">üë•</span> Creators
            </a>
            <a class="nav-item" data-view="videos" href="#" onclick="switchView('videos'); return false;">
                <span class="icon">üé¨</span> Videos
            </a>
            <a class="nav-item" data-view="products" href="#" onclick="switchView('products'); return false;">
                <span class="icon">üì¶</span> Products
            </a>
            
            <div class="nav-label">Finance</div>
            <a class="nav-item" data-view="payments" href="#" onclick="switchView('payments'); return false;">
                <span class="icon">üí≥</span> Payments
            </a>
            <a class="nav-item" data-view="commissions" href="#" onclick="switchView('commissions'); return false;">
                <span class="icon">üí∞</span> Commissions
            </a>
            <a class="nav-item" data-view="calculator" href="#" onclick="switchView('calculator'); return false;">
                <span class="icon">üßÆ</span> Earnings
            </a>
            
            <div class="nav-label">Admin</div>
            <a class="nav-item" data-view="users" href="#" onclick="switchView('users'); return false;">
                <span class="icon">üë•</span> Users
                <span class="badge-count" id="pendingUsersBadge" style="display: none;">0</span>
            </a>
            <a class="nav-item" data-view="settings" href="#" onclick="switchView('settings'); return false;">
                <span class="icon">‚öôÔ∏è</span> Settings
            </a>
            <a class="nav-item" data-view="portalconfig" href="#" onclick="switchView('portalconfig'); return false;">
                <span class="icon">üéõÔ∏è</span> Portal Config
            </a>
        </nav>
        
        <div class="nav-bottom">
            <a href="upload.html" class="nav-item">
                <span class="icon">üì§</span> Upload Data
            </a>
            
            <!-- Theme Toggle -->
            <div class="theme-toggle" onclick="toggleTheme()">
                <div class="theme-toggle-track">
                    <div class="theme-toggle-thumb" id="themeThumb">üåô</div>
                </div>
                <span class="theme-toggle-label" id="themeLabel">Dark Mode</span>
            </div>
            
            <div id="lastUpdated" style="padding: 8px 16px; font-size: 0.7rem; color: var(--text-muted); text-align: center;">
                Last updated: --
            </div>
            
            <!-- User Profile -->
            <div style="border-top: 1px solid var(--border); padding: 12px 16px;">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                    <div id="adminAvatar" style="width: 32px; height: 32px; border-radius: 50%; background: var(--accent-dim); border: 2px solid var(--accent); display: flex; align-items: center; justify-content: center; font-weight: 700; color: var(--accent); font-size: 0.85rem;">A</div>
                    <div style="flex: 1; min-width: 0;">
                        <div id="adminName" style="font-size: 0.85rem; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">Admin</div>
                        <div id="adminRole" style="font-size: 0.7rem; color: var(--text-muted);">Administrator</div>
                    </div>
                </div>
                <div style="display: flex; gap: 8px;">
                    <a href="index.html" style="flex: 1; padding: 8px; text-align: center; background: var(--bg-card); border: 1px solid var(--border); border-radius: 6px; color: var(--text-secondary); text-decoration: none; font-size: 0.75rem;">Portal</a>
                    <button onclick="adminLogout()" style="flex: 1; padding: 8px; background: transparent; border: 1px solid #f87171; border-radius: 6px; color: #f87171; cursor: pointer; font-size: 0.75rem;">Logout</button>
                </div>
                <div style="margin-top: 12px; text-align: center; font-size: 0.65rem; color: var(--text-muted);">v262</div>
            </div>
        </div>
    </aside>

    <main class="main">
        <!-- ==================== OPS CENTER ==================== -->
        <div id="view-opscenter" class="view-section">
            <!-- Loading Overlay -->
            <div id="opscenter-loading" class="loading-overlay hidden">
                <div class="loading-spinner-container">
                    <div class="spinner-ring spinner-ring-pulse"></div>
                    <div class="spinner-ring spinner-ring-active"></div>
                    <div class="loading-icon">üéØ</div>
                </div>
                <div class="loading-text">Loading ops data...</div>
                <div class="loading-subtext">Analyzing creator health</div>
                <div class="loading-dots">
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                </div>
            </div>
            
            <div class="header" style="flex-wrap: wrap; gap: 16px;">
                <div style="flex: 1; min-width: 200px;">
                    <h1 class="header-title">üéØ Ops Center</h1>
                    <p class="header-subtitle" id="opsCenterDateRange">Daily operations hub</p>
                </div>
            </div>
            
            <!-- Tab Navigation -->
            <div class="ops-tabs" style="display: flex; gap: 2px; margin-bottom: 24px; background: var(--bg-secondary); padding: 4px; border-radius: 12px; width: fit-content; border: 1px solid var(--border);">
                <button class="ops-tab active" data-tab="overview" onclick="switchOpsTab('overview')" style="padding: 10px 24px; border: none; background: var(--bg-card); border-radius: 8px; cursor: pointer; font-weight: 600; color: var(--text-primary); transition: all 0.2s; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                    üìä Overview
                </button>
                <button class="ops-tab" data-tab="videos" onclick="switchOpsTab('videos')" style="padding: 10px 24px; border: none; background: transparent; border-radius: 8px; cursor: pointer; font-weight: 500; color: var(--text-muted); transition: all 0.2s;">
                    üé¨ Videos
                </button>
                <button class="ops-tab" data-tab="posting" onclick="switchOpsTab('posting')" style="padding: 10px 24px; border: none; background: transparent; border-radius: 8px; cursor: pointer; font-weight: 500; color: var(--text-muted); transition: all 0.2s;">
                    üìù Posting
                </button>
                <button class="ops-tab" data-tab="creators" onclick="switchOpsTab('creators')" style="padding: 10px 24px; border: none; background: transparent; border-radius: 8px; cursor: pointer; font-weight: 500; color: var(--text-muted); transition: all 0.2s;">
                    üë• Creators
                </button>
                <button class="ops-tab" data-tab="decisions" onclick="switchOpsTab('decisions')" style="padding: 10px 24px; border: none; background: transparent; border-radius: 8px; cursor: pointer; font-weight: 500; color: var(--text-muted); transition: all 0.2s;">
                    ‚úÇÔ∏è Decisions
                </button>
            </div>
            
            <!-- Overview Tab Content (embedded from view-overview) -->
            <div id="ops-tab-overview" class="ops-tab-content" style="display: block;">
                <!-- Content loaded dynamically from view-overview -->
            </div>
            
            <!-- ========== VIDEOS TAB ========== -->
            <div id="ops-tab-videos" class="ops-tab-content" style="display: none;">
                <!-- Header -->
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 16px;">
                    <div>
                        <h2 style="font-size: 1.4rem; font-weight: 700; margin: 0;">üé¨ Video Performance</h2>
                        <p id="videosTabContext" style="color: var(--text-muted); font-size: 0.85rem; margin: 4px 0 0 0;">Loading video data...</p>
                    </div>
                    <div style="display: flex; gap: 8px; align-items: center;">
                        <select id="videosBrandFilter" onchange="onVideosBrandFilterChange()" style="padding: 8px 12px; border: 1px solid var(--border); border-radius: 6px; background: var(--bg-secondary); color: var(--text-primary); min-width: 140px;">
                            <option value="all">All Brands</option>
                            <option value="catakor">Cata-Kor</option>
                            <option value="jiyu">JiYu</option>
                            <option value="physicians_choice">Physicians Choice</option>
                            <option value="peach_slices">Peach Slices</option>
                            <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                        </select>
                        <select id="videosProductFilter" onchange="loadVideosTab()" style="padding: 8px 12px; border: 1px solid var(--border); border-radius: 6px; background: var(--bg-secondary); color: var(--text-primary); min-width: 140px;">
                            <option value="all">All Products</option>
                        </select>
                        <select id="videosStatusFilter" onchange="filterVideosDisplay()" style="padding: 8px 12px; border: 1px solid var(--border); border-radius: 6px; background: var(--bg-secondary); color: var(--text-primary); min-width: 130px;" data-tooltip="Filter by creator management status">
                            <option value="all">All Videos</option>
                            <option value="managed">Managed Only</option>
                            <option value="unmanaged">Unmanaged</option>
                        </select>
                        <button class="btn btn-primary" onclick="loadVideosTab()">üîÑ Refresh</button>
                    </div>
                </div>
                
                <!-- Summary Stats -->
                <div style="display: grid; grid-template-columns: repeat(6, 1fr); gap: 12px; margin-bottom: 24px;">
                    <div class="stat-card" style="padding: 16px; text-align: center; cursor: pointer;" onclick="scrollToVideoSection('hot')">
                        <div class="stat-value" id="videosStatHot" style="font-size: 1.8rem; color: #f97316;">0</div>
                        <div class="stat-label" style="font-size: 0.75rem;">üî• Hot Now <span class="help-icon" data-tooltip="Videos posted in last 7 days with $100+ GMV">?</span></div>
                    </div>
                    <div class="stat-card" style="padding: 16px; text-align: center; cursor: pointer;" onclick="scrollToVideoSection('rising')">
                        <div class="stat-value" id="videosStatRising" style="font-size: 1.8rem; color: #22c55e;">0</div>
                        <div class="stat-label" style="font-size: 0.75rem;">üìà Rising <span class="help-icon" data-tooltip="Videos from 7-14 days ago still hitting $50+ GMV">?</span></div>
                    </div>
                    <div class="stat-card" style="padding: 16px; text-align: center; cursor: pointer;" onclick="scrollToVideoSection('top')">
                        <div class="stat-value" id="videosStatTop" style="font-size: 1.8rem; color: #f5c518;">0</div>
                        <div class="stat-label" style="font-size: 0.75rem;">üèÜ Top 10 <span class="help-icon" data-tooltip="Highest GMV videos in selected date range">?</span></div>
                    </div>
                    <div class="stat-card" style="padding: 16px; text-align: center;">
                        <div class="stat-value" id="videosStatTotal" style="font-size: 1.8rem; color: var(--accent);">0</div>
                        <div class="stat-label" style="font-size: 0.75rem;">Total Videos <span class="help-icon" data-tooltip="Unique videos with sales in selected period">?</span></div>
                    </div>
                    <div class="stat-card" style="padding: 16px; text-align: center;">
                        <div class="stat-value" id="videosStatGmv" style="font-size: 1.8rem; color: var(--success);">$0</div>
                        <div class="stat-label" style="font-size: 0.75rem;">Total GMV <span class="help-icon" data-tooltip="Gross Merchandise Value - total sales from all videos">?</span></div>
                    </div>
                    <div class="stat-card" style="padding: 16px; text-align: center;">
                        <div class="stat-value" id="videosStatAvg" style="font-size: 1.8rem; color: var(--blue);">$0</div>
                        <div class="stat-label" style="font-size: 0.75rem;">Avg/Video <span class="help-icon" data-tooltip="Average GMV per video (Total GMV √∑ Total Videos)">?</span></div>
                    </div>
                </div>
                
                <!-- üî• HOT NOW Section -->
                <div class="video-section" id="videoSectionHot" style="margin-bottom: 24px;">
                    <div class="video-section-header" style="display: flex; align-items: center; gap: 12px; padding: 16px 20px; background: linear-gradient(135deg, rgba(249,115,22,0.15), rgba(249,115,22,0.05)); border: 1px solid rgba(249,115,22,0.3); border-radius: 12px; cursor: pointer;">
                        <span style="font-size: 1.5rem;" onclick="toggleVideoSection('hot')">üî•</span>
                        <div style="flex: 1;" onclick="toggleVideoSection('hot')">
                            <div style="font-weight: 700; font-size: 1.1rem; color: #f97316;">HOT NOW <span class="help-icon" data-tooltip="New videos crushing it! Posted within 7 days and already hit $100+ in sales" style="background: rgba(249,115,22,0.2); border-color: rgba(249,115,22,0.4);">?</span></div>
                            <div style="font-size: 0.8rem; color: var(--text-muted);">New videos (last 7 days) crushing it with $100+ GMV</div>
                        </div>
                        <button onclick="event.stopPropagation(); copyDiscordMessage('hot')" class="btn btn-small" style="padding: 6px 12px; font-size: 0.75rem; background: rgba(249,115,22,0.2); border-color: rgba(249,115,22,0.4); color: #f97316;" title="Copy for Discord">üìã Discord</button>
                        <span class="video-section-count" id="hotCount" style="background: rgba(249,115,22,0.2); color: #f97316; padding: 4px 12px; border-radius: 20px; font-weight: 700; font-size: 0.9rem;">0</span>
                        <span class="video-section-toggle" id="hotToggle" style="font-size: 1.2rem; color: var(--text-muted);" onclick="toggleVideoSection('hot')">‚ñ∂</span>
                    </div>
                    <div class="video-section-content" id="hotContent" style="border: 1px solid var(--border); border-top: none; border-radius: 0 0 12px 12px; padding: 20px; background: var(--bg-card); display: none;">
                        <div id="hotVideosGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 16px;">
                            <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: var(--text-muted);">Loading hot videos...</div>
                        </div>
                        <div id="hotShowMore" style="display: none; text-align: center; margin-top: 16px;">
                            <button onclick="showMoreVideos('hot')" class="btn" style="background: rgba(249,115,22,0.1); border-color: rgba(249,115,22,0.3); color: #f97316;">Show All (<span id="hotTotalCount">0</span>)</button>
                        </div>
                    </div>
                </div>
                
                <!-- üìà RISING Section -->
                <div class="video-section" id="videoSectionRising" style="margin-bottom: 24px;">
                    <div class="video-section-header" style="display: flex; align-items: center; gap: 12px; padding: 16px 20px; background: linear-gradient(135deg, rgba(34,197,94,0.15), rgba(34,197,94,0.05)); border: 1px solid rgba(34,197,94,0.3); border-radius: 12px; cursor: pointer;">
                        <span style="font-size: 1.5rem;" onclick="toggleVideoSection('rising')">üìà</span>
                        <div style="flex: 1;" onclick="toggleVideoSection('rising')">
                            <div style="font-weight: 700; font-size: 1.1rem; color: #22c55e;">RISING <span class="help-icon" data-tooltip="These aren't brand new but they're still selling! Videos from 7-14 days ago with sustained momentum" style="background: rgba(34,197,94,0.2); border-color: rgba(34,197,94,0.4);">?</span></div>
                            <div style="font-size: 0.8rem; color: var(--text-muted);">Videos gaining momentum - showing strong recent performance</div>
                        </div>
                        <button onclick="event.stopPropagation(); copyDiscordMessage('rising')" class="btn btn-small" style="padding: 6px 12px; font-size: 0.75rem; background: rgba(34,197,94,0.2); border-color: rgba(34,197,94,0.4); color: #22c55e;" title="Copy for Discord">üìã Discord</button>
                        <span class="video-section-count" id="risingCount" style="background: rgba(34,197,94,0.2); color: #22c55e; padding: 4px 12px; border-radius: 20px; font-weight: 700; font-size: 0.9rem;">0</span>
                        <span class="video-section-toggle" id="risingToggle" style="font-size: 1.2rem; color: var(--text-muted);" onclick="toggleVideoSection('rising')">‚ñ∂</span>
                    </div>
                    <div class="video-section-content" id="risingContent" style="border: 1px solid var(--border); border-top: none; border-radius: 0 0 12px 12px; padding: 20px; background: var(--bg-card); display: none;">
                        <div id="risingVideosGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 16px;">
                            <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: var(--text-muted);">Loading rising videos...</div>
                        </div>
                        <div id="risingShowMore" style="display: none; text-align: center; margin-top: 16px;">
                            <button onclick="showMoreVideos('rising')" class="btn" style="background: rgba(34,197,94,0.1); border-color: rgba(34,197,94,0.3); color: #22c55e;">Show All (<span id="risingTotalCount">0</span>)</button>
                        </div>
                    </div>
                </div>
                
                <!-- üèÜ TOP PERFORMERS Section -->
                <div class="video-section" id="videoSectionTop" style="margin-bottom: 24px;">
                    <div class="video-section-header" style="display: flex; align-items: center; gap: 12px; padding: 16px 20px; background: linear-gradient(135deg, rgba(245,197,24,0.15), rgba(245,197,24,0.05)); border: 1px solid rgba(245,197,24,0.3); border-radius: 12px; cursor: pointer;">
                        <span style="font-size: 1.5rem;" onclick="toggleVideoSection('top')">üèÜ</span>
                        <div style="flex: 1;" onclick="toggleVideoSection('top')">
                            <div style="font-weight: 700; font-size: 1.1rem; color: #f5c518;">TOP PERFORMERS <span class="help-icon" data-tooltip="The money makers! Highest total GMV videos in your selected date range" style="background: rgba(245,197,24,0.2); border-color: rgba(245,197,24,0.4);">?</span></div>
                            <div style="font-size: 0.8rem; color: var(--text-muted);">Highest GMV videos in selected period</div>
                        </div>
                        <button onclick="event.stopPropagation(); copyDiscordMessage('top')" class="btn btn-small" style="padding: 6px 12px; font-size: 0.75rem; background: rgba(245,197,24,0.2); border-color: rgba(245,197,24,0.4); color: #f5c518;" title="Copy for Discord">üìã Discord</button>
                        <span class="video-section-count" id="topCount" style="background: rgba(245,197,24,0.2); color: #f5c518; padding: 4px 12px; border-radius: 20px; font-weight: 700; font-size: 0.9rem;">0</span>
                        <span class="video-section-toggle" id="topToggle" style="font-size: 1.2rem; color: var(--text-muted);" onclick="toggleVideoSection('top')">‚ñ∂</span>
                    </div>
                    <div class="video-section-content" id="topContent" style="border: 1px solid var(--border); border-top: none; border-radius: 0 0 12px 12px; padding: 20px; background: var(--bg-card); display: none;">
                        <div id="topVideosGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 16px;">
                            <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: var(--text-muted);">Loading top videos...</div>
                        </div>
                        <div id="topShowMore" style="display: none; text-align: center; margin-top: 16px;">
                            <button onclick="showMoreVideos('top')" class="btn" style="background: rgba(245,197,24,0.1); border-color: rgba(245,197,24,0.3); color: #f5c518;">Show All (<span id="topTotalCount">0</span>)</button>
                        </div>
                    </div>
                </div>
                
                <!-- ‚ö° CREATOR EFFICIENCY Section -->
                <div class="video-section" id="videoSectionEfficiency" style="margin-bottom: 24px;">
                    <div class="video-section-header" style="display: flex; align-items: center; gap: 12px; padding: 16px 20px; background: linear-gradient(135deg, rgba(139,92,246,0.15), rgba(139,92,246,0.05)); border: 1px solid rgba(139,92,246,0.3); border-radius: 12px; cursor: pointer;">
                        <span style="font-size: 1.5rem;" onclick="toggleVideoSection('efficiency')">‚ö°</span>
                        <div style="flex: 1;" onclick="toggleVideoSection('efficiency')">
                            <div style="font-weight: 700; font-size: 1.1rem; color: #8b5cf6;">CREATOR EFFICIENCY <span class="help-icon" data-tooltip="Quality over quantity! Shows GMV per video - who's making each video count. üî•=$100+/vid, ‚ö°=$30-99/vid, üí§=under $30/vid" style="background: rgba(139,92,246,0.2); border-color: rgba(139,92,246,0.4);">?</span></div>
                            <div style="font-size: 0.8rem; color: var(--text-muted);">Who's making the most of every video</div>
                        </div>
                        <button onclick="event.stopPropagation(); copyDiscordMessage('efficiency')" class="btn btn-small" style="padding: 6px 12px; font-size: 0.75rem; background: rgba(139,92,246,0.2); border-color: rgba(139,92,246,0.4); color: #8b5cf6;" title="Copy for Discord">üìã Discord</button>
                        <span class="video-section-count" id="efficiencyCount" style="background: rgba(139,92,246,0.2); color: #8b5cf6; padding: 4px 12px; border-radius: 20px; font-weight: 700; font-size: 0.9rem;">0</span>
                        <span class="video-section-toggle" id="efficiencyToggle" style="font-size: 1.2rem; color: var(--text-muted);" onclick="toggleVideoSection('efficiency')">‚ñ∂</span>
                    </div>
                    <div class="video-section-content" id="efficiencyContent" style="border: 1px solid var(--border); border-top: none; border-radius: 0 0 12px 12px; padding: 20px; background: var(--bg-card); display: none;">
                        <div id="efficiencyGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 16px;">
                            <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: var(--text-muted);">Loading efficiency data...</div>
                        </div>
                        <div id="efficiencyShowMore" style="display: none; text-align: center; margin-top: 16px;">
                            <button onclick="showMoreVideos('efficiency')" class="btn" style="background: rgba(139,92,246,0.1); border-color: rgba(139,92,246,0.3); color: #8b5cf6;">Show All (<span id="efficiencyTotalCount">0</span>)</button>
                        </div>
                    </div>
                </div>
                
                <!-- üìã ALL VIDEOS Table Section -->
                <div class="video-section" id="videoSectionAll">
                    <div class="video-section-header" style="display: flex; align-items: center; gap: 12px; padding: 16px 20px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 12px; cursor: pointer;">
                        <span style="font-size: 1.5rem;" onclick="toggleVideoSection('all')">üìã</span>
                        <div style="flex: 1;" onclick="toggleVideoSection('all')">
                            <div style="font-weight: 700; font-size: 1.1rem; color: var(--text-primary);">ALL VIDEOS <span class="help-icon" data-tooltip="Complete searchable list of all videos with sales in selected period">?</span></div>
                            <div style="font-size: 0.8rem; color: var(--text-muted);">Complete list with search and export</div>
                        </div>
                        <input type="text" id="opsVideosSearchInput" placeholder="Search videos..." onclick="event.stopPropagation()" oninput="filterOpsVideosTable()" style="padding: 6px 12px; border: 1px solid var(--border); border-radius: 6px; background: var(--bg-card); color: var(--text-primary); width: 180px; font-size: 0.85rem;">
                        <button onclick="event.stopPropagation(); exportVideosCSV()" class="btn btn-small" style="padding: 6px 12px; font-size: 0.75rem;" title="Export to CSV">üì• Export</button>
                        <span class="video-section-count" id="allCount" style="background: var(--bg-card); color: var(--text-secondary); padding: 4px 12px; border-radius: 20px; font-weight: 700; font-size: 0.9rem;">0</span>
                        <span class="video-section-toggle" id="allToggle" style="font-size: 1.2rem; color: var(--text-muted);" onclick="toggleVideoSection('all')">‚ñ∂</span>
                    </div>
                    <div class="video-section-content" id="allContent" style="border: 1px solid var(--border); border-top: none; border-radius: 0 0 12px 12px; background: var(--bg-card); display: none;">
                        <div class="table-container" style="max-height: 500px; overflow-y: auto;">
                            <table>
                                <thead style="position: sticky; top: 0; background: var(--bg-card); z-index: 1;">
                                    <tr>
                                        <th style="width: 50px;">#</th>
                                        <th>Video</th>
                                        <th>Creator</th>
                                        <th>Brand</th>
                                        <th style="text-align: center;">Posted</th>
                                        <th style="text-align: right;">GMV</th>
                                        <th style="text-align: right;">Orders</th>
                                        <th style="text-align: center;">Status</th>
                                        <th style="text-align: center;">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="allVideosTableBody">
                                    <tr><td colspan="9" style="text-align: center; padding: 40px; color: var(--text-muted);">Loading videos...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ========== POSTING TAB ========== -->
            <div id="ops-tab-posting" class="ops-tab-content" style="display: none;">
                <!-- Header -->
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 16px;">
                    <div>
                        <h2 style="font-size: 1.4rem; font-weight: 700; margin: 0;">üìù Posting Accountability</h2>
                        <p id="postingWeekContext" style="color: var(--text-muted); font-size: 0.85rem; margin: 4px 0 0 0;">Rolling 7-day posting activity</p>
                    </div>
                    <div style="display: flex; gap: 8px; align-items: center;">
                        <select id="postingBrandFilter" onchange="onPostingBrandChange()" style="padding: 8px 12px; border-radius: 8px; border: 1px solid var(--border); background: var(--bg-secondary); font-size: 0.85rem;">
                            <option value="all">All Brands</option>
                            <option value="catakor">Cata-Kor</option>
                            <option value="jiyu">JiYu</option>
                            <option value="physicians_choice">Physicians Choice</option>
                            <option value="peach_slices">Peach Slices</option>
                            <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                        </select>
                        <select id="postingProductFilter" onchange="loadPostingData()" style="padding: 8px 12px; border-radius: 8px; border: 1px solid var(--border); background: var(--bg-secondary); font-size: 0.85rem;">
                            <option value="all">All Products</option>
                        </select>
                        <select id="postingTypeFilter" onchange="filterPostingData()" style="padding: 8px 12px; border-radius: 8px; border: 1px solid var(--border); background: var(--bg-secondary); font-size: 0.85rem;">
                            <option value="all">All Types</option>
                            <option value="retainer">Retainer Only</option>
                            <option value="affiliate">Affiliates</option>
                        </select>
                        <input type="text" id="postingSearchFilter" placeholder="üîç Search..." oninput="filterPostingData()" style="padding: 8px 12px; border-radius: 8px; border: 1px solid var(--border); background: var(--bg-secondary); width: 150px; font-size: 0.85rem;">
                        <label style="display: flex; align-items: center; gap: 6px; cursor: pointer; font-size: 0.85rem; color: var(--text-muted);">
                            <input type="checkbox" id="postingHideContacted" onchange="filterPostingData()" style="width: 16px; height: 16px; cursor: pointer;">
                            Hide Contacted
                        </label>
                        <button class="btn btn-primary" onclick="loadPostingData()" style="padding: 8px 16px;">üîÑ Refresh</button>
                    </div>
                </div>
                
                <!-- Summary Stats -->
                <div style="display: grid; grid-template-columns: repeat(6, 1fr); gap: 12px; margin-bottom: 24px;">
                    <div class="stat-card" style="padding: 16px; text-align: center; cursor: pointer; border-left: 4px solid #6b7280;" onclick="togglePostingSection('ghosts')">
                        <div class="stat-value" id="postingGhostsCount" style="font-size: 1.8rem; color: #6b7280;">0</div>
                        <div class="stat-label" style="font-size: 0.75rem;">üëª Ghosts</div>
                        <div style="font-size: 0.65rem; color: var(--text-muted); margin-top: 2px;">0 posts</div>
                    </div>
                    <div class="stat-card" style="padding: 16px; text-align: center; cursor: pointer; border-left: 4px solid #ef4444;" onclick="togglePostingSection('behind')">
                        <div class="stat-value" id="postingBehindCount" style="font-size: 1.8rem; color: #ef4444;">0</div>
                        <div class="stat-label" style="font-size: 0.75rem;">üö® Behind</div>
                        <div style="font-size: 0.65rem; color: var(--text-muted); margin-top: 2px;">1-2 posts</div>
                    </div>
                    <div class="stat-card" style="padding: 16px; text-align: center; cursor: pointer; border-left: 4px solid #f59e0b;" onclick="togglePostingSection('atrisk')">
                        <div class="stat-value" id="postingAtRiskCount" style="font-size: 1.8rem; color: #f59e0b;">0</div>
                        <div class="stat-label" style="font-size: 0.75rem;">‚ö†Ô∏è At Risk</div>
                        <div style="font-size: 0.65rem; color: var(--text-muted); margin-top: 2px;">3-4 posts</div>
                    </div>
                    <div class="stat-card" style="padding: 16px; text-align: center; cursor: pointer; border-left: 4px solid #22c55e;" onclick="togglePostingSection('ontrack')">
                        <div class="stat-value" id="postingOnTrackCount" style="font-size: 1.8rem; color: #22c55e;">0</div>
                        <div class="stat-label" style="font-size: 0.75rem;">‚úÖ On Track</div>
                        <div style="font-size: 0.65rem; color: var(--text-muted); margin-top: 2px;">5-9 posts</div>
                    </div>
                    <div class="stat-card" style="padding: 16px; text-align: center; cursor: pointer; border-left: 4px solid #8b5cf6;" onclick="togglePostingSection('stars')">
                        <div class="stat-value" id="postingStarsCount" style="font-size: 1.8rem; color: #8b5cf6;">0</div>
                        <div class="stat-label" style="font-size: 0.75rem;">‚≠ê Stars</div>
                        <div style="font-size: 0.65rem; color: var(--text-muted); margin-top: 2px;">10+ posts</div>
                    </div>
                    <div class="stat-card" style="padding: 16px; text-align: center; border-left: 4px solid var(--accent); background: linear-gradient(135deg, var(--bg-card) 0%, rgba(245, 197, 24, 0.08) 100%);">
                        <div class="stat-value" id="postingRetainerAtRisk" style="font-size: 1.6rem; color: var(--accent);">$0</div>
                        <div class="stat-label" style="font-size: 0.75rem;">üí∞ $ At Risk</div>
                        <div id="postingAtRiskRetainerCount" style="font-size: 0.65rem; color: var(--text-muted); margin-top: 2px;">0 creators</div>
                    </div>
                </div>

                <!-- Collapsible Sections -->
                <div id="postingContent">
                    <!-- üëª GHOSTS Section -->
                    <div class="posting-section" id="postingSectionGhosts" style="margin-bottom: 20px;">
                        <div class="posting-section-header" onclick="togglePostingSection('ghosts')" style="display: flex; align-items: center; gap: 12px; padding: 14px 18px; background: linear-gradient(135deg, rgba(107,114,128,0.15), rgba(107,114,128,0.05)); border: 1px solid rgba(107,114,128,0.3); border-radius: 12px; cursor: pointer;">
                            <span style="font-size: 1.4rem;">üëª</span>
                            <div style="flex: 1;">
                                <div style="font-weight: 700; font-size: 1rem; color: #6b7280;">GHOSTS</div>
                                <div style="font-size: 0.75rem; color: var(--text-muted);">Zero posts in last 7 days - immediate outreach needed</div>
                            </div>
                            <button onclick="event.stopPropagation(); copyPostingDiscord('ghosts')" class="btn btn-small" style="padding: 5px 10px; font-size: 0.7rem;">üìã Discord</button>
                            <span class="posting-section-count" id="postingGhostsBadge" style="background: rgba(107,114,128,0.2); color: #6b7280; padding: 4px 12px; border-radius: 20px; font-weight: 700; font-size: 0.85rem;">0</span>
                            <span class="posting-section-toggle" id="postingGhostsToggle" style="font-size: 1.2rem; color: var(--text-muted);">‚ñ∂</span>
                        </div>
                        <div class="posting-section-content" id="postingGhostsContent" style="display: none; border: 1px solid var(--border); border-top: none; border-radius: 0 0 12px 12px; padding: 16px; background: var(--bg-card);">
                            <div id="postingGhostsGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 12px;">
                                <div style="grid-column: 1/-1; text-align: center; padding: 30px; color: var(--text-muted);">Loading...</div>
                            </div>
                        </div>
                    </div>

                    <!-- üö® BEHIND Section -->
                    <div class="posting-section" id="postingSectionBehind" style="margin-bottom: 20px;">
                        <div class="posting-section-header" onclick="togglePostingSection('behind')" style="display: flex; align-items: center; gap: 12px; padding: 14px 18px; background: linear-gradient(135deg, rgba(239,68,68,0.15), rgba(239,68,68,0.05)); border: 1px solid rgba(239,68,68,0.3); border-radius: 12px; cursor: pointer;">
                            <span style="font-size: 1.4rem;">üö®</span>
                            <div style="flex: 1;">
                                <div style="font-weight: 700; font-size: 1rem; color: #ef4444;">BEHIND</div>
                                <div style="font-size: 0.75rem; color: var(--text-muted);">1-2 posts in last 7 days - not meeting minimum</div>
                            </div>
                            <button onclick="event.stopPropagation(); copyPostingDiscord('behind')" class="btn btn-small" style="padding: 5px 10px; font-size: 0.7rem;">üìã Discord</button>
                            <span class="posting-section-count" id="postingBehindBadge" style="background: rgba(239,68,68,0.2); color: #ef4444; padding: 4px 12px; border-radius: 20px; font-weight: 700; font-size: 0.85rem;">0</span>
                            <span class="posting-section-toggle" id="postingBehindToggle" style="font-size: 1.2rem; color: var(--text-muted);">‚ñ∂</span>
                        </div>
                        <div class="posting-section-content" id="postingBehindContent" style="display: none; border: 1px solid var(--border); border-top: none; border-radius: 0 0 12px 12px; padding: 16px; background: var(--bg-card);">
                            <div id="postingBehindGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 12px;">
                                <div style="grid-column: 1/-1; text-align: center; padding: 30px; color: var(--text-muted);">Loading...</div>
                            </div>
                        </div>
                    </div>

                    <!-- ‚ö†Ô∏è AT RISK Section -->
                    <div class="posting-section" id="postingSectionAtrisk" style="margin-bottom: 20px;">
                        <div class="posting-section-header" onclick="togglePostingSection('atrisk')" style="display: flex; align-items: center; gap: 12px; padding: 14px 18px; background: linear-gradient(135deg, rgba(245,158,11,0.15), rgba(245,158,11,0.05)); border: 1px solid rgba(245,158,11,0.3); border-radius: 12px; cursor: pointer;">
                            <span style="font-size: 1.4rem;">‚ö†Ô∏è</span>
                            <div style="flex: 1;">
                                <div style="font-weight: 700; font-size: 1rem; color: #f59e0b;">AT RISK</div>
                                <div style="font-size: 0.75rem; color: var(--text-muted);">3-4 posts in last 7 days - close but not quite</div>
                            </div>
                            <button onclick="event.stopPropagation(); copyPostingDiscord('atrisk')" class="btn btn-small" style="padding: 5px 10px; font-size: 0.7rem;">üìã Discord</button>
                            <span class="posting-section-count" id="postingAtriskBadge" style="background: rgba(245,158,11,0.2); color: #f59e0b; padding: 4px 12px; border-radius: 20px; font-weight: 700; font-size: 0.85rem;">0</span>
                            <span class="posting-section-toggle" id="postingAtriskToggle" style="font-size: 1.2rem; color: var(--text-muted);">‚ñ∂</span>
                        </div>
                        <div class="posting-section-content" id="postingAtriskContent" style="display: none; border: 1px solid var(--border); border-top: none; border-radius: 0 0 12px 12px; padding: 16px; background: var(--bg-card);">
                            <div id="postingAtriskGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 12px;">
                                <div style="grid-column: 1/-1; text-align: center; padding: 30px; color: var(--text-muted);">Loading...</div>
                            </div>
                        </div>
                    </div>

                    <!-- ‚úÖ ON TRACK Section -->
                    <div class="posting-section" id="postingSectionOntrack" style="margin-bottom: 20px;">
                        <div class="posting-section-header" onclick="togglePostingSection('ontrack')" style="display: flex; align-items: center; gap: 12px; padding: 14px 18px; background: linear-gradient(135deg, rgba(34,197,94,0.15), rgba(34,197,94,0.05)); border: 1px solid rgba(34,197,94,0.3); border-radius: 12px; cursor: pointer;">
                            <span style="font-size: 1.4rem;">‚úÖ</span>
                            <div style="flex: 1;">
                                <div style="font-weight: 700; font-size: 1rem; color: #22c55e;">ON TRACK</div>
                                <div style="font-size: 0.75rem; color: var(--text-muted);">5-9 posts in last 7 days - meeting target</div>
                            </div>
                            <button onclick="event.stopPropagation(); copyPostingDiscord('ontrack')" class="btn btn-small" style="padding: 5px 10px; font-size: 0.7rem;">üìã Discord</button>
                            <span class="posting-section-count" id="postingOntrackBadge" style="background: rgba(34,197,94,0.2); color: #22c55e; padding: 4px 12px; border-radius: 20px; font-weight: 700; font-size: 0.85rem;">0</span>
                            <span class="posting-section-toggle" id="postingOntrackToggle" style="font-size: 1.2rem; color: var(--text-muted);">‚ñ∂</span>
                        </div>
                        <div class="posting-section-content" id="postingOntrackContent" style="display: none; border: 1px solid var(--border); border-top: none; border-radius: 0 0 12px 12px; padding: 16px; background: var(--bg-card);">
                            <div id="postingOntrackGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 12px;">
                                <div style="grid-column: 1/-1; text-align: center; padding: 30px; color: var(--text-muted);">Loading...</div>
                            </div>
                        </div>
                    </div>

                    <!-- ‚≠ê STARS Section -->
                    <div class="posting-section" id="postingSectionStars" style="margin-bottom: 20px;">
                        <div class="posting-section-header" onclick="togglePostingSection('stars')" style="display: flex; align-items: center; gap: 12px; padding: 14px 18px; background: linear-gradient(135deg, rgba(139,92,246,0.15), rgba(139,92,246,0.05)); border: 1px solid rgba(139,92,246,0.3); border-radius: 12px; cursor: pointer;">
                            <span style="font-size: 1.4rem;">‚≠ê</span>
                            <div style="flex: 1;">
                                <div style="font-weight: 700; font-size: 1rem; color: #8b5cf6;">STARS</div>
                                <div style="font-size: 0.75rem; color: var(--text-muted);">10+ posts in last 7 days - crushing it!</div>
                            </div>
                            <button onclick="event.stopPropagation(); copyPostingDiscord('stars')" class="btn btn-small" style="padding: 5px 10px; font-size: 0.7rem;">üìã Discord</button>
                            <span class="posting-section-count" id="postingStarsBadge" style="background: rgba(139,92,246,0.2); color: #8b5cf6; padding: 4px 12px; border-radius: 20px; font-weight: 700; font-size: 0.85rem;">0</span>
                            <span class="posting-section-toggle" id="postingStarsToggle" style="font-size: 1.2rem; color: var(--text-muted);">‚ñ∂</span>
                        </div>
                        <div class="posting-section-content" id="postingStarsContent" style="display: none; border: 1px solid var(--border); border-top: none; border-radius: 0 0 12px 12px; padding: 16px; background: var(--bg-card);">
                            <div id="postingStarsGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 12px;">
                                <div style="grid-column: 1/-1; text-align: center; padding: 30px; color: var(--text-muted);">Loading...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ========== CREATORS TAB ========== -->
            <div id="ops-tab-creators" class="ops-tab-content" style="display: none;">
                <!-- Header -->
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 16px;">
                    <div>
                        <h2 style="font-size: 1.4rem; font-weight: 700; margin: 0;">üë• Creator Management</h2>
                        <p id="creatorsTabContext" style="color: var(--text-muted); font-size: 0.85rem; margin: 4px 0 0 0;">Loading creator data...</p>
                    </div>
                    <div style="display: flex; gap: 8px; align-items: center; flex-wrap: wrap;">
                        <select id="creatorsBrandFilter" onchange="onCreatorsBrandFilterChange()" style="padding: 8px 12px; border: 1px solid var(--border); border-radius: 6px; background: var(--bg-secondary); color: var(--text-primary); min-width: 140px;">
                            <option value="all">All Brands</option>
                            <option value="catakor">Cata-Kor</option>
                            <option value="jiyu">JiYu</option>
                            <option value="physicians_choice">Physicians Choice</option>
                            <option value="peach_slices">Peach Slices</option>
                            <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                        </select>
                        <select id="creatorsProductFilter" onchange="loadCreatorsTab()" style="padding: 8px 12px; border: 1px solid var(--border); border-radius: 6px; background: var(--bg-secondary); color: var(--text-primary); min-width: 140px;">
                            <option value="all">All Products</option>
                        </select>
                        <select id="creatorsStatusFilter" onchange="loadCreatorsTab()" style="padding: 8px 12px; border: 1px solid var(--border); border-radius: 6px; background: var(--bg-secondary); color: var(--text-primary); min-width: 130px;">
                            <option value="active">Active Only</option>
                            <option value="all">All Statuses</option>
                            <option value="Active">Active</option>
                            <option value="On Hold">On Hold</option>
                            <option value="Churned">Churned</option>
                        </select>
                        <button class="btn" onclick="exportCreatorsCSV()" title="Export to CSV">üì• Export</button>
                        <button class="btn btn-primary" onclick="loadCreatorsTab()">üîÑ Refresh</button>
                    </div>
                </div>
                
                <!-- Summary Stats -->
                <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 12px; margin-bottom: 24px;">
                    <div class="stat-card" style="padding: 16px; text-align: center; cursor: pointer;" onclick="toggleCreatorSection('creatorsAttention')">
                        <div class="stat-value" id="creatorsStatAttention" style="font-size: 1.8rem; color: #ef4444;">0</div>
                        <div class="stat-label" style="font-size: 0.75rem;">üö® Needs Attention</div>
                    </div>
                    <div class="stat-card" style="padding: 16px; text-align: center; cursor: pointer;" onclick="toggleCreatorSection('creatorsTop')">
                        <div class="stat-value" id="creatorsStatTop" style="font-size: 1.8rem; color: #22c55e;">0</div>
                        <div class="stat-label" style="font-size: 0.75rem;">üèÜ Top Performers</div>
                    </div>
                    <div class="stat-card" style="padding: 16px; text-align: center;">
                        <div class="stat-value" id="creatorsStatTotal" style="font-size: 1.8rem; color: var(--accent);">0</div>
                        <div class="stat-label" style="font-size: 0.75rem;">üë• Total</div>
                    </div>
                    <div class="stat-card" style="padding: 16px; text-align: center;">
                        <div class="stat-value" id="creatorsStatRetainer" style="font-size: 1.8rem; color: var(--blue);">$0</div>
                        <div class="stat-label" style="font-size: 0.75rem;">üí∞ Retainer</div>
                    </div>
                    <div class="stat-card" style="padding: 16px; text-align: center;">
                        <div class="stat-value" id="creatorsStatGmv" style="font-size: 1.8rem; color: var(--success);">$0</div>
                        <div class="stat-label" style="font-size: 0.75rem;">üìà GMV</div>
                    </div>
                </div>
                
                <!-- üö® NEEDS ATTENTION Section -->
                <div class="creator-section" id="creatorSectionAttention" style="margin-bottom: 24px;">
                    <div class="creator-section-header" onclick="toggleCreatorSection('creatorsAttention')" style="display: flex; align-items: center; gap: 12px; padding: 16px 20px; background: linear-gradient(135deg, rgba(239,68,68,0.15), rgba(239,68,68,0.05)); border: 1px solid rgba(239,68,68,0.3); border-radius: 12px; cursor: pointer;">
                        <span style="font-size: 1.5rem;">üö®</span>
                        <div style="flex: 1;">
                            <div style="font-weight: 700; font-size: 1.1rem; color: #ef4444;">NEEDS ATTENTION</div>
                            <div style="font-size: 0.8rem; color: var(--text-muted);">Retainer creators with low or no ROI - time to follow up</div>
                        </div>
                        <span class="creator-section-count" id="creatorsAttentionCount" style="background: rgba(239,68,68,0.2); color: #ef4444; padding: 4px 12px; border-radius: 20px; font-weight: 700; font-size: 0.9rem;">0</span>
                        <span class="creator-section-toggle" id="creatorsAttentionToggle" style="font-size: 1.2rem; color: var(--text-muted);">‚ñ∂</span>
                    </div>
                    <div class="creator-section-content" id="creatorsAttentionContent" style="border: 1px solid var(--border); border-top: none; border-radius: 0 0 12px 12px; padding: 20px; background: var(--bg-card); display: none;">
                        <div id="creatorsAttentionGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 16px;">
                            <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: var(--text-muted);">Loading...</div>
                        </div>
                    </div>
                </div>
                
                <!-- üèÜ TOP PERFORMERS Section -->
                <div class="creator-section" id="creatorSectionTop" style="margin-bottom: 24px;">
                    <div class="creator-section-header" onclick="toggleCreatorSection('creatorsTop')" style="display: flex; align-items: center; gap: 12px; padding: 16px 20px; background: linear-gradient(135deg, rgba(34,197,94,0.15), rgba(34,197,94,0.05)); border: 1px solid rgba(34,197,94,0.3); border-radius: 12px; cursor: pointer;">
                        <span style="font-size: 1.5rem;">üèÜ</span>
                        <div style="flex: 1;">
                            <div style="font-weight: 700; font-size: 1.1rem; color: #22c55e;">TOP PERFORMERS</div>
                            <div style="font-size: 0.8rem; color: var(--text-muted);">Highest GMV generators in selected period</div>
                        </div>
                        <span class="creator-section-count" id="creatorsTopCount" style="background: rgba(34,197,94,0.2); color: #22c55e; padding: 4px 12px; border-radius: 20px; font-weight: 700; font-size: 0.9rem;">0</span>
                        <span class="creator-section-toggle" id="creatorsTopToggle" style="font-size: 1.2rem; color: var(--text-muted);">‚ñ∂</span>
                    </div>
                    <div class="creator-section-content" id="creatorsTopContent" style="border: 1px solid var(--border); border-top: none; border-radius: 0 0 12px 12px; padding: 20px; background: var(--bg-card); display: none;">
                        <div id="creatorsTopGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 16px;">
                            <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: var(--text-muted);">Loading top performers...</div>
                        </div>
                    </div>
                </div>
                
                <!-- üìä ROI LEADERS Section -->
                <div class="creator-section" id="creatorSectionRoi" style="margin-bottom: 24px;">
                    <div class="creator-section-header" onclick="toggleCreatorSection('creatorsRoi')" style="display: flex; align-items: center; gap: 12px; padding: 16px 20px; background: linear-gradient(135deg, rgba(139,92,246,0.15), rgba(139,92,246,0.05)); border: 1px solid rgba(139,92,246,0.3); border-radius: 12px; cursor: pointer;">
                        <span style="font-size: 1.5rem;">üìä</span>
                        <div style="flex: 1;">
                            <div style="font-weight: 700; font-size: 1.1rem; color: #8b5cf6;">ROI LEADERS</div>
                            <div style="font-size: 0.8rem; color: var(--text-muted);">Best return on retainer investment</div>
                        </div>
                        <span class="creator-section-count" id="creatorsRoiCount" style="background: rgba(139,92,246,0.2); color: #8b5cf6; padding: 4px 12px; border-radius: 20px; font-weight: 700; font-size: 0.9rem;">0</span>
                        <span class="creator-section-toggle" id="creatorsRoiToggle" style="font-size: 1.2rem; color: var(--text-muted);">‚ñ∂</span>
                    </div>
                    <div class="creator-section-content" id="creatorsRoiContent" style="border: 1px solid var(--border); border-top: none; border-radius: 0 0 12px 12px; padding: 20px; background: var(--bg-card); display: none;">
                        <div id="creatorsRoiGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 16px;">
                            <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: var(--text-muted);">Loading ROI data...</div>
                        </div>
                    </div>
                </div>
                
                <!-- üìã ALL CREATORS Table Section -->
                <div class="creator-section" id="creatorSectionAll">
                    <div class="creator-section-header" onclick="toggleCreatorSection('creatorsAll')" style="display: flex; align-items: center; gap: 12px; padding: 16px 20px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 12px; cursor: pointer;">
                        <span style="font-size: 1.5rem;">üìã</span>
                        <div style="flex: 1;">
                            <div style="font-weight: 700; font-size: 1.1rem; color: var(--text-primary);">ALL CREATORS</div>
                            <div style="font-size: 0.8rem; color: var(--text-muted);">Complete list with all details</div>
                        </div>
                        <input type="text" id="creatorsSearchFilter" placeholder="Search creators..." onclick="event.stopPropagation()" oninput="filterCreatorsTable()" style="padding: 6px 12px; border: 1px solid var(--border); border-radius: 6px; background: var(--bg-card); color: var(--text-primary); width: 180px; font-size: 0.85rem;">
                        <span class="creator-section-count" id="creatorsAllCount" style="background: var(--bg-card); color: var(--text-secondary); padding: 4px 12px; border-radius: 20px; font-weight: 700; font-size: 0.9rem;">0</span>
                        <span class="creator-section-toggle" id="creatorsAllToggle" style="font-size: 1.2rem; color: var(--text-muted);">‚ñ∂</span>
                    </div>
                    <div class="creator-section-content" id="creatorsAllContent" style="border: 1px solid var(--border); border-top: none; border-radius: 0 0 12px 12px; background: var(--bg-card); display: none;">
                        <div class="table-container" style="max-height: 500px; overflow-y: auto;">
                            <table>
                                <thead style="position: sticky; top: 0; background: var(--bg-card); z-index: 1;">
                                    <tr>
                                        <th>Creator</th>
                                        <th style="text-align: center;">Status</th>
                                        <th style="text-align: center;">Type</th>
                                        <th>TikTok Accounts</th>
                                        <th>Brand</th>
                                        <th style="text-align: center;">Retainer</th>
                                        <th style="text-align: right;">GMV</th>
                                        <th style="text-align: center;">ROI</th>
                                        <th style="text-align: center;">Videos</th>
                                        <th style="text-align: center;">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="creatorsTableBody">
                                    <tr><td colspan="10" style="text-align: center; padding: 40px; color: var(--text-muted);">Loading...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ========== DECISIONS TAB ========== -->
            <div id="ops-tab-decisions" class="ops-tab-content" style="display: none;">
                <!-- Header -->
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 16px;">
                    <div>
                        <h2 style="font-size: 1.4rem; font-weight: 700; margin: 0;">‚úÇÔ∏è Monthly Decisions</h2>
                        <p id="decisionsDateRange" style="color: var(--text-muted); font-size: 0.85rem; margin: 4px 0 0 0;">Rolling 30-day ROI analysis</p>
                    </div>
                    <div style="display: flex; gap: 8px; align-items: center;">
                        <select id="decisionsBrandFilter" onchange="onDecisionsBrandFilterChange()" style="padding: 8px 12px; border-radius: 8px; border: 1px solid var(--border); background: var(--bg-secondary); font-size: 0.85rem;">
                            <option value="all">All Brands</option>
                            <option value="catakor">Cata-Kor</option>
                            <option value="jiyu">JiYu</option>
                            <option value="physicians_choice">Physicians Choice</option>
                            <option value="peach_slices">Peach Slices</option>
                            <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                        </select>
                        <select id="decisionsProductFilter" onchange="loadDecisions()" style="padding: 8px 12px; border-radius: 8px; border: 1px solid var(--border); background: var(--bg-secondary); font-size: 0.85rem;">
                            <option value="all">All Products</option>
                        </select>
                        <select id="decisionsTypeFilter" onchange="filterDecisions()" style="padding: 8px 12px; border-radius: 8px; border: 1px solid var(--border); background: var(--bg-secondary); font-size: 0.85rem;">
                            <option value="retainer">Retainer Only</option>
                            <option value="all">All Types</option>
                        </select>
                        <input type="text" id="decisionsSearchFilter" placeholder="üîç Search..." oninput="filterDecisions()" style="padding: 8px 12px; border-radius: 8px; border: 1px solid var(--border); background: var(--bg-secondary); width: 150px; font-size: 0.85rem;">
                        <button class="btn btn-primary" onclick="loadDecisions()" style="padding: 8px 16px;">üîÑ Refresh</button>
                    </div>
                </div>
                
                <!-- ROI Criteria Legend -->
                <div style="display: flex; gap: 24px; flex-wrap: wrap; margin-bottom: 20px; padding: 12px 16px; background: var(--bg-secondary); border-radius: 10px; border: 1px solid var(--border);">
                    <div style="display: flex; align-items: center; gap: 6px;">
                        <span style="font-size: 1.1rem;">‚≠ê</span>
                        <span style="font-weight: 600; color: #8b5cf6;">STAR</span>
                        <span style="color: var(--text-muted); font-size: 0.85rem;">‚â•10x ROI</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 6px;">
                        <span style="font-size: 1.1rem;">‚úÖ</span>
                        <span style="font-weight: 600; color: #22c55e;">KEEP</span>
                        <span style="color: var(--text-muted); font-size: 0.85rem;">‚â•3x ROI</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 6px;">
                        <span style="font-size: 1.1rem;">üëÄ</span>
                        <span style="font-weight: 600; color: #f59e0b;">WATCH</span>
                        <span style="color: var(--text-muted); font-size: 0.85rem;">1-3x ROI</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 6px;">
                        <span style="font-size: 1.1rem;">‚úÇÔ∏è</span>
                        <span style="font-weight: 600; color: #ef4444;">CUT</span>
                        <span style="color: var(--text-muted); font-size: 0.85rem;">&lt;1x ROI</span>
                    </div>
                </div>
                
                <!-- Summary Stats -->
                <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 12px; margin-bottom: 24px;">
                    <div class="stat-card" style="padding: 16px; text-align: center; cursor: pointer; border-left: 4px solid #ef4444;" onclick="toggleDecisionSection('cut')">
                        <div class="stat-value" id="decisionsCutCount" style="font-size: 1.8rem; color: #ef4444;">0</div>
                        <div class="stat-label" style="font-size: 0.75rem;">‚úÇÔ∏è Cut</div>
                        <div style="font-size: 0.65rem; color: var(--text-muted); margin-top: 2px;">&lt;1x ROI</div>
                    </div>
                    <div class="stat-card" style="padding: 16px; text-align: center; cursor: pointer; border-left: 4px solid #f59e0b;" onclick="toggleDecisionSection('watch')">
                        <div class="stat-value" id="decisionsWatchCount" style="font-size: 1.8rem; color: #f59e0b;">0</div>
                        <div class="stat-label" style="font-size: 0.75rem;">üëÄ Watch</div>
                        <div style="font-size: 0.65rem; color: var(--text-muted); margin-top: 2px;">1-3x ROI</div>
                    </div>
                    <div class="stat-card" style="padding: 16px; text-align: center; cursor: pointer; border-left: 4px solid #22c55e;" onclick="toggleDecisionSection('keep')">
                        <div class="stat-value" id="decisionsKeepCount" style="font-size: 1.8rem; color: #22c55e;">0</div>
                        <div class="stat-label" style="font-size: 0.75rem;">‚úÖ Keep</div>
                        <div style="font-size: 0.65rem; color: var(--text-muted); margin-top: 2px;">‚â•3x ROI</div>
                    </div>
                    <div class="stat-card" style="padding: 16px; text-align: center; border-left: 4px solid #8b5cf6;">
                        <div class="stat-value" id="decisionsStarsCount" style="font-size: 1.8rem; color: #8b5cf6;">0</div>
                        <div class="stat-label" style="font-size: 0.75rem;">‚≠ê Stars</div>
                        <div style="font-size: 0.65rem; color: var(--text-muted); margin-top: 2px;">‚â•10x ROI</div>
                    </div>
                    <div class="stat-card" style="padding: 16px; text-align: center; border-left: 4px solid var(--accent); background: linear-gradient(135deg, var(--bg-card) 0%, rgba(245, 197, 24, 0.08) 100%);">
                        <div class="stat-value" id="decisionsAtRisk" style="font-size: 1.6rem; color: var(--accent);">$0</div>
                        <div class="stat-label" style="font-size: 0.75rem;">üí∞ $ At Risk</div>
                        <div id="decisionsAtRiskCreators" style="font-size: 0.65rem; color: var(--text-muted); margin-top: 2px;">0 creators</div>
                    </div>
                </div>

                <!-- Collapsible Sections -->
                <div id="decisionsContent">
                    <!-- ‚úÇÔ∏è CUT Section -->
                    <div class="decision-section" id="decisionSectionCut" style="margin-bottom: 20px;">
                        <div class="decision-section-header" onclick="toggleDecisionSection('cut')" style="display: flex; align-items: center; gap: 12px; padding: 14px 18px; background: linear-gradient(135deg, rgba(239,68,68,0.15), rgba(239,68,68,0.05)); border: 1px solid rgba(239,68,68,0.3); border-radius: 12px; cursor: pointer;">
                            <span style="font-size: 1.4rem;">‚úÇÔ∏è</span>
                            <div style="flex: 1;">
                                <div style="font-weight: 700; font-size: 1rem; color: #ef4444;">CUT - Recommend Ending</div>
                                <div style="font-size: 0.75rem; color: var(--text-muted);">Below 1x ROI - losing money on these creators</div>
                            </div>
                            <button onclick="event.stopPropagation(); copyDecisionDiscord('cut')" class="btn btn-small" style="padding: 5px 10px; font-size: 0.7rem;">üìã Discord</button>
                            <span class="decision-section-count" id="decisionsCutBadge" style="background: rgba(239,68,68,0.2); color: #ef4444; padding: 4px 12px; border-radius: 20px; font-weight: 700; font-size: 0.85rem;">0</span>
                            <span class="decision-section-toggle" id="decisionsCutToggle" style="font-size: 1.2rem; color: var(--text-muted);">‚ñ∂</span>
                        </div>
                        <div class="decision-section-content" id="decisionsCutContent" style="display: none; border: 1px solid var(--border); border-top: none; border-radius: 0 0 12px 12px; padding: 16px; background: var(--bg-card);">
                            <div id="decisionsCutGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 12px;">
                                <div style="grid-column: 1/-1; text-align: center; padding: 30px; color: var(--text-muted);">Loading...</div>
                            </div>
                        </div>
                    </div>

                    <!-- üëÄ WATCH Section -->
                    <div class="decision-section" id="decisionSectionWatch" style="margin-bottom: 20px;">
                        <div class="decision-section-header" onclick="toggleDecisionSection('watch')" style="display: flex; align-items: center; gap: 12px; padding: 14px 18px; background: linear-gradient(135deg, rgba(245,158,11,0.15), rgba(245,158,11,0.05)); border: 1px solid rgba(245,158,11,0.3); border-radius: 12px; cursor: pointer;">
                            <span style="font-size: 1.4rem;">üëÄ</span>
                            <div style="flex: 1;">
                                <div style="font-weight: 700; font-size: 1rem; color: #f59e0b;">WATCH - Monitor Closely</div>
                                <div style="font-size: 0.75rem; color: var(--text-muted);">1-3x ROI - breaking even, could go either way</div>
                            </div>
                            <button onclick="event.stopPropagation(); copyDecisionDiscord('watch')" class="btn btn-small" style="padding: 5px 10px; font-size: 0.7rem;">üìã Discord</button>
                            <span class="decision-section-count" id="decisionsWatchBadge" style="background: rgba(245,158,11,0.2); color: #f59e0b; padding: 4px 12px; border-radius: 20px; font-weight: 700; font-size: 0.85rem;">0</span>
                            <span class="decision-section-toggle" id="decisionsWatchToggle" style="font-size: 1.2rem; color: var(--text-muted);">‚ñ∂</span>
                        </div>
                        <div class="decision-section-content" id="decisionsWatchContent" style="display: none; border: 1px solid var(--border); border-top: none; border-radius: 0 0 12px 12px; padding: 16px; background: var(--bg-card);">
                            <div id="decisionsWatchGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 12px;">
                                <div style="grid-column: 1/-1; text-align: center; padding: 30px; color: var(--text-muted);">Loading...</div>
                            </div>
                        </div>
                    </div>

                    <!-- ‚úÖ KEEP Section -->
                    <div class="decision-section" id="decisionSectionKeep" style="margin-bottom: 20px;">
                        <div class="decision-section-header" onclick="toggleDecisionSection('keep')" style="display: flex; align-items: center; gap: 12px; padding: 14px 18px; background: linear-gradient(135deg, rgba(34,197,94,0.15), rgba(34,197,94,0.05)); border: 1px solid rgba(34,197,94,0.3); border-radius: 12px; cursor: pointer;">
                            <span style="font-size: 1.4rem;">‚úÖ</span>
                            <div style="flex: 1;">
                                <div style="font-weight: 700; font-size: 1rem; color: #22c55e;">KEEP - Solid Performers</div>
                                <div style="font-size: 0.75rem; color: var(--text-muted);">3x+ ROI - good return on investment (‚≠ê = 10x+ stars)</div>
                            </div>
                            <button onclick="event.stopPropagation(); copyDecisionDiscord('keep')" class="btn btn-small" style="padding: 5px 10px; font-size: 0.7rem;">üìã Discord</button>
                            <span class="decision-section-count" id="decisionsKeepBadge" style="background: rgba(34,197,94,0.2); color: #22c55e; padding: 4px 12px; border-radius: 20px; font-weight: 700; font-size: 0.85rem;">0</span>
                            <span class="decision-section-toggle" id="decisionsKeepToggle" style="font-size: 1.2rem; color: var(--text-muted);">‚ñ∂</span>
                        </div>
                        <div class="decision-section-content" id="decisionsKeepContent" style="display: none; border: 1px solid var(--border); border-top: none; border-radius: 0 0 12px 12px; padding: 16px; background: var(--bg-card);">
                            <div id="decisionsKeepGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 12px;">
                                <div style="grid-column: 1/-1; text-align: center; padding: 30px; color: var(--text-muted);">Loading...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="view-overview" class="view-section active">
            <!-- Loading Overlay -->
            <div id="overview-loading" class="loading-overlay">
                <div class="loading-spinner-container">
                    <div class="spinner-ring spinner-ring-pulse"></div>
                    <div class="spinner-ring spinner-ring-active"></div>
                    <div class="loading-icon">üìä</div>
                </div>
                <div class="loading-text">Loading dashboard...</div>
                <div class="loading-subtext">Fetching performance data</div>
                <div class="loading-dots">
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                </div>
            </div>
            
            <!-- Quick Links Bar -->
            <div style="display: flex; gap: 8px; margin-bottom: 16px; justify-content: flex-end;">
                <a href="https://affiliate.tiktokglobalshop.com/" target="_blank" class="btn btn-sm" style="padding: 6px 10px; font-size: 0.75rem; text-decoration: none;">üõí TTS</a>
                <a href="https://www.fastmoss.com/dashboard" target="_blank" class="btn btn-sm" style="padding: 6px 10px; font-size: 0.75rem; text-decoration: none;">üìä FastMoss</a>
                <a href="https://www.thedailyvirals.com/" target="_blank" class="btn btn-sm" style="padding: 6px 10px; font-size: 0.75rem; text-decoration: none;">üî• Virals</a>
                <a href="https://ads.tiktok.com/business/creativecenter/pc/en" target="_blank" class="btn btn-sm" style="padding: 6px 10px; font-size: 0.75rem; text-decoration: none;">üéµ Creative Center</a>
            </div>
            
            <!-- Filters Row -->
            <div style="display: flex; justify-content: flex-end; align-items: center; margin-bottom: 24px; flex-wrap: wrap; gap: 12px;">
                <p id="dateRange" style="color: var(--text-muted); font-size: 0.85rem; margin-right: auto;">Loading...</p>
                <!-- Brand Filter -->
                <select id="brandFilter" onchange="loadOverviewData()" style="padding: 8px 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg-secondary); color: var(--text-primary); min-width: 140px;">
                    <option value="all">All Brands</option>
                    <option value="catakor">Cata-Kor</option>
                    <option value="jiyu">JiYu</option>
                    <option value="physicians_choice">Physicians Choice</option>
                    <option value="peach_slices">Peach Slices</option>
                    <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                </select>
                <!-- Date Picker -->
                <select id="datePresetSelect" style="padding: 8px 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg-secondary); color: var(--text-primary); min-width: 130px;">
                    <option value="yesterday">Yesterday</option>
                    <option value="last7" selected>Last 7 Days</option>
                    <option value="last14">Last 14 Days</option>
                    <option value="last30">Last 30 Days</option>
                    <option value="thisMonth">This Month</option>
                    <option value="lastMonth">Last Month</option>
                    <option value="custom">Custom Range</option>
                </select>
                <input type="text" class="date-range-input" id="overviewDateRange" placeholder="Select dates" readonly style="width: 200px; padding: 8px 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg-secondary); color: var(--text-primary);">
                <input type="hidden" id="dateFilterStart">
                <input type="hidden" id="dateFilterEnd">
                <input type="hidden" id="statusFilter" value="all">
            </div>
            
            <!-- ===== QUICK STATS ROW ===== -->
            <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 16px; margin-bottom: 24px;" id="overviewQuickStats">
                <div style="background: linear-gradient(135deg, var(--bg-card), rgba(245, 197, 24, 0.08)); border: 1px solid rgba(245, 197, 24, 0.3); border-radius: 12px; padding: 16px; text-align: center;">
                    <div style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;">Period GMV</div>
                    <div id="statGmv" style="font-size: 1.6rem; font-weight: 800; color: var(--accent);">$0</div>
                    <div id="statGmvChange" style="font-size: 0.75rem; color: var(--text-muted);">--</div>
                </div>
                <div style="background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 16px; text-align: center;">
                    <div style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;">Orders</div>
                    <div id="statOrders" style="font-size: 1.6rem; font-weight: 800; color: var(--text-primary);">0</div>
                    <div id="statOrdersChange" style="font-size: 0.75rem; color: var(--text-muted);">--</div>
                </div>
                <div style="background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 16px; text-align: center;">
                    <div style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;">Active Creators</div>
                    <div id="statCreators" style="font-size: 1.6rem; font-weight: 800; color: var(--text-primary);">0</div>
                    <div id="statCreatorsChange" style="font-size: 0.75rem; color: var(--text-muted);">--</div>
                </div>
                <div style="background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 16px; text-align: center;">
                    <div style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;">Videos</div>
                    <div id="statVideos" style="font-size: 1.6rem; font-weight: 800; color: var(--text-primary);">0</div>
                    <div id="statVideosChange" style="font-size: 0.75rem; color: var(--text-muted);">--</div>
                </div>
                <div style="background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 16px; text-align: center;">
                    <div style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;">GMV/Video</div>
                    <div id="statGmvPerVideo" style="font-size: 1.6rem; font-weight: 800; color: var(--text-primary);">$0</div>
                    <div id="statGmvPerVideoChange" style="font-size: 0.75rem; color: var(--text-muted);">--</div>
                </div>
            </div>
            
            <!-- ===== MANAGED VS UNMANAGED ===== -->
            <div style="background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 20px; margin-bottom: 24px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                    <h3 style="font-size: 1rem; font-weight: 700; margin: 0;">üìä Managed vs Unmanaged</h3>
                    <span id="managedPctLabel" style="font-size: 0.85rem; color: var(--success); font-weight: 600;">--% managed</span>
                </div>
                <!-- Progress Bar -->
                <div style="background: var(--bg-secondary); border-radius: 8px; height: 16px; overflow: hidden; display: flex; margin-bottom: 16px;">
                    <div id="managedGmvBar" style="background: linear-gradient(90deg, #22c55e, #34d399); height: 100%; transition: width 0.5s ease;" title="Managed GMV"></div>
                    <div id="unmanagedGmvBar" style="background: var(--border-light); height: 100%; transition: width 0.5s ease;" title="Unmanaged GMV"></div>
                </div>
                <!-- Stats Grid -->
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                    <!-- Managed -->
                    <div style="background: rgba(34, 197, 94, 0.08); border: 1px solid rgba(34, 197, 94, 0.2); border-radius: 10px; padding: 14px;">
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px;">
                            <span style="font-size: 1rem;">‚úÖ</span>
                            <span style="font-weight: 600; color: #22c55e;">Managed</span>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; text-align: center;">
                            <div>
                                <div id="managedGmv" style="font-size: 1.2rem; font-weight: 700; color: #22c55e;">$0</div>
                                <div style="font-size: 0.65rem; color: var(--text-muted);">GMV</div>
                            </div>
                            <div>
                                <div id="managedCount" style="font-size: 1.2rem; font-weight: 700;">0</div>
                                <div style="font-size: 0.65rem; color: var(--text-muted);">Creators</div>
                            </div>
                            <div>
                                <div id="managedAvg" style="font-size: 1.2rem; font-weight: 700;">$0</div>
                                <div style="font-size: 0.65rem; color: var(--text-muted);">Avg/Creator</div>
                            </div>
                        </div>
                    </div>
                    <!-- Unmanaged -->
                    <div style="background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 10px; padding: 14px;">
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px;">
                            <span style="font-size: 1rem;">‚ùì</span>
                            <span style="font-weight: 600; color: var(--text-secondary);">Unmanaged</span>
                            <a href="#" onclick="switchView('creators'); return false;" style="margin-left: auto; font-size: 0.65rem; color: var(--accent);">View ‚Üí</a>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; text-align: center;">
                            <div>
                                <div id="unmanagedGmv" style="font-size: 1.2rem; font-weight: 700; color: var(--text-secondary);">$0</div>
                                <div style="font-size: 0.65rem; color: var(--text-muted);">GMV</div>
                            </div>
                            <div>
                                <div id="unmanagedCount" style="font-size: 1.2rem; font-weight: 700;">0</div>
                                <div style="font-size: 0.65rem; color: var(--text-muted);">Creators</div>
                            </div>
                            <div>
                                <div id="unmanagedAvg" style="font-size: 1.2rem; font-weight: 700;">$0</div>
                                <div style="font-size: 0.65rem; color: var(--text-muted);">Avg/Creator</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ===== AGENCY HEALTH ===== -->
            <div style="background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 20px; margin-bottom: 24px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                    <h3 style="font-size: 1rem; font-weight: 700; margin: 0; display: flex; align-items: center; gap: 8px;">
                        üí∞ Agency Health
                        <span style="font-size: 0.75rem; font-weight: 400; color: var(--text-muted);">(Rolling 30 Days)</span>
                    </h3>
                </div>
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px;">
                    <div style="text-align: center;">
                        <div style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 4px;">Monthly Retainer Spend</div>
                        <div id="agencyRetainerSpend" style="font-size: 1.4rem; font-weight: 700; color: #f59e0b;">$0</div>
                        <div id="agencyRetainerCount" style="font-size: 0.75rem; color: var(--text-muted);">0 creators</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 4px;">Managed GMV (30d)</div>
                        <div id="agencyManagedGmv" style="font-size: 1.4rem; font-weight: 700; color: #22c55e;">$0</div>
                        <div id="agencyManagedPct" style="font-size: 0.75rem; color: var(--text-muted);">0% of total</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 4px;">Portfolio ROI</div>
                        <div id="agencyRoi" style="font-size: 1.4rem; font-weight: 700; color: var(--text-primary);">0x</div>
                        <div style="font-size: 0.75rem; color: var(--text-muted);">GMV √∑ Retainer</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 4px;">Est. Commission (2.5%)</div>
                        <div id="agencyCommission" style="font-size: 1.4rem; font-weight: 700; color: #8b5cf6;">$0</div>
                        <div style="font-size: 0.75rem; color: var(--text-muted);">from managed GMV</div>
                    </div>
                </div>
                <!-- ROI Health Bar -->
                <div style="margin-top: 20px; padding-top: 16px; border-top: 1px solid var(--border);">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <span style="font-size: 0.8rem; color: var(--text-muted);">Portfolio ROI Distribution</span>
                        <span id="agencyRoiSummary" style="font-size: 0.75rem; color: var(--text-muted);">-- creators</span>
                    </div>
                    <div style="display: flex; height: 24px; border-radius: 8px; overflow: hidden; background: var(--bg-secondary);">
                        <div id="roiBarCut" style="background: #ef4444; height: 100%; transition: width 0.3s;" title="Cut (<1x ROI)"></div>
                        <div id="roiBarWatch" style="background: #f59e0b; height: 100%; transition: width 0.3s;" title="Watch (1-3x ROI)"></div>
                        <div id="roiBarKeep" style="background: #22c55e; height: 100%; transition: width 0.3s;" title="Keep (3x+ ROI)"></div>
                        <div id="roiBarStar" style="background: #8b5cf6; height: 100%; transition: width 0.3s;" title="Stars (10x+ ROI)"></div>
                    </div>
                    <div style="display: flex; justify-content: center; gap: 20px; margin-top: 8px; font-size: 0.7rem;">
                        <span style="display: flex; align-items: center; gap: 4px;"><span style="width: 10px; height: 10px; background: #ef4444; border-radius: 2px;"></span> Cut <span id="roiCountCut" style="color: var(--text-muted);">(0)</span></span>
                        <span style="display: flex; align-items: center; gap: 4px;"><span style="width: 10px; height: 10px; background: #f59e0b; border-radius: 2px;"></span> Watch <span id="roiCountWatch" style="color: var(--text-muted);">(0)</span></span>
                        <span style="display: flex; align-items: center; gap: 4px;"><span style="width: 10px; height: 10px; background: #22c55e; border-radius: 2px;"></span> Keep <span id="roiCountKeep" style="color: var(--text-muted);">(0)</span></span>
                        <span style="display: flex; align-items: center; gap: 4px;"><span style="width: 10px; height: 10px; background: #8b5cf6; border-radius: 2px;"></span> Stars <span id="roiCountStar" style="color: var(--text-muted);">(0)</span></span>
                    </div>
                </div>
            </div>
            
            <!-- ===== CHARTS ROW ===== -->
            <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 20px; margin-bottom: 24px;">
                <!-- GMV Trend Chart -->
                <div style="background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 20px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                        <h3 style="font-size: 1rem; font-weight: 700; margin: 0;">üìà GMV Trend</h3>
                    </div>
                    <div style="position: relative; height: 200px;">
                        <canvas id="gmvTrendChart"></canvas>
                    </div>
                </div>
                <!-- GMV by Brand Donut -->
                <div style="background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 20px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                        <h3 style="font-size: 1rem; font-weight: 700; margin: 0;">üè¢ GMV by Brand</h3>
                    </div>
                    <div style="position: relative; height: 200px;">
                        <canvas id="brandDonutChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== BRANDS ==================== -->
        <div id="view-brands" class="view-section">
            <!-- Loading Overlay -->
            <div id="brands-loading" class="loading-overlay hidden">
                <div class="loading-spinner-container">
                    <div class="spinner-ring spinner-ring-pulse"></div>
                    <div class="spinner-ring spinner-ring-active"></div>
                    <div class="loading-icon">üè¢</div>
                </div>
                <div class="loading-text">Loading brand data...</div>
                <div class="loading-subtext">Aggregating performance metrics</div>
                <div class="loading-dots">
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                </div>
            </div>
            <div class="header">
                <div>
                    <h1 class="header-title">Brand Performance</h1>
                    <p class="header-subtitle">Compare brands and deep dive into individual performance</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-secondary no-print" onclick="exportToPDF('view-brands', 'Brand Performance Report')">üìÑ Export PDF</button>
                    <button class="btn btn-primary no-print" onclick="openClientReportModal()">üìä Generate Client Report</button>
                </div>
            </div>

            <div class="filters">
                <div class="filter-group">
                    <span class="filter-label">Date Range</span>
                    <div style="display: flex; gap: 8px; align-items: center;">
                        <select id="brandsDatePresetSelect" class="filter-select" style="min-width: 130px;">
                            <option value="yesterday">Yesterday</option>
                            <option value="last7" selected>Last 7 Days</option>
                            <option value="last14">Last 14 Days</option>
                            <option value="last30">Last 30 Days</option>
                            <option value="thisMonth">This Month</option>
                            <option value="lastMonth">Last Month</option>
                            <option value="custom">Custom Range</option>
                        </select>
                        <input type="text" class="date-range-input" id="brandsDateRange" placeholder="Select dates" readonly style="width: 220px;">
                    </div>
                    <input type="hidden" id="brandsDateFilterStart">
                    <input type="hidden" id="brandsDateFilterEnd">
                </div>
                <div class="filter-group">
                    <span class="filter-label">Status</span>
                    <select id="brandsStatusFilter" onchange="loadBrandsData()">
                        <option value="all">All Creators</option>
                        <option value="managed">Managed Only</option>
                        <option value="unmanaged">Unmanaged Only</option>
                    </select>
                </div>
                <div class="filter-group">
                    <span class="filter-label">Product</span>
                    <select id="brandsProductFilter" onchange="loadBrandsData()">
                        <option value="all">All Products</option>
                    </select>
                </div>
            </div>

            <!-- Brand Comparison Cards -->
            <div class="section-title" style="margin-bottom: 16px;">
                <h2 style="font-size: 1.1rem; font-weight: 600; color: var(--text-primary); margin: 0;">üìä Brand Comparison</h2>
            </div>
            <div class="brand-comparison-grid" id="brandComparisonCards"></div>

            <!-- Performance Trend Chart -->
            <div class="card" style="margin-top: 24px;">
                <div class="card-header" style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 12px;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <div class="card-title"><span>üìà</span> Performance Trend</div>
                        <select id="trendKpiSelect" onchange="loadBrandTrendChart(currentTrendPeriod)" style="padding: 6px 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg-secondary); color: var(--text-primary); font-size: 0.85rem;">
                            <option value="gmv">üí∞ GMV</option>
                            <option value="orders">üõí Orders</option>
                            <option value="videos">üé¨ Videos</option>
                            <option value="creators">üë• Active Creators</option>
                        </select>
                    </div>
                    <div style="display: flex; gap: 8px;">
                        <button class="btn btn-sm active" id="trendPeriod7d" onclick="loadBrandTrendChart('7d')">7 Days</button>
                        <button class="btn btn-sm" id="trendPeriod4w" onclick="loadBrandTrendChart('4w')">4 Weeks</button>
                        <button class="btn btn-sm" id="trendPeriod8w" onclick="loadBrandTrendChart('8w')">8 Weeks</button>
                        <button class="btn btn-sm" id="trendPeriod3m" onclick="loadBrandTrendChart('3m')">3 Months</button>
                    </div>
                </div>
                <div class="card-body">
                    <canvas id="brandTrendChart" style="width: 100%; height: 300px;"></canvas>
                </div>
                <div id="brandTrendLegend" style="display: flex; justify-content: center; gap: 24px; padding: 12px; flex-wrap: wrap;"></div>
            </div>

            <!-- Period Comparison Table -->
            <div class="card" style="margin-top: 24px;">
                <div class="card-header">
                    <div class="card-title"><span>üìä</span> Period Comparison</div>
                </div>
                <div class="card-body no-padding">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Brand</th>
                                    <th style="text-align: right;">This Period</th>
                                    <th style="text-align: right;">Prior Period</th>
                                    <th style="text-align: right;">Change</th>
                                    <th style="text-align: right;">Orders</th>
                                    <th style="text-align: right;">Creators</th>
                                </tr>
                            </thead>
                            <tbody id="brandWowBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Brand Deep Dive -->
            <div class="section-title" style="margin: 32px 0 16px 0; display: flex; align-items: center; gap: 16px;">
                <h2 style="font-size: 1.1rem; font-weight: 600; color: var(--text-primary); margin: 0;">üîç Brand Deep Dive</h2>
                <select id="brandDeepDiveSelect" class="filter-select" style="min-width: 160px;" onchange="loadBrandDeepDive()">
                    <option value="catakor">Cata-Kor</option>
                    <option value="jiyu">JiYu</option>
                    <option value="physicians_choice">Physicians Choice</option>
                    <option value="peach_slices">Peach Slices</option>
                    <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                </select>
            </div>

            <!-- Deep Dive Stats -->
            <div class="stats-grid" id="brandDeepDiveStats">
                <div class="stat-card highlight">
                    <div class="stat-header"><div class="stat-icon yellow">üí∞</div></div>
                    <div class="stat-value" id="ddGmv">$0</div>
                    <div class="stat-label">Total GMV</div>
                    <div class="stat-change neutral" id="ddGmvChange">--</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header"><div class="stat-icon green">üõí</div></div>
                    <div class="stat-value" id="ddOrders">0</div>
                    <div class="stat-label">Orders</div>
                    <div class="stat-change neutral" id="ddOrdersChange">--</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header"><div class="stat-icon purple">üë•</div></div>
                    <div class="stat-value" id="ddCreators">0</div>
                    <div class="stat-label">Active Creators</div>
                    <div class="stat-change neutral" id="ddCreatorsChange">--</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header"><div class="stat-icon blue">üé¨</div></div>
                    <div class="stat-value" id="ddVideos">0</div>
                    <div class="stat-label">Videos</div>
                    <div class="stat-change neutral" id="ddVideosChange">--</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header"><div class="stat-icon teal">üíµ</div></div>
                    <div class="stat-value" id="ddAov">$0</div>
                    <div class="stat-label">Avg Order Value</div>
                    <div class="stat-change neutral" id="ddAovChange">--</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header"><div class="stat-icon orange">üí∏</div></div>
                    <div class="stat-value" id="ddCommission">$0</div>
                    <div class="stat-label">Est. Commission</div>
                    <div class="stat-change neutral" id="ddCommissionChange">--</div>
                </div>
            </div>

            <!-- Deep Dive Charts & Tables -->
            <div class="card" style="margin-top: 24px;">
                <div class="card-header">
                    <div class="card-title"><span>üë•</span> Managed vs Unmanaged</div>
                </div>
                <div class="card-body">
                    <div id="brandManagedBreakdown" style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
                        <div style="text-align: center; padding: 20px; background: var(--bg-secondary); border-radius: 12px;">
                            <div style="font-size: 0.85rem; color: var(--success); margin-bottom: 8px;">‚úì Managed</div>
                            <div style="font-size: 1.8rem; font-weight: 700; color: var(--accent);" id="ddManagedGmv">$0</div>
                            <div style="font-size: 0.85rem; color: var(--text-muted);" id="ddManagedCount">0 creators</div>
                            <div style="font-size: 0.85rem; color: var(--text-muted); margin-top: 4px;" id="ddManagedAvg">$0 avg</div>
                        </div>
                        <div style="text-align: center; padding: 20px; background: var(--bg-secondary); border-radius: 12px;">
                            <div style="font-size: 0.85rem; color: var(--text-muted); margin-bottom: 8px;">‚àí Unmanaged</div>
                            <div style="font-size: 1.8rem; font-weight: 700; color: var(--text-secondary);" id="ddUnmanagedGmv">$0</div>
                            <div style="font-size: 0.85rem; color: var(--text-muted);" id="ddUnmanagedCount">0 creators</div>
                            <div style="font-size: 0.85rem; color: var(--text-muted); margin-top: 4px;" id="ddUnmanagedAvg">$0 avg</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Product Breakdown -->
            <div class="card" style="margin-top: 24px;">
                <div class="card-header">
                    <div class="card-title"><span>üì¶</span> Product Breakdown</div>
                    <span style="font-size: 0.8rem; color: var(--text-muted);">Click a product to see creator breakdown</span>
                </div>
                <div class="card-body no-padding">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Product</th>
                                    <th style="text-align: right;">GMV</th>
                                    <th style="text-align: right;">% of Total</th>
                                    <th style="text-align: right;">Orders</th>
                                    <th style="text-align: right;">Videos</th>
                                    <th style="text-align: center;">Trend</th>
                                </tr>
                            </thead>
                            <tbody id="brandProductsBody">
                                <tr><td colspan="6" style="text-align: center; padding: 40px; color: var(--text-muted);">Loading products...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Creator x Product Drill-down (hidden by default) -->
            <div class="card" style="margin-top: 24px; display: none;" id="productCreatorDrilldown">
                <div class="card-header">
                    <div class="card-title"><span>üë•</span> <span id="drilldownProductName">Product</span> - Creator Breakdown</div>
                    <button class="btn btn-sm" onclick="closeProductDrilldown()">‚úï Close</button>
                </div>
                <div class="card-body no-padding">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Rank</th>
                                    <th>Creator</th>
                                    <th>Status</th>
                                    <th style="text-align: right;">GMV</th>
                                    <th style="text-align: right;">Orders</th>
                                    <th style="text-align: right;">Videos</th>
                                </tr>
                            </thead>
                            <tbody id="productCreatorsBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Top Creators for Brand -->
            <div class="card" style="margin-top: 24px;">
                <div class="card-header">
                    <div class="card-title"><span>üèÜ</span> Top 10 Creators</div>
                </div>
                <div class="card-body no-padding">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th style="width: 50px;">Rank</th>
                                    <th>Creator</th>
                                    <th>Status</th>
                                    <th>GMV</th>
                                    <th>Orders</th>
                                    <th>Videos</th>
                                    <th>AOV</th>
                                    <th>Commission</th>
                                </tr>
                            </thead>
                            <tbody id="brandTopCreatorsBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== CREATORS ==================== -->
        <div id="view-creators" class="view-section">
            <!-- Loading Overlay -->
            <div id="creators-loading" class="loading-overlay hidden">
                <div class="loading-spinner-container">
                    <div class="spinner-ring spinner-ring-pulse"></div>
                    <div class="spinner-ring spinner-ring-active"></div>
                    <div class="loading-icon">üë•</div>
                </div>
                <div class="loading-text">Loading creators...</div>
                <div class="loading-subtext">Building creator profiles</div>
                <div class="loading-dots">
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                </div>
            </div>
            <div class="header">
                <div>
                    <h1 class="header-title">Creators</h1>
                    <p class="header-subtitle">The lifeblood of your business - track, analyze, and grow your creator network</p>
                </div>
                <div class="header-actions">
                    <div class="view-toggle">
                        <button class="view-toggle-btn active" onclick="toggleCreatorsView('table')">üìã Table</button>
                        <button class="view-toggle-btn" onclick="toggleCreatorsView('leaderboard')">üèÜ Leaderboard</button>
                    </div>
                    <button class="btn btn-secondary" onclick="exportCreators()">üì• Export CSV</button>
                </div>
            </div>

            <!-- Leaderboard View -->
            <div id="creatorsLeaderboard" class="leaderboard-container">
                <div class="leaderboard-filters">
                    <button class="leaderboard-period-btn active" onclick="loadLeaderboard('week')">This Week</button>
                    <button class="leaderboard-period-btn" onclick="loadLeaderboard('month')">This Month</button>
                    <button class="leaderboard-period-btn" onclick="loadLeaderboard('quarter')">This Quarter</button>
                    <button class="leaderboard-period-btn" onclick="loadLeaderboard('alltime')">All Time</button>
                    <select id="leaderboardBrandFilter" class="filter-select" onchange="loadLeaderboard()" style="margin-left: auto;">
                        <option value="all">All Brands</option>
                        <option value="catakor">Cata-Kor</option>
                        <option value="jiyu">JiYu</option>
                        <option value="physicians_choice">Physicians Choice</option>
                        <option value="peach_slices">Peach Slices</option>
                        <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                    </select>
                    <button class="btn" onclick="downloadPodiumImage()" style="margin-left: 8px;" title="Download as PNG">
                        üì∏ PNG
                    </button>
                    <button class="btn btn-primary" onclick="downloadPodiumGif()" title="Download animated GIF for Discord">
                        üé¨ Animated GIF
                    </button>
                </div>
                
                <!-- Podium Card for Download -->
                <div id="podiumDownloadCard" style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%); border-radius: 16px; padding: 24px; margin-bottom: 24px;">
                    <!-- Header -->
                    <div style="text-align: center; margin-bottom: 20px;">
                        <div style="font-size: 1.5rem; font-weight: 800; color: #ffd700; text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);">üèÜ TOP CREATORS üèÜ</div>
                        <div id="podiumPeriodLabel" style="font-size: 0.9rem; color: #8b9dc3; margin-top: 4px;">This Week</div>
                    </div>
                    
                    <!-- Podium for Top 3 -->
                    <div class="leaderboard-podium" id="leaderboardPodium">
                        <div class="podium-place second">
                            <div class="podium-avatar">ü•à<div class="podium-rank">2</div></div>
                            <div class="podium-name">Loading...</div>
                            <div class="podium-gmv">--</div>
                            <div class="podium-brand">--</div>
                            <div class="podium-base">ü•à</div>
                        </div>
                        <div class="podium-place first">
                            <div class="podium-avatar">üëë<div class="podium-rank">1</div></div>
                            <div class="podium-name">Loading...</div>
                            <div class="podium-gmv">--</div>
                            <div class="podium-brand">--</div>
                            <div class="podium-base">üèÜ</div>
                        </div>
                        <div class="podium-place third">
                            <div class="podium-avatar">ü•â<div class="podium-rank">3</div></div>
                            <div class="podium-name">Loading...</div>
                            <div class="podium-gmv">--</div>
                            <div class="podium-brand">--</div>
                            <div class="podium-base">ü•â</div>
                        </div>
                    </div>
                    
                    <!-- Footer -->
                    <div style="text-align: center; margin-top: 16px; padding-top: 16px; border-top: 1px solid rgba(255,255,255,0.1);">
                        <div style="font-size: 0.75rem; color: #5c6f94;">Creators Corner ‚Ä¢ Keep crushing it! üí™</div>
                    </div>
                </div>
                
                <!-- Rest of Leaderboard -->
                <div class="leaderboard-list" id="leaderboardList">
                    <div style="padding: 40px; text-align: center; color: var(--text-muted);">
                        Loading leaderboard...
                    </div>
                </div>
            </div>

            <!-- Table View (existing) -->
            <div id="creatorsTable" class="table-container active">
            <div class="filters">
                <div class="filter-group">
                    <span class="filter-label">Brand</span>
                    <select id="creatorsBrandFilter" onchange="pages.creators = 1; loadCreatorsData();">
                        <option value="all">All Brands</option>
                        <option value="catakor">Cata-Kor</option>
                        <option value="jiyu">JiYu</option>
                        <option value="physicians_choice">Physicians Choice</option>
                        <option value="peach_slices">Peach Slices</option>
                        <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                    </select>
                </div>
                <div class="filter-group">
                    <span class="filter-label">Date Range</span>
                    <div style="display: flex; gap: 8px; align-items: center;">
                        <select id="creatorsDatePresetSelect" class="filter-select" style="min-width: 130px;">
                            <option value="yesterday">Yesterday</option>
                            <option value="last7" selected>Last 7 Days</option>
                            <option value="last14">Last 14 Days</option>
                            <option value="last30">Last 30 Days</option>
                            <option value="thisMonth">This Month</option>
                            <option value="lastMonth">Last Month</option>
                            <option value="custom">Custom Range</option>
                        </select>
                        <input type="text" class="date-range-input" id="creatorsDateRange" placeholder="Select dates" readonly style="width: 220px;">
                    </div>
                    <input type="hidden" id="creatorsDateFilterStart">
                    <input type="hidden" id="creatorsDateFilterEnd">
                </div>
                <div class="filter-group">
                    <span class="filter-label">Status</span>
                    <select id="creatorsStatusFilter" onchange="pages.creators = 1; loadCreatorsData();">
                        <option value="all">All Creators</option>
                        <option value="managed">Managed Only</option>
                        <option value="unmanaged">Unmanaged Only</option>
                    </select>
                </div>
                <div class="filter-group">
                    <span class="filter-label">Tier</span>
                    <select id="creatorsTierFilter" onchange="pages.creators = 1; loadCreatorsData();">
                        <option value="all">All Tiers</option>
                        <option value="ruby">Ruby ($200K+)</option>
                        <option value="diamond">Diamond ($100K+)</option>
                        <option value="platinum">Platinum ($50K+)</option>
                        <option value="gold">Gold ($20K+)</option>
                        <option value="silver">Silver ($5K+)</option>
                        <option value="bronze">Bronze ($2K+)</option>
                        <option value="new">New (< $2K)</option>
                    </select>
                </div>
                <div class="filter-group">
                    <span class="filter-label">Search</span>
                    <input type="text" class="search-input" placeholder="Search creators..." id="creatorsSearchInput" style="min-width: 150px;">
                </div>
            </div>

            <!-- Data Validation Status Banner -->
            <div id="creatorsValidationBanner" class="validation-banner" style="display: none; margin-bottom: 16px; padding: 12px 16px; border-radius: 8px; align-items: center; gap: 12px; font-size: 0.85rem;">
                <span id="creatorsValidationIcon">‚úÖ</span>
                <span id="creatorsValidationText">Data validated</span>
                <a href="#" onclick="switchView('datastatus'); switchDataStatusTab('validation'); return false;" style="margin-left: auto; font-size: 0.75rem; color: var(--accent);">View Details ‚Üí</a>
            </div>

            <!-- Summary Stats -->
            <div class="stats-grid">
                <div class="stat-card highlight">
                    <div class="stat-header"><div class="stat-icon yellow">üí∞</div></div>
                    <div class="stat-value" id="creatorsStatGmv">$0</div>
                    <div class="stat-label">Total GMV</div>
                    <div class="stat-change neutral" id="creatorsStatGmvChange">--</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header"><div class="stat-icon purple">üë•</div></div>
                    <div class="stat-value" id="creatorsStatTotal">0</div>
                    <div class="stat-label">Active Creators</div>
                    <div class="stat-change neutral" id="creatorsStatTotalChange">--</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header"><div class="stat-icon green">üìä</div></div>
                    <div class="stat-value" id="creatorsStatAvg">$0</div>
                    <div class="stat-label">Avg GMV/Creator</div>
                    <div class="stat-change neutral" id="creatorsStatAvgChange">--</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header"><div class="stat-icon orange">üíµ</div></div>
                    <div class="stat-value" id="creatorsStatCommission">$0</div>
                    <div class="stat-label">Est. Commission</div>
                    <div class="stat-change neutral" id="creatorsStatCommissionChange">--</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header"><div class="stat-icon teal">üìà</div></div>
                    <div class="stat-value" id="creatorsStatRising" style="color: var(--success);">0</div>
                    <div class="stat-label">Rising (‚Üë20%+)</div>
                    <div class="stat-meta" style="font-size: 0.7rem; color: var(--success); margin-top: 4px;">Hot momentum</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header"><div class="stat-icon red">‚ö†Ô∏è</div></div>
                    <div class="stat-value" id="creatorsStatDeclining" style="color: var(--error);">0</div>
                    <div class="stat-label">Declining (‚Üì20%+)</div>
                    <div class="stat-meta" style="font-size: 0.7rem; color: var(--error); margin-top: 4px;">Needs attention</div>
                </div>
            </div>

            <!-- Quick Insights -->
            <div class="grid-4" style="margin-bottom: 24px;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><span>üåü</span> Top Performers</div>
                    </div>
                    <div class="card-body no-padding" id="creatorsTopPerformers">
                        <div class="loading"><div class="spinner"></div> Loading...</div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><span>üìà</span> Rising Stars</div>
                    </div>
                    <div class="card-body no-padding" id="creatorsRisingStars">
                        <div class="loading"><div class="spinner"></div> Loading...</div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><span>‚ö†Ô∏è</span> Needs Attention</div>
                    </div>
                    <div class="card-body no-padding" id="creatorsNeedsAttention">
                        <div class="loading"><div class="spinner"></div> Loading...</div>
                    </div>
                </div>
                <div class="card" style="border: 1px solid var(--accent);">
                    <div class="card-header">
                        <div class="card-title"><span>üéØ</span> Recruit Opportunities</div>
                    </div>
                    <div class="card-body no-padding" id="creatorsRecruitOpportunities">
                        <div class="loading"><div class="spinner"></div> Loading...</div>
                    </div>
                </div>
            </div>

            <!-- Bulk Actions Bar -->
            <div id="bulkActionsBar" style="display: none; padding: 12px 16px; background: var(--accent-dim); border: 1px solid var(--accent); border-radius: 10px; margin-bottom: 16px; align-items: center; gap: 12px;">
                <span id="selectedCount" style="font-weight: 600;">0 selected</span>
                <button class="btn btn-secondary" onclick="bulkAddToRoster()" style="padding: 8px 12px;">‚ûï Add to Roster</button>
                <button class="btn btn-secondary" onclick="clearSelection()" style="padding: 8px 12px;">‚úó Clear</button>
            </div>

            <!-- Main Creator Table -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title"><span>üë•</span> All Creators</div>
                    <div style="font-size: 0.85rem; color: var(--text-muted);" id="creatorsTableCount">0 creators</div>
                </div>
                <div class="card-body no-padding">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th style="width: 40px;"><input type="checkbox" id="selectAllCreators" onchange="toggleSelectAll(this)"></th>
                                    <th>Creator</th>
                                    <th>Brand</th>
                                    <th>Status</th>
                                    <th>GMV</th>
                                    <th>vs Prior</th>
                                    <th>Orders</th>
                                    <th>AOV</th>
                                    <th>Videos</th>
                                    <th>Commission</th>
                                    <th>Tier</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="creatorsFullBody"></tbody>
                        </table>
                    </div>
                    <div class="pagination" id="creatorsPagination"></div>
                </div>
            </div>
            </div> <!-- End creatorsTable -->
        </div>

        <!-- ==================== VIDEOS ==================== -->
        <div id="view-videos" class="view-section">
            <!-- Loading Overlay -->
            <div id="videos-loading" class="loading-overlay hidden">
                <div class="loading-spinner-container">
                    <div class="spinner-ring spinner-ring-pulse"></div>
                    <div class="spinner-ring spinner-ring-active"></div>
                    <div class="loading-icon">üé¨</div>
                </div>
                <div class="loading-text">Loading videos...</div>
                <div class="loading-subtext">Scanning content library</div>
                <div class="loading-dots">
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                </div>
            </div>
            <div class="header">
                <div>
                    <h1 class="header-title">Videos</h1>
                    <p class="header-subtitle">Track video performance and identify your top content</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-secondary" onclick="exportVideos()">üì• Export CSV</button>
                </div>
            </div>

            <div class="filters">
                <div class="filter-group">
                    <span class="filter-label">Brand</span>
                    <select id="videosBrandFilter" onchange="pages.videos = 1; loadVideosData();">
                        <option value="all">All Brands</option>
                        <option value="catakor">Cata-Kor</option>
                        <option value="jiyu">JiYu</option>
                        <option value="physicians_choice">Physicians Choice</option>
                        <option value="peach_slices">Peach Slices</option>
                        <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                    </select>
                </div>
                <div class="filter-group">
                    <span class="filter-label">Date Range</span>
                    <div style="display: flex; gap: 8px; align-items: center;">
                        <select id="videosDatePresetSelect" class="filter-select" style="min-width: 130px;">
                            <option value="yesterday">Yesterday</option>
                            <option value="last7" selected>Last 7 Days</option>
                            <option value="last14">Last 14 Days</option>
                            <option value="last30">Last 30 Days</option>
                            <option value="thisMonth">This Month</option>
                            <option value="lastMonth">Last Month</option>
                            <option value="custom">Custom Range</option>
                        </select>
                        <input type="text" class="date-range-input" id="videosDateRange" placeholder="Select dates" readonly style="width: 220px;">
                    </div>
                    <input type="hidden" id="videosDateFilterStart">
                    <input type="hidden" id="videosDateFilterEnd">
                </div>
                <div class="filter-group">
                    <span class="filter-label">Status</span>
                    <select id="videosStatusFilter" onchange="pages.videos = 1; loadVideosData();">
                        <option value="all">All Creators</option>
                        <option value="managed">Managed Only</option>
                        <option value="unmanaged">Unmanaged Only</option>
                    </select>
                </div>
                <div class="filter-group">
                    <span class="filter-label">Search</span>
                    <input type="text" class="search-input" placeholder="Search videos or creators..." id="videosSearchInput" style="min-width: 180px;">
                </div>
            </div>

            <!-- Summary Stats -->
            <div class="stats-grid">
                <div class="stat-card highlight">
                    <div class="stat-header"><div class="stat-icon yellow">üí∞</div></div>
                    <div class="stat-value" id="videosStatGmv">$0</div>
                    <div class="stat-label">Total GMV</div>
                    <div class="stat-change neutral" id="videosStatGmvChange">--</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header"><div class="stat-icon blue">üé¨</div></div>
                    <div class="stat-value" id="videosStatTotal">0</div>
                    <div class="stat-label">Unique Videos</div>
                    <div class="stat-change neutral" id="videosStatTotalChange">--</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header"><div class="stat-icon purple">üë•</div></div>
                    <div class="stat-value" id="videosStatCreators">0</div>
                    <div class="stat-label">Creators</div>
                    <div class="stat-change neutral" id="videosStatCreatorsChange">--</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header"><div class="stat-icon green">üõí</div></div>
                    <div class="stat-value" id="videosStatOrders">0</div>
                    <div class="stat-label">Orders</div>
                    <div class="stat-change neutral" id="videosStatOrdersChange">--</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header"><div class="stat-icon orange">üìä</div></div>
                    <div class="stat-value" id="videosStatAvg">$0</div>
                    <div class="stat-label">Avg GMV/Video</div>
                    <div class="stat-change neutral" id="videosStatAvgChange">--</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header"><div class="stat-icon teal">üéØ</div></div>
                    <div class="stat-value" id="videosStatConversion">0%</div>
                    <div class="stat-label">Videos w/ Sales</div>
                    <div class="stat-change neutral" id="videosStatConversionChange">--</div>
                </div>
            </div>

            <!-- Quick Insights -->
            <div class="grid-3" style="margin-bottom: 24px;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><span>üèÜ</span> Top Performing Videos</div>
                    </div>
                    <div class="card-body no-padding" id="videosTopPerforming">
                        <div class="loading"><div class="spinner"></div> Loading...</div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><span>üåü</span> Top Creators by Video GMV</div>
                    </div>
                    <div class="card-body no-padding" id="videosTopCreators">
                        <div class="loading"><div class="spinner"></div> Loading...</div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><span>üìà</span> Most Efficient (GMV/Video)</div>
                    </div>
                    <div class="card-body no-padding" id="videosMostEfficient">
                        <div class="loading"><div class="spinner"></div> Loading...</div>
                    </div>
                </div>
            </div>

            <!-- Main Videos Table -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title"><span>üé¨</span> All Videos</div>
                    <div style="font-size: 0.85rem; color: var(--text-muted);" id="videosTableCount">0 videos</div>
                </div>
                <div class="card-body no-padding">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Video</th>
                                    <th>Creator</th>
                                    <th>Brand</th>
                                    <th>Product</th>
                                    <th>Status</th>
                                    <th>GMV</th>
                                    <th>Orders</th>
                                    <th>Items</th>
                                    <th>AOV</th>
                                </tr>
                            </thead>
                            <tbody id="videosBody"></tbody>
                        </table>
                    </div>
                    <div class="pagination" id="videosPagination"></div>
                </div>
            </div>
        </div>

        <!-- ==================== PRODUCTS ==================== -->
        <div id="view-products" class="view-section">
            <!-- Loading Overlay -->
            <div id="products-loading" class="loading-overlay hidden">
                <div class="loading-spinner-container">
                    <div class="spinner-ring spinner-ring-pulse"></div>
                    <div class="spinner-ring spinner-ring-active"></div>
                    <div class="loading-icon">üì¶</div>
                </div>
                <div class="loading-text">Loading products...</div>
                <div class="loading-subtext">Analyzing product performance</div>
                <div class="loading-dots">
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                </div>
            </div>
            <div class="header">
                <div>
                    <h1 class="header-title">Products</h1>
                    <p class="header-subtitle">Track product performance across all sales channels</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-secondary" onclick="exportProducts()">üì• Export CSV</button>
                </div>
            </div>

            <div class="filters">
                <div class="filter-group">
                    <span class="filter-label">Brand</span>
                    <select id="productsBrandFilter" onchange="pages.products = 1; loadProductsData();">
                        <option value="all">All Brands</option>
                        <option value="catakor">Cata-Kor</option>
                        <option value="jiyu">JiYu</option>
                        <option value="physicians_choice">Physicians Choice</option>
                        <option value="peach_slices">Peach Slices</option>
                        <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                    </select>
                </div>
                <div class="filter-group">
                    <span class="filter-label">Date Range</span>
                    <div style="display: flex; gap: 8px; align-items: center;">
                        <select id="productsDatePresetSelect" class="filter-select" style="min-width: 130px;">
                            <option value="yesterday">Yesterday</option>
                            <option value="last7" selected>Last 7 Days</option>
                            <option value="last14">Last 14 Days</option>
                            <option value="last30">Last 30 Days</option>
                            <option value="thisMonth">This Month</option>
                            <option value="lastMonth">Last Month</option>
                            <option value="custom">Custom Range</option>
                        </select>
                        <input type="text" class="date-range-input" id="productsDateRange" placeholder="Select dates" readonly style="width: 220px;">
                    </div>
                    <input type="hidden" id="productsDateFilterStart">
                    <input type="hidden" id="productsDateFilterEnd">
                </div>
                <div class="filter-group">
                    <span class="filter-label">Search</span>
                    <input type="text" class="search-input" placeholder="Search products..." id="productsSearchInput" style="min-width: 180px;">
                </div>
            </div>

            <!-- Summary Stats -->
            <div class="stats-grid">
                <div class="stat-card highlight">
                    <div class="stat-header"><div class="stat-icon yellow">üí∞</div></div>
                    <div class="stat-value" id="productsStatGmv">$0</div>
                    <div class="stat-label">Total GMV</div>
                    <div class="stat-change neutral" id="productsStatGmvChange">--</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header"><div class="stat-icon purple">üì¶</div></div>
                    <div class="stat-value" id="productsStatTotal">0</div>
                    <div class="stat-label">Products</div>
                    <div class="stat-change neutral" id="productsStatTotalChange">--</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header"><div class="stat-icon green">üõí</div></div>
                    <div class="stat-value" id="productsStatOrders">0</div>
                    <div class="stat-label">Orders</div>
                    <div class="stat-change neutral" id="productsStatOrdersChange">--</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header"><div class="stat-icon blue">üìä</div></div>
                    <div class="stat-value" id="productsStatItems">0</div>
                    <div class="stat-label">Items Sold</div>
                    <div class="stat-change neutral" id="productsStatItemsChange">--</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header"><div class="stat-icon orange">üé¨</div></div>
                    <div class="stat-value" id="productsStatVideoGmv">$0</div>
                    <div class="stat-label">Video GMV</div>
                    <div class="stat-meta" id="productsStatVideoPct" style="font-size: 0.75rem; color: var(--accent); margin-top: 4px;">--% of total</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header"><div class="stat-icon red">üì∫</div></div>
                    <div class="stat-value" id="productsStatLiveGmv">$0</div>
                    <div class="stat-label">LIVE GMV</div>
                    <div class="stat-meta" id="productsStatLivePct" style="font-size: 0.75rem; color: var(--info); margin-top: 4px;">--% of total</div>
                </div>
            </div>

            <!-- Insights Row -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 24px;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><span>üèÜ</span> Top Products</div>
                    </div>
                    <div class="card-body no-padding" id="productsTopList">
                        <div class="loading"><div class="spinner"></div> Loading...</div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><span>üìä</span> Sales by Channel</div>
                    </div>
                    <div class="card-body" style="height: 220px;">
                        <canvas id="productsChannelChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Main Products Table -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title"><span>üì¶</span> All Products</div>
                    <div style="font-size: 0.85rem; color: var(--text-muted);" id="productsTableCount">0 products</div>
                </div>
                <div class="card-body no-padding">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Product</th>
                                    <th>Brand</th>
                                    <th>Status</th>
                                    <th>GMV</th>
                                    <th>Orders</th>
                                    <th>Items</th>
                                    <th>Video GMV</th>
                                    <th>LIVE GMV</th>
                                    <th>Shop GMV</th>
                                </tr>
                            </thead>
                            <tbody id="productsBody"></tbody>
                        </table>
                    </div>
                    <div class="pagination" id="productsPagination"></div>
                </div>
            </div>
        </div>

        <!-- ==================== ROSTER ==================== -->
        <div id="view-roster" class="view-section">
            <!-- Loading Overlay -->
            <div id="roster-loading" class="loading-overlay hidden">
                <div class="loading-spinner-container">
                    <div class="spinner-ring spinner-ring-pulse"></div>
                    <div class="spinner-ring spinner-ring-active"></div>
                    <div class="loading-icon">üìã</div>
                </div>
                <div class="loading-text">Loading roster...</div>
                <div class="loading-subtext">Fetching creator roster</div>
                <div class="loading-dots">
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                </div>
            </div>
            <div class="header" style="flex-wrap: wrap; gap: 16px;">
                <div style="flex: 1; min-width: 200px;">
                    <h1 class="header-title">üìã Creator Roster</h1>
                    <p class="header-subtitle">Your managed creators</p>
                </div>
                <div class="header-actions" style="display: flex; gap: 8px; align-items: center; flex-wrap: wrap;">
                    <!-- View Toggle -->
                    <div class="view-toggle" style="display: flex; background: var(--bg-secondary); border-radius: 8px; padding: 3px; border: 1px solid var(--border);">
                        <button id="rosterViewIdentity" class="view-toggle-btn active" onclick="setRosterView('identity')" title="Group by creator" style="padding: 6px 12px; border: none; background: var(--bg-card); border-radius: 6px; cursor: pointer; font-size: 0.8rem; font-weight: 600; color: var(--text-primary); transition: all 0.15s;">
                            üë§ Identity
                        </button>
                        <button id="rosterViewEntries" class="view-toggle-btn" onclick="setRosterView('entries')" title="Show all entries" style="padding: 6px 12px; border: none; background: transparent; border-radius: 6px; cursor: pointer; font-size: 0.8rem; font-weight: 500; color: var(--text-muted); transition: all 0.15s;">
                            üìã Entries
                        </button>
                    </div>
                    <button class="btn" onclick="exportRoster()" style="padding: 8px 12px;">üì• Export</button>
                    <button class="btn btn-primary" onclick="openAddCreatorModal()" style="padding: 8px 16px;">‚ûï Add Creator</button>
                </div>
            </div>

            <!-- Compact Filter Bar -->
            <div class="filters" style="display: flex; gap: 12px; flex-wrap: wrap; align-items: center; padding: 12px 16px; background: var(--bg-secondary); border-radius: 10px; margin-bottom: 20px;">
                <select id="rosterBrandFilter" onchange="onRosterBrandFilterChange();" class="filter-select" style="min-width: 130px;">
                    <option value="all">All Brands</option>
                    <option value="catakor">Cata-Kor</option>
                    <option value="jiyu">JiYu</option>
                    <option value="physicians_choice">Physicians Choice</option>
                    <option value="peach_slices">Peach Slices</option>
                    <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                </select>
                <select id="rosterProductFilter" onchange="pages.roster = 1; loadRosterData();" class="filter-select" style="min-width: 140px;">
                    <option value="all">All Products</option>
                </select>
                <select id="rosterDatePresetSelect" class="filter-select" style="min-width: 130px;">
                    <option value="yesterday">Yesterday</option>
                    <option value="last7" selected>Last 7 Days</option>
                    <option value="last14">Last 14 Days</option>
                    <option value="last30">Last 30 Days</option>
                    <option value="thisMonth">This Month</option>
                    <option value="lastMonth">Last Month</option>
                    <option value="custom">Custom Range</option>
                </select>
                <input type="text" class="date-range-input" id="rosterDateRange" placeholder="Select dates" readonly style="width: 200px; display: none;">
                <input type="hidden" id="rosterDateFilterStart">
                <input type="hidden" id="rosterDateFilterEnd">
                <select id="rosterStatusFilter" onchange="pages.roster = 1; loadRosterData();" class="filter-select" style="min-width: 120px;">
                    <option value="all" selected>All Statuses</option>
                    <option value="Active">Active</option>
                    <option value="Applied">Applied</option>
                    <option value="Pending">Pending</option>
                    <option value="On Hold">On Hold</option>
                    <option value="Churned">Churned</option>
                </select>
                <select id="rosterQuickFilter" onchange="pages.roster = 1; loadRosterData();" class="filter-select" style="min-width: 160px;">
                    <option value="all">All Creators</option>
                    <option value="top_performers">üåü Top Performers</option>
                    <option value="at_risk">‚ö†Ô∏è At Risk</option>
                    <option value="has_retainer">üíµ Has Retainer</option>
                    <option value="has_product">üì¶ Has Product</option>
                    <option value="multi_brand">üîó Multi-Brand</option>
                    <option value="new_creators">üÜï New (< 30 days)</option>
                    <option value="missing_data">‚ùå Missing Data</option>
                </select>
                <div style="flex: 1;"></div>
                <input type="text" class="search-input" placeholder="üîç Search creators..." id="rosterSearchInput" style="min-width: 180px; padding: 8px 12px; background: var(--bg-card); border: 1px solid var(--border); border-radius: 6px; color: var(--text-primary);">
            </div>

            <!-- Summary Stats - More Compact -->
            <div class="stats-grid" style="grid-template-columns: repeat(6, 1fr); gap: 12px; margin-bottom: 20px;">
                <div class="stat-card highlight" style="padding: 16px;">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <div class="stat-icon yellow" style="width: 36px; height: 36px; font-size: 1.1rem;">üí∞</div>
                        <div>
                            <div class="stat-value" id="rosterStatGmv" style="font-size: 1.4rem;">$0</div>
                            <div class="stat-label" style="font-size: 0.75rem;">Roster GMV</div>
                        </div>
                    </div>
                </div>
                <div class="stat-card" style="padding: 16px;">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <div class="stat-icon purple" style="width: 36px; height: 36px; font-size: 1.1rem;">üë§</div>
                        <div>
                            <div class="stat-value" id="rosterStatUniqueCreators" style="font-size: 1.4rem;">0</div>
                            <div class="stat-label" style="font-size: 0.75rem;">Creators</div>
                        </div>
                    </div>
                    <div class="stat-subtext" id="rosterStatEntriesCount" style="font-size: 0.65rem; color: var(--text-muted); margin-top: 4px;">0 entries</div>
                </div>
                <div class="stat-card" style="padding: 16px;">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <div class="stat-icon green" style="width: 36px; height: 36px; font-size: 1.1rem;">‚úÖ</div>
                        <div>
                            <div class="stat-value" id="rosterStatActive" style="font-size: 1.4rem; color: var(--success);">0</div>
                            <div class="stat-label" style="font-size: 0.75rem;">Active</div>
                        </div>
                    </div>
                    <div class="stat-subtext" id="rosterStatChurned" style="font-size: 0.65rem; color: var(--error); margin-top: 4px;">0 churned</div>
                </div>
                <div class="stat-card" style="padding: 16px;">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <div class="stat-icon blue" style="width: 36px; height: 36px; font-size: 1.1rem;">üìä</div>
                        <div>
                            <div class="stat-value" id="rosterStatAvgGmv" style="font-size: 1.4rem;">$0</div>
                            <div class="stat-label" style="font-size: 0.75rem;">Avg/Creator</div>
                        </div>
                    </div>
                </div>
                <div class="stat-card" style="padding: 16px;">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <div class="stat-icon orange" style="width: 36px; height: 36px; font-size: 1.1rem;">üîó</div>
                        <div>
                            <div class="stat-value" id="rosterStatMultiBrand" style="font-size: 1.4rem;">0</div>
                            <div class="stat-label" style="font-size: 0.75rem;">Multi-Brand</div>
                        </div>
                    </div>
                </div>
                <div class="stat-card" style="padding: 16px;">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <div class="stat-icon teal" style="width: 36px; height: 36px; font-size: 1.1rem;">üíµ</div>
                        <div>
                            <div class="stat-value" id="rosterStatRetainer" style="font-size: 1.4rem;">$0</div>
                            <div class="stat-label" style="font-size: 0.75rem;">Retainers/mo</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Data Health Check (hidden when no issues) -->
            <div id="rosterHealthCheck" class="card" style="margin-bottom: 24px; display: none; border-left: 4px solid var(--warning);">
                <div class="card-header" style="padding: 12px 16px;">
                    <div class="card-title"><span>ü©∫</span> Roster Data Health</div>
                    <div style="display: flex; gap: 8px;">
                        <button class="btn btn-primary" onclick="openSmartMatchModal()" style="font-size: 0.8rem; padding: 4px 12px;">
                            üîó Smart Match
                        </button>
                        <button class="btn btn-secondary" onclick="toggleRosterHealthDetails()" style="font-size: 0.8rem; padding: 4px 12px;">
                            <span id="rosterHealthToggleText">Show Details</span>
                        </button>
                    </div>
                </div>
                <div class="card-body" style="padding: 12px 16px;">
                    <!-- Health Summary -->
                    <div id="rosterHealthSummary" style="display: flex; gap: 24px; flex-wrap: wrap;">
                        <div id="healthMissingDiscord" style="display: none; padding: 8px 16px; background: var(--warning-dim); border-radius: 8px; cursor: pointer;" onclick="openSmartMatchModal(); switchSmartMatchTab('missingDiscord');">
                            <span style="font-size: 1.2rem;">‚ö†Ô∏è</span>
                            <span id="healthMissingDiscordCount">0</span>&nbsp;creators missing Discord
                        </div>
                        <div id="healthMissingTikTok" style="display: none; padding: 8px 16px; background: var(--danger-dim); border-radius: 8px; cursor: pointer;" onclick="openSmartMatchModal(); switchSmartMatchTab('missingTikTok');">
                            <span style="font-size: 1.2rem;">üö®</span>
                            <span id="healthMissingTikTokCount">0</span>&nbsp;creators missing TikTok
                        </div>
                        <div id="healthMissingName" style="display: none; padding: 8px 16px; background: var(--purple-dim); border-radius: 8px; cursor: pointer;" onclick="openSmartMatchModal(); switchSmartMatchTab('missingName');">
                            <span style="font-size: 1.2rem;">üë§</span>
                            <span id="healthMissingNameCount">0</span>&nbsp;creators missing name
                        </div>
                        <div id="healthMissingDiscordId" style="display: none; padding: 8px 16px; background: var(--purple-dim); border-radius: 8px; cursor: pointer;" onclick="toggleHealthDetails()">
                            <span style="font-size: 1.2rem;">üîë</span>
                            <span id="healthMissingDiscordIdCount">0</span>&nbsp;missing Discord ID
                        </div>
                        <div id="healthDuplicates" style="display: none; padding: 8px 16px; background: var(--info-dim); border-radius: 8px; cursor: pointer;" onclick="openSmartMatchModal(); switchSmartMatchTab('duplicates');">
                            <span style="font-size: 1.2rem;">üë•</span>
                            <span id="healthDuplicatesCount">0</span>&nbsp;potential duplicates
                        </div>
                        <div id="healthSameBrandDupes" style="display: none; padding: 8px 16px; background: var(--purple-dim); border-radius: 8px; cursor: pointer;" onclick="openMergeEntriesModal()">
                            <span style="font-size: 1.2rem;">üîÄ</span>
                            <span id="healthSameBrandDupesCount">0</span>&nbsp;need merging
                        </div>
                        <div id="healthOrphanedPerf" style="display: none; padding: 8px 16px; background: var(--accent-dim); border-radius: 8px; cursor: pointer;" onclick="showOrphanedDataModal()">
                            <span style="font-size: 1.2rem;">üìä</span>
                            <span id="healthOrphanedPerfCount">0</span>&nbsp;unlinked performance
                        </div>
                    </div>
                    
                    <!-- Health Details (collapsed by default) -->
                    <div id="rosterHealthDetails" style="display: none; margin-top: 16px;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 16px;">
                            <!-- Missing Discord List -->
                            <div id="healthMissingDiscordList" style="display: none;">
                                <div style="font-weight: 600; margin-bottom: 8px; color: var(--warning);">‚ö†Ô∏è Missing Discord Name</div>
                                <div id="healthMissingDiscordItems" style="max-height: 200px; overflow-y: auto;"></div>
                            </div>
                            
                            <!-- Missing Discord ID List -->
                            <div id="healthMissingDiscordIdList" style="display: none;">
                                <div style="font-weight: 600; margin-bottom: 8px; color: var(--purple);">üîë Missing Discord ID</div>
                                <div style="font-size: 0.8rem; color: var(--text-muted); margin-bottom: 8px;">These creators won't be matched when they log into the Creator Portal</div>
                                <div id="healthMissingDiscordIdItems" style="max-height: 200px; overflow-y: auto;"></div>
                            </div>
                            
                            <!-- Missing TikTok List -->
                            <div id="healthMissingTikTokList" style="display: none;">
                                <div style="font-weight: 600; margin-bottom: 8px; color: var(--danger);">üö® Missing TikTok</div>
                                <div id="healthMissingTikTokItems" style="max-height: 200px; overflow-y: auto;"></div>
                            </div>
                            
                            <!-- Missing Name List -->
                            <div id="healthMissingNameList" style="display: none;">
                                <div style="font-weight: 600; margin-bottom: 8px; color: var(--purple);">üë§ Missing Name</div>
                                <div id="healthMissingNameItems" style="max-height: 200px; overflow-y: auto;"></div>
                            </div>
                            
                            <!-- Duplicates List -->
                            <div id="healthDuplicatesList" style="display: none;">
                                <div style="font-weight: 600; margin-bottom: 8px; color: var(--info);">üë• Potential Duplicates</div>
                                <div id="healthDuplicatesItems" style="max-height: 200px; overflow-y: auto;"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Data Integrity Stats -->
                    <div id="dataIntegrityStats" style="margin-top: 16px; padding: 16px; background: var(--bg-secondary); border-radius: 10px;">
                        <div style="font-weight: 600; margin-bottom: 12px; display: flex; align-items: center; gap: 8px;">
                            <span>üìä</span> Data Integrity
                            <button class="btn btn-small" onclick="runDataIntegrityCheck()" style="margin-left: auto; padding: 4px 12px; font-size: 0.75rem;">üîÑ Refresh</button>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 12px;">
                            <div style="text-align: center; padding: 12px; background: var(--bg-card); border-radius: 8px;">
                                <div style="font-size: 1.5rem; font-weight: 700; color: var(--success);" id="integrityLinkedPct">--%</div>
                                <div style="font-size: 0.75rem; color: var(--text-muted);">Performance Linked</div>
                            </div>
                            <div style="text-align: center; padding: 12px; background: var(--bg-card); border-radius: 8px;">
                                <div style="font-size: 1.5rem; font-weight: 700; color: var(--info);" id="integrityDiscordIdPct">--%</div>
                                <div style="font-size: 0.75rem; color: var(--text-muted);">Have Discord ID</div>
                            </div>
                            <div style="text-align: center; padding: 12px; background: var(--bg-card); border-radius: 8px;">
                                <div style="font-size: 1.5rem; font-weight: 700; color: var(--accent);" id="integrityTikTokAccounts">--</div>
                                <div style="font-size: 0.75rem; color: var(--text-muted);">TikTok Accounts</div>
                            </div>
                            <div style="text-align: center; padding: 12px; background: var(--bg-card); border-radius: 8px;">
                                <div style="font-size: 1.5rem; font-weight: 700;" id="integrityOrphaned">--</div>
                                <div style="font-size: 0.75rem; color: var(--text-muted);">Orphaned Records</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Insights -->
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 24px;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><span>üåü</span> Top Performers</div>
                    </div>
                    <div class="card-body no-padding" id="rosterTopPerformers">
                        <div class="loading"><div class="spinner"></div> Loading...</div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><span>‚ö†Ô∏è</span> Needs Attention</div>
                    </div>
                    <div class="card-body no-padding" id="rosterNeedsAttention">
                        <div class="loading"><div class="spinner"></div> Loading...</div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><span>üìÖ</span> Follow-ups Due</div>
                    </div>
                    <div class="card-body no-padding" id="rosterFollowups">
                        <div class="loading"><div class="spinner"></div> Loading...</div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><span>üìã</span> Applications</div>
                    </div>
                    <div class="card-body" id="rosterApplications">
                        <div class="loading"><div class="spinner"></div> Loading...</div>
                    </div>
                </div>
            </div>

            <!-- Main Roster Table -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <span>üë•</span> 
                        <span id="rosterTableTitle">All Creators</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 16px;">
                        <div style="font-size: 0.85rem; color: var(--text-muted);" id="rosterTableCount">0 creators</div>
                    </div>
                </div>
                
                <!-- Bulk Actions Bar -->
                <div class="bulk-actions-bar" id="rosterBulkActions">
                    <span class="bulk-select-count"><span id="rosterSelectedCount">0</span> selected</span>
                    <div class="bulk-actions-buttons">
                        <button class="bulk-btn" onclick="bulkUpdateRosterStatus('Active')">‚úÖ Set Active</button>
                        <button class="bulk-btn" onclick="bulkUpdateRosterStatus('On Hold')">‚è∏Ô∏è Set On Hold</button>
                        <button class="bulk-btn" onclick="bulkExportRoster()">üì• Export</button>
                        <button class="bulk-btn danger" onclick="bulkRemoveFromRoster()">üóëÔ∏è Remove</button>
                        <button class="bulk-btn" onclick="clearRosterSelection()">‚úï Clear</button>
                    </div>
                </div>
                
                <div class="card-body no-padding">
                    <div class="table-container">
                        <table>
                            <thead id="rosterTableHead">
                                <!-- Dynamic headers based on view mode -->
                            </thead>
                            <tbody id="rosterBody"></tbody>
                        </table>
                    </div>
                    <div class="pagination" id="rosterPagination"></div>
                </div>
            </div>
        </div>

        <!-- ==================== GOALS ==================== -->
        <div id="view-goals" class="view-section">
            <div class="header">
                <div>
                    <h1 class="header-title">Goals</h1>
                    <p class="header-subtitle">Track GMV targets and progress</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-primary" onclick="openGoalModal()">‚ûï Set Goal</button>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card highlight">
                    <div class="stat-header"><div class="stat-icon yellow">üéØ</div></div>
                    <div class="stat-value" id="goalsTarget">$0</div>
                    <div class="stat-label">Monthly Target</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header"><div class="stat-icon green">üìà</div></div>
                    <div class="stat-value" id="goalsCurrent">$0</div>
                    <div class="stat-label">Current GMV</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header"><div class="stat-icon blue">üìä</div></div>
                    <div class="stat-value" id="goalsProgress">0%</div>
                    <div class="stat-label">Progress</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header"><div class="stat-icon purple">üìÖ</div></div>
                    <div class="stat-value" id="goalsDaysLeft">0</div>
                    <div class="stat-label">Days Left</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title"><span>üéØ</span> Active Goals</div>
                </div>
                <div class="card-body" id="goalsBody">
                    <div class="empty-state">
                        <div class="icon">üéØ</div>
                        <h3>No goals set</h3>
                        <p>Click "Set Goal" to create your first target</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== ALERTS ==================== -->
        <div id="view-alerts" class="view-section">
            <div class="header">
                <div>
                    <h1 class="header-title">Alerts</h1>
                    <p class="header-subtitle">Performance notifications and warnings</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-secondary" onclick="markAllAlertsRead()">‚úì Mark All Read</button>
                </div>
            </div>

            <div class="card">
                <div class="card-body no-padding" id="alertsBody">
                    <div class="empty-state">
                        <div class="icon">üîî</div>
                        <h3>No alerts</h3>
                        <p>Alerts will appear when there are significant changes in creator performance</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== COMMISSION CALCULATOR ==================== -->
        <div id="view-calculator" class="view-section">
            <div class="header">
                <div>
                    <h1 class="header-title">üßÆ Earnings Calculator</h1>
                    <p class="header-subtitle">Tyler & Matt's monthly earnings (commission + retainers)</p>
                </div>
                <div class="header-actions">
                    <select id="revShareMonth" class="filter-select" onchange="calculateRevenueShare()">
                        <!-- Populated by JS -->
                    </select>
                    <button class="btn btn-primary" onclick="calculateRevenueShare()">üîÑ Calculate</button>
                    <button class="btn btn-secondary" onclick="exportEarningsSummary()">üì• Export CSV</button>
                    <button class="btn btn-secondary" onclick="openInvoiceModal()">üìÑ Generate Invoices</button>
                </div>
            </div>

            <!-- Goal Tracker -->
            <div class="card" style="margin-bottom: 24px; background: linear-gradient(135deg, rgba(245, 197, 24, 0.1), var(--bg-card)); border: 1px solid rgba(245, 197, 24, 0.2);">
                <div class="card-body" style="padding: 24px;">
                    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <span style="font-size: 2rem;">üéØ</span>
                            <div>
                                <div style="font-weight: 700; font-size: 1.1rem; color: var(--text-primary);">Monthly Earnings Goal</div>
                                <div style="font-size: 0.85rem; color: var(--text-muted);">Combined commission + retainers</div>
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 1.75rem; font-weight: 700;">
                                <span id="goalCurrentAmount" style="color: var(--success);">$0</span>
                                <span style="color: var(--text-muted); font-size: 1rem;"> / $100,000</span>
                            </div>
                            <div id="goalPercentText" style="font-size: 0.85rem; color: var(--text-muted);">0% complete</div>
                        </div>
                    </div>
                    <!-- Progress Bar -->
                    <div style="background: var(--bg-secondary); border-radius: 12px; height: 24px; overflow: hidden; position: relative;">
                        <div id="goalProgressBar" style="background: linear-gradient(90deg, var(--success), #4ade80); height: 100%; width: 0%; transition: width 0.5s ease; border-radius: 12px;"></div>
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 0.75rem; font-weight: 600; color: var(--text-primary);">
                            <span id="goalProgressText">$0 to go</span>
                        </div>
                    </div>
                    <!-- Milestones -->
                    <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 0.7rem; color: var(--text-muted);">
                        <span>$0</span>
                        <span>$25K</span>
                        <span>$50K</span>
                        <span>$75K</span>
                        <span>$100K üèÜ</span>
                    </div>
                </div>
            </div>

            <!-- Total Summary -->
            <div class="card" style="margin-bottom: 24px; background: linear-gradient(135deg, var(--bg-card), var(--bg-secondary));">
                <div class="card-body" style="padding: 24px;">
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 24px; text-align: center; margin-bottom: 20px;">
                        <div>
                            <div style="font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px;">Total GMV</div>
                            <div id="revTotalGmv" style="font-size: 2rem; font-weight: 700; color: var(--accent);">$0</div>
                        </div>
                        <div>
                            <div style="font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px;">Commission</div>
                            <div id="revTotalShare" style="font-size: 2rem; font-weight: 700; color: var(--success);">$0</div>
                        </div>
                        <div>
                            <div style="font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px;">Retainers</div>
                            <div id="revTotalRetainers" style="font-size: 2rem; font-weight: 700; color: var(--warning);">$0</div>
                        </div>
                        <div>
                            <div style="font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px;">Launch Fees</div>
                            <div id="revTotalLaunchFees" style="font-size: 2rem; font-weight: 700; color: var(--info);">$0</div>
                        </div>
                    </div>
                    <div style="border-top: 1px solid var(--border); padding-top: 20px;">
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; text-align: center;">
                            <div style="background: var(--success-dim); padding: 16px; border-radius: 12px;">
                                <div style="font-size: 0.75rem; color: var(--success); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px;">Total Earnings</div>
                                <div id="revTotalEarnings" style="font-size: 2rem; font-weight: 700; color: var(--success);">$0</div>
                            </div>
                            <div style="background: var(--blue-dim); padding: 16px; border-radius: 12px;">
                                <div style="font-size: 0.75rem; color: var(--blue); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px;">Tyler (50%)</div>
                                <div id="revTylerShare" style="font-size: 2rem; font-weight: 700; color: var(--blue);">$0</div>
                            </div>
                            <div style="background: var(--purple-dim); padding: 16px; border-radius: 12px;">
                                <div style="font-size: 0.75rem; color: var(--purple); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px;">Matt (50%)</div>
                                <div id="revMattShare" style="font-size: 2rem; font-weight: 700; color: var(--purple);">$0</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Brand Breakdown -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title"><span>üìä</span> Brand Breakdown</div>
                    <span style="font-size: 0.8rem; color: var(--text-muted);">Click values to edit</span>
                </div>
                <div class="card-body no-padding">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Brand</th>
                                    <th style="text-align: right;">Affiliate GMV</th>
                                    <th style="text-align: right;">Marketing GMV</th>
                                    <th style="text-align: right;">Total GMV</th>
                                    <th style="text-align: center;">Commission %</th>
                                    <th style="text-align: right;">Commission</th>
                                    <th style="text-align: center;">Base Retainer</th>
                                    <th style="text-align: center;">Launch Fee</th>
                                    <th style="text-align: right;">Total</th>
                                    <th style="text-align: right; color: var(--blue);">Tyler</th>
                                    <th style="text-align: right; color: var(--purple);">Matt</th>
                                </tr>
                            </thead>
                            <tbody id="revShareBody">
                                <tr><td colspan="11" style="text-align: center; padding: 40px; color: var(--text-muted);">Select a month and click Calculate</td></tr>
                            </tbody>
                            <tfoot id="revShareFooter" style="display: none;">
                                <tr style="background: var(--bg-secondary); font-weight: 600;">
                                    <td>TOTAL</td>
                                    <td id="footerAffiliateGmv" style="text-align: right;"></td>
                                    <td id="footerMarketingGmv" style="text-align: right; color: var(--purple);"></td>
                                    <td id="footerGmv" style="text-align: right;"></td>
                                    <td></td>
                                    <td id="footerCommission" style="text-align: right; color: var(--success);"></td>
                                    <td id="footerRetainer" style="text-align: right; color: var(--warning);"></td>
                                    <td id="footerLaunchFee" style="text-align: right; color: var(--info);"></td>
                                    <td id="footerTotal" style="text-align: right; font-weight: 700; color: var(--success);"></td>
                                    <td id="footerTyler" style="text-align: right; color: var(--blue);"></td>
                                    <td id="footerMatt" style="text-align: right; color: var(--purple);"></td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Creator Breakdown by Brand -->
            <div class="card" style="margin-top: 24px;">
                <div class="card-header">
                    <div class="card-title"><span>üë•</span> Creator Breakdown</div>
                    <div style="display: flex; gap: 12px; align-items: center;">
                        <select id="creatorBreakdownBrand" class="filter-select" onchange="renderCreatorBreakdown()">
                            <option value="all">All Brands</option>
                            <option value="catakor">Cata-Kor</option>
                            <option value="jiyu">JiYu</option>
                            <option value="physicians_choice">Physicians Choice</option>
                            <option value="peach_slices">Peach Slices</option>
                            <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                        </select>
                        <button class="btn btn-secondary" onclick="exportCreatorBreakdownCSV()">üì• Export CSV</button>
                    </div>
                </div>
                
                <!-- Custom Rate Notice -->
                <div id="customRateNotice" style="display: none; margin: 16px 16px 0; padding: 12px 16px; background: var(--accent-dim); border-radius: 8px; font-size: 0.85rem;">
                    <strong>‚ö†Ô∏è Custom Rates:</strong> <span id="customRateCount">0</span> creator(s) have adjusted commission rates. 
                    <span style="color: var(--text-muted);">Click rate badge to modify.</span>
                </div>
                
                <!-- Summary Stats -->
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; padding: 16px;">
                    <div style="background: var(--bg-secondary); padding: 12px 16px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 4px;">Creators</div>
                        <div id="cbCreatorCount" style="font-size: 1.25rem; font-weight: 700;">0</div>
                    </div>
                    <div style="background: var(--bg-secondary); padding: 12px 16px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 4px;">Total GMV</div>
                        <div id="cbTotalGmv" style="font-size: 1.25rem; font-weight: 700; color: var(--accent);">$0</div>
                    </div>
                    <div style="background: var(--bg-secondary); padding: 12px 16px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 4px;">Avg Rate</div>
                        <div id="cbAvgRate" style="font-size: 1.25rem; font-weight: 700;">2.0%</div>
                    </div>
                    <div style="background: var(--bg-secondary); padding: 12px 16px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 4px;">Total Commission</div>
                        <div id="cbTotalCommission" style="font-size: 1.25rem; font-weight: 700; color: var(--success);">$0</div>
                    </div>
                </div>
                
                <div class="card-body no-padding">
                    <div class="table-container" style="max-height: 500px; overflow-y: auto;">
                        <table>
                            <thead style="position: sticky; top: 0; background: var(--bg-card); z-index: 1;">
                                <tr>
                                    <th style="width: 40px;">#</th>
                                    <th>Creator</th>
                                    <th>Brand</th>
                                    <th style="text-align: right;">GMV</th>
                                    <th style="text-align: right;">Orders</th>
                                    <th style="text-align: center;">Rate</th>
                                    <th style="text-align: right;">Commission</th>
                                    <th style="text-align: right;">% of Total</th>
                                </tr>
                            </thead>
                            <tbody id="creatorBreakdownBody">
                                <tr><td colspan="8" style="text-align: center; padding: 40px; color: var(--text-muted);">Calculate earnings to see creator breakdown</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Info Card -->
            <div style="margin-top: 16px; padding: 16px; background: var(--bg-secondary); border-radius: 12px; border: 1px solid var(--border-light);">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <span style="font-size: 1.5rem;">üí°</span>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">
                        <strong>Affiliate GMV</strong> = managed creators from TikTok affiliate data. 
                        <strong>Marketing GMV</strong> = manual entry for marketing accounts (saved per month). 
                        Commission rates and retainers are saved to the database and persist across sessions.
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== SETTINGS ==================== -->
        <div id="view-settings" class="view-section">
            <div class="header">
                <div>
                    <h1 class="header-title">‚öôÔ∏è Settings</h1>
                    <p class="header-subtitle">Configure integrations, products, notifications, and more</p>
                </div>
            </div>

            <!-- Settings Navigation Tabs -->
            <div style="display: flex; gap: 4px; margin-bottom: 24px; background: var(--bg-secondary); padding: 4px; border-radius: 12px; border: 1px solid var(--border); overflow-x: auto;">
                <button class="settings-tab active" data-tab="products" onclick="switchSettingsTab('products')" style="padding: 12px 20px; border: none; background: var(--bg-card); border-radius: 8px; cursor: pointer; font-weight: 600; color: var(--text-primary); white-space: nowrap; transition: all 0.2s;">
                    üì¶ Products
                </button>
                <button class="settings-tab" data-tab="brands" onclick="switchSettingsTab('brands')" style="padding: 12px 20px; border: none; background: transparent; border-radius: 8px; cursor: pointer; font-weight: 500; color: var(--text-muted); white-space: nowrap; transition: all 0.2s;">
                    üè∑Ô∏è Brands
                </button>
                <button class="settings-tab" data-tab="integrations" onclick="switchSettingsTab('integrations')" style="padding: 12px 20px; border: none; background: transparent; border-radius: 8px; cursor: pointer; font-weight: 500; color: var(--text-muted); white-space: nowrap; transition: all 0.2s;">
                    üîå Integrations
                </button>
                <button class="settings-tab" data-tab="notifications" onclick="switchSettingsTab('notifications')" style="padding: 12px 20px; border: none; background: transparent; border-radius: 8px; cursor: pointer; font-weight: 500; color: var(--text-muted); white-space: nowrap; transition: all 0.2s;">
                    üîî Notifications
                </button>
                <button class="settings-tab" data-tab="reports" onclick="switchSettingsTab('reports')" style="padding: 12px 20px; border: none; background: transparent; border-radius: 8px; cursor: pointer; font-weight: 500; color: var(--text-muted); white-space: nowrap; transition: all 0.2s;">
                    üìä Reports
                </button>
                <button class="settings-tab" data-tab="application" onclick="switchSettingsTab('application')" style="padding: 12px 20px; border: none; background: transparent; border-radius: 8px; cursor: pointer; font-weight: 500; color: var(--text-muted); white-space: nowrap; transition: all 0.2s;">
                    üìù Application
                </button>
            </div>

            <!-- PRODUCTS TAB -->
            <div id="settings-tab-products" class="settings-tab-content" style="display: block;">
                <!-- Product Stats Overview -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 16px; margin-bottom: 24px;">
                    <div style="background: linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(139, 92, 246, 0.05) 100%); border: 1px solid rgba(139, 92, 246, 0.2); border-radius: 12px; padding: 20px;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="width: 44px; height: 44px; background: rgba(139, 92, 246, 0.2); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">üì¶</div>
                            <div>
                                <div style="font-size: 1.75rem; font-weight: 800; color: #a78bfa;" id="settingsProductCount">-</div>
                                <div style="font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">Products</div>
                            </div>
                        </div>
                    </div>
                    <div style="background: linear-gradient(135deg, rgba(34, 197, 94, 0.1) 0%, rgba(34, 197, 94, 0.05) 100%); border: 1px solid rgba(34, 197, 94, 0.2); border-radius: 12px; padding: 20px;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="width: 44px; height: 44px; background: rgba(34, 197, 94, 0.2); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">üí∞</div>
                            <div>
                                <div style="font-size: 1.75rem; font-weight: 800; color: #22c55e;" id="settingsProductGmv">$0</div>
                                <div style="font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">GMV (30d)</div>
                            </div>
                        </div>
                    </div>
                    <div style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(59, 130, 246, 0.05) 100%); border: 1px solid rgba(59, 130, 246, 0.2); border-radius: 12px; padding: 20px;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="width: 44px; height: 44px; background: rgba(59, 130, 246, 0.2); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">üé¨</div>
                            <div>
                                <div style="font-size: 1.75rem; font-weight: 800; color: #3b82f6;" id="settingsProductVideos">0</div>
                                <div style="font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">Videos</div>
                            </div>
                        </div>
                    </div>
                    <div style="background: linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, rgba(245, 158, 11, 0.05) 100%); border: 1px solid rgba(245, 158, 11, 0.2); border-radius: 12px; padding: 20px;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="width: 44px; height: 44px; background: rgba(245, 158, 11, 0.2); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">üèÜ</div>
                            <div>
                                <div style="font-size: 1rem; font-weight: 700; color: #f59e0b; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 140px;" id="settingsTopProduct" title="">-</div>
                                <div style="font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">Top Product</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Products from Data -->
                <div class="card" style="border-radius: 16px; overflow: hidden;">
                    <div class="card-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <div>
                            <div class="card-title" style="margin: 0; font-size: 1.1rem;"><span style="margin-right: 8px;">üì¶</span>Products from Your Data</div>
                            <p style="color: var(--text-muted); font-size: 0.8rem; margin: 6px 0 0 0;">All products found in your video performance uploads ‚Ä¢ Last 30 days</p>
                        </div>
                        <button class="btn" onclick="loadSettingsProducts()" style="display: flex; align-items: center; gap: 6px; padding: 8px 16px;">
                            <span style="font-size: 1rem;">üîÑ</span> Refresh
                        </button>
                    </div>
                    
                    <div style="display: flex; gap: 12px; align-items: center; margin-bottom: 16px; padding: 14px 16px; background: var(--bg-secondary); border-radius: 10px;">
                        <select id="settingsProductBrandFilter" onchange="filterSettingsProducts()" style="padding: 10px 14px; border-radius: 8px; border: 1px solid var(--border); background: var(--bg-card); font-weight: 500; min-width: 160px;">
                            <option value="all">üè∑Ô∏è All Brands</option>
                            <option value="physicians_choice">üíö Physicians Choice</option>
                            <option value="jiyu">üíú JiYu</option>
                            <option value="catakor">üß° Cata-Kor</option>
                            <option value="peach_slices">üíó Peach Slices</option>
                            <option value="yerba_magic">üíé Yerba Magic</option>
                            <option value="toplux">üíä Toplux Nutrition</option>
                        </select>
                        <div style="position: relative; flex: 1; max-width: 320px;">
                            <input type="text" id="settingsProductSearch" placeholder="Search products..." oninput="filterSettingsProducts()" style="padding: 10px 14px 10px 38px; border-radius: 8px; border: 1px solid var(--border); background: var(--bg-card); width: 100%;">
                            <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); opacity: 0.5;">üîç</span>
                        </div>
                        <div style="margin-left: auto; display: flex; align-items: center; gap: 8px;">
                            <span id="settingsProductFilterCount" style="color: var(--text-muted); font-size: 0.85rem; font-weight: 500;">0 products</span>
                        </div>
                    </div>
                    
                    <div class="table-container" style="max-height: 450px; overflow-y: auto; border-radius: 10px; border: 1px solid var(--border);">
                        <table>
                            <thead style="position: sticky; top: 0; background: var(--bg-secondary); z-index: 1;">
                                <tr>
                                    <th style="cursor: pointer; padding: 14px 16px; font-weight: 600; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.5px;" onclick="sortSettingsProducts('name')">Product Name ‚Üï</th>
                                    <th style="padding: 14px 12px; font-weight: 600; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.5px;">Brand</th>
                                    <th style="text-align: right; cursor: pointer; padding: 14px 16px; font-weight: 600; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.5px;" onclick="sortSettingsProducts('gmv')">GMV ‚Üï</th>
                                    <th style="text-align: center; cursor: pointer; padding: 14px 12px; font-weight: 600; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.5px;" onclick="sortSettingsProducts('videos')">Videos ‚Üï</th>
                                    <th style="text-align: center; cursor: pointer; padding: 14px 12px; font-weight: 600; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.5px;" onclick="sortSettingsProducts('orders')">Orders ‚Üï</th>
                                    <th style="text-align: right; padding: 14px 16px; font-weight: 600; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.5px;">$/Video</th>
                                </tr>
                            </thead>
                            <tbody id="settingsProductsTableBody">
                                <tr><td colspan="6" style="text-align: center; padding: 60px 40px; color: var(--text-muted);">
                                    <div class="spinner" style="margin: 0 auto 16px;"></div>
                                    <div style="font-size: 0.9rem;">Loading products from data...</div>
                                </td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Product Groups -->
                <div class="card" style="margin-top: 24px; border-radius: 16px;">
                    <div class="card-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <div>
                            <div class="card-title" style="margin: 0; font-size: 1.1rem;"><span style="margin-right: 8px;">üìÅ</span>Product Groups</div>
                            <p style="color: var(--text-muted); font-size: 0.8rem; margin: 6px 0 0 0;">Combine multiple products into logical groups for easier filtering and reporting</p>
                        </div>
                        <button class="btn btn-success" onclick="openCreateGroupModal()" style="display: flex; align-items: center; gap: 6px; padding: 10px 18px; font-weight: 600;">
                            <span style="font-size: 1.1rem;">‚ûï</span> Create Group
                        </button>
                    </div>
                    
                    <div id="productGroupsContainer">
                        <div id="productGroupsList" style="display: grid; gap: 12px;">
                            <!-- Groups will be rendered here -->
                        </div>
                        <div id="noGroupsMessage" style="text-align: center; padding: 50px 40px; background: var(--bg-secondary); border-radius: 12px; border: 2px dashed var(--border);">
                            <div style="font-size: 2.5rem; margin-bottom: 16px;">üìÅ</div>
                            <div style="font-weight: 600; font-size: 1rem; margin-bottom: 8px; color: var(--text-primary);">No product groups created yet</div>
                            <div style="font-size: 0.85rem; color: var(--text-muted); max-width: 400px; margin: 0 auto;">Groups let you combine variants like "Probiotic 30ct" + "Probiotic 60ct" into one "Probiotics" group for cleaner reports</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- BRANDS TAB -->
            <div id="settings-tab-brands" class="settings-tab-content" style="display: none;">
                <div style="display: grid; gap: 24px; max-width: 900px;">
                    
                    <!-- Quick Actions -->
                    <div class="card" style="padding: 24px; border-radius: 12px;">
                        <div style="font-weight: 700; font-size: 1.1rem; margin-bottom: 16px;">üöÄ Quick Actions</div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;">
                            <button class="btn" onclick="copyBrandApplyLink()" style="padding: 16px; display: flex; flex-direction: column; align-items: center; gap: 8px; height: auto;">
                                <span style="font-size: 1.5rem;">üîó</span>
                                <span style="font-weight: 600;">Copy Apply Link</span>
                                <span style="font-size: 0.75rem; color: var(--text-muted);">Get brand-specific URL</span>
                            </button>
                            <button class="btn" onclick="openBrandPortalLink()" style="padding: 16px; display: flex; flex-direction: column; align-items: center; gap: 8px; height: auto;">
                                <span style="font-size: 1.5rem;">üè¢</span>
                                <span style="font-weight: 600;">Brand Portal</span>
                                <span style="font-size: 0.75rem; color: var(--text-muted);">View as brand client</span>
                            </button>
                            <button class="btn" onclick="testApplyPage()" style="padding: 16px; display: flex; flex-direction: column; align-items: center; gap: 8px; height: auto;">
                                <span style="font-size: 1.5rem;">üëÅÔ∏è</span>
                                <span style="font-weight: 600;">Preview Apply Page</span>
                                <span style="font-size: 0.75rem; color: var(--text-muted);">Test creator experience</span>
                            </button>
                        </div>
                    </div>

                    <!-- Brand Selector -->
                    <div class="card" style="padding: 24px; border-radius: 12px;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                            <div style="font-weight: 700; font-size: 1.1rem;">üè∑Ô∏è Active Brands</div>
                            <select id="brandSettingsSelect" onchange="updateBrandSettings()" style="padding: 10px 16px; border-radius: 8px; border: 1px solid var(--border); background: var(--bg-card); font-weight: 500; min-width: 200px;">
                                <option value="catakor">Cata-Kor</option>
                                <option value="jiyu">JiYu</option>
                                <option value="physicians_choice">Physicians Choice</option>
                                <option value="peach_slices">Peach Slices</option>
                                <option value="yerba_magic">Yerba Magic</option>
                                <option value="toplux">Toplux Nutrition</option>
                            </select>
                        </div>
                        
                        <!-- Brand Info Cards -->
                        <div id="brandInfoCards" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 12px; margin-bottom: 24px;">
                        </div>
                        
                        <!-- Brand Links -->
                        <div style="background: var(--bg-secondary); border-radius: 10px; padding: 16px;">
                            <div style="font-weight: 600; margin-bottom: 12px; font-size: 0.9rem;">üìã Brand Links</div>
                            <div style="display: flex; flex-direction: column; gap: 10px;">
                                <div style="display: flex; align-items: center; gap: 12px; padding: 10px; background: var(--bg-card); border-radius: 8px;">
                                    <span style="font-size: 0.85rem; color: var(--text-muted); min-width: 100px;">Apply URL:</span>
                                    <code id="brandApplyUrl" style="flex: 1; font-size: 0.85rem; color: var(--accent); word-break: break-all;"></code>
                                    <button class="btn" onclick="copyBrandApplyLink()" style="padding: 6px 12px; font-size: 0.8rem;">üìã Copy</button>
                                </div>
                                <div style="display: flex; align-items: center; gap: 12px; padding: 10px; background: var(--bg-card); border-radius: 8px;">
                                    <span style="font-size: 0.85rem; color: var(--text-muted); min-width: 100px;">Portal URL:</span>
                                    <code id="brandPortalUrl" style="flex: 1; font-size: 0.85rem; color: var(--accent); word-break: break-all;"></code>
                                    <button class="btn" onclick="copyBrandPortalLink()" style="padding: 6px 12px; font-size: 0.8rem;">üìã Copy</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Brand Stats Summary -->
                    <div class="card" style="padding: 24px; border-radius: 12px;">
                        <div style="font-weight: 700; font-size: 1.1rem; margin-bottom: 20px;">üìä Brand Overview</div>
                        <div id="brandStatsGrid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 16px;">
                            <div style="text-align: center; padding: 16px; background: var(--bg-secondary); border-radius: 10px;">
                                <div style="font-size: 1.5rem; font-weight: 700; color: var(--accent);" id="brandStatCreators">--</div>
                                <div style="font-size: 0.8rem; color: var(--text-muted);">Creators</div>
                            </div>
                            <div style="text-align: center; padding: 16px; background: var(--bg-secondary); border-radius: 10px;">
                                <div style="font-size: 1.5rem; font-weight: 700; color: var(--success);" id="brandStatGMV">--</div>
                                <div style="font-size: 0.8rem; color: var(--text-muted);">GMV (30d)</div>
                            </div>
                            <div style="text-align: center; padding: 16px; background: var(--bg-secondary); border-radius: 10px;">
                                <div style="font-size: 1.5rem; font-weight: 700; color: var(--blue);" id="brandStatProducts">--</div>
                                <div style="font-size: 0.8rem; color: var(--text-muted);">Products</div>
                            </div>
                            <div style="text-align: center; padding: 16px; background: var(--bg-secondary); border-radius: 10px;">
                                <div style="font-size: 1.5rem; font-weight: 700; color: var(--purple);" id="brandStatApps">--</div>
                                <div style="font-size: 0.8rem; color: var(--text-muted);">Pending Apps</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- New Brand Onboarding Checklist -->
                    <div class="card" style="padding: 24px; border-radius: 12px;">
                        <div style="font-weight: 700; font-size: 1.1rem; margin-bottom: 16px;">‚úÖ New Client Onboarding Checklist</div>
                        <div style="display: flex; flex-direction: column; gap: 12px;" id="onboardingChecklist">
                            <label style="display: flex; align-items: center; gap: 12px; padding: 12px; background: var(--bg-secondary); border-radius: 8px; cursor: pointer;">
                                <input type="checkbox" id="check-brand-added" style="width: 18px; height: 18px;">
                                <div>
                                    <div style="font-weight: 500;">Brand added to system</div>
                                    <div style="font-size: 0.8rem; color: var(--text-muted);">Added to dropdowns in admin, apply page, portals</div>
                                </div>
                            </label>
                            <label style="display: flex; align-items: center; gap: 12px; padding: 12px; background: var(--bg-secondary); border-radius: 8px; cursor: pointer;">
                                <input type="checkbox" id="check-discord-server" style="width: 18px; height: 18px;">
                                <div>
                                    <div style="font-weight: 500;">Discord server created</div>
                                    <div style="font-size: 0.8rem; color: var(--text-muted);">Server ID added for creator linking</div>
                                </div>
                            </label>
                            <label style="display: flex; align-items: center; gap: 12px; padding: 12px; background: var(--bg-secondary); border-radius: 8px; cursor: pointer;">
                                <input type="checkbox" id="check-products-added" style="width: 18px; height: 18px;">
                                <div>
                                    <div style="font-weight: 500;">Products uploaded</div>
                                    <div style="font-size: 0.8rem; color: var(--text-muted);">Initial product catalog imported</div>
                                </div>
                            </label>
                            <label style="display: flex; align-items: center; gap: 12px; padding: 12px; background: var(--bg-secondary); border-radius: 8px; cursor: pointer;">
                                <input type="checkbox" id="check-webhook-setup" style="width: 18px; height: 18px;">
                                <div>
                                    <div style="font-weight: 500;">Discord webhook configured</div>
                                    <div style="font-size: 0.8rem; color: var(--text-muted);">Notifications flowing to brand's Discord</div>
                                </div>
                            </label>
                            <label style="display: flex; align-items: center; gap: 12px; padding: 12px; background: var(--bg-secondary); border-radius: 8px; cursor: pointer;">
                                <input type="checkbox" id="check-apply-page" style="width: 18px; height: 18px;">
                                <div>
                                    <div style="font-weight: 500;">Apply page tested</div>
                                    <div style="font-size: 0.8rem; color: var(--text-muted);">Brand-specific apply link working</div>
                                </div>
                            </label>
                            <label style="display: flex; align-items: center; gap: 12px; padding: 12px; background: var(--bg-secondary); border-radius: 8px; cursor: pointer;">
                                <input type="checkbox" id="check-brand-portal" style="width: 18px; height: 18px;">
                                <div>
                                    <div style="font-weight: 500;">Brand portal access</div>
                                    <div style="font-size: 0.8rem; color: var(--text-muted);">Client can log in and view dashboard</div>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- INTEGRATIONS TAB -->
            <div id="settings-tab-integrations" class="settings-tab-content" style="display: none;">
                <div style="display: grid; gap: 16px; max-width: 900px;">
                    
                    <!-- Discord Webhooks -->
                    <div class="card" id="discordCard" style="border-radius: 12px; padding: 20px;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                            <div style="width: 40px; height: 40px; background: #5865F2; border-radius: 8px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="white"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/></svg>
                            </div>
                            <div style="flex: 1;">
                                <div style="font-weight: 600; font-size: 1rem;">Discord Webhooks</div>
                                <div style="color: var(--text-muted); font-size: 0.8rem;">Add multiple webhooks for different channels</div>
                            </div>
                            <button class="btn btn-primary" onclick="openAddWebhookModal()" style="padding: 8px 14px; font-size: 0.85rem;">+ Add Webhook</button>
                        </div>
                        
                        <div id="discordWebhooksList">
                            <!-- Webhooks will be rendered here -->
                        </div>
                        <div id="noWebhooksMessage" style="text-align: center; padding: 30px; color: var(--text-muted); background: var(--bg-secondary); border-radius: 8px;">
                            <div style="margin-bottom: 8px;">No webhooks configured</div>
                            <div style="font-size: 0.8rem;">Add webhooks for different Discord channels (e.g., #wins, #alerts, #reports)</div>
                        </div>
                    </div>

                    <!-- Email -->
                    <div class="card" id="emailCard" style="border-radius: 12px; padding: 20px;">
                        <div style="display: flex; align-items: flex-start; gap: 16px;">
                            <div style="width: 40px; height: 40px; background: #22c55e; border-radius: 8px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 1.1rem;">üìß</div>
                            <div style="flex: 1; min-width: 0;">
                                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 4px;">
                                    <span style="font-weight: 600; font-size: 1rem;">Email</span>
                                    <span style="font-size: 0.7rem; color: var(--text-muted);">via Resend</span>
                                    <span id="emailStatusBadge" style="font-size: 0.7rem; padding: 2px 8px; border-radius: 4px; background: var(--bg-secondary); color: var(--text-muted);">Not connected</span>
                                </div>
                                <div style="color: var(--text-muted); font-size: 0.8rem; margin-bottom: 12px;">Send alerts and weekly reports via email</div>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                                    <input type="password" class="form-input" id="resendApiKey" placeholder="API Key (re_...)" style="font-family: 'Space Mono', monospace; font-size: 0.75rem; padding: 10px 12px;">
                                    <input type="email" class="form-input" id="resendFromEmail" placeholder="From email address" style="font-size: 0.85rem; padding: 10px 12px;">
                                </div>
                                <div style="display: flex; gap: 10px;">
                                    <button class="btn btn-primary" onclick="saveEmailSettings()" style="padding: 10px 16px;">Save</button>
                                    <button class="btn" onclick="testEmailAlert()" style="padding: 10px 16px;">Test</button>
                                </div>
                                <div id="emailStatus" style="margin-top: 8px; font-size: 0.8rem;"></div>
                            </div>
                        </div>
                    </div>

                    <!-- SMS -->
                    <div class="card" id="smsCard" style="border-radius: 12px; padding: 20px;">
                        <div style="display: flex; align-items: flex-start; gap: 16px;">
                            <div style="width: 40px; height: 40px; background: #f97316; border-radius: 8px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 1.1rem;">üì±</div>
                            <div style="flex: 1; min-width: 0;">
                                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 4px;">
                                    <span style="font-weight: 600; font-size: 1rem;">SMS</span>
                                    <span style="font-size: 0.7rem; color: var(--text-muted);">via Twilio</span>
                                    <span id="smsStatusBadge" style="font-size: 0.7rem; padding: 2px 8px; border-radius: 4px; background: var(--bg-secondary); color: var(--text-muted);">Not connected</span>
                                </div>
                                <div style="color: var(--text-muted); font-size: 0.8rem; margin-bottom: 12px;">Critical alerts via text message</div>
                                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                                    <input type="text" class="form-input" id="twilioSid" placeholder="Account SID" style="font-family: 'Space Mono', monospace; font-size: 0.75rem; padding: 10px 12px;">
                                    <input type="password" class="form-input" id="twilioToken" placeholder="Auth Token" style="font-family: 'Space Mono', monospace; font-size: 0.75rem; padding: 10px 12px;">
                                    <input type="tel" class="form-input" id="twilioPhone" placeholder="+1234567890" style="font-size: 0.85rem; padding: 10px 12px;">
                                </div>
                                <div style="display: flex; gap: 10px;">
                                    <button class="btn btn-primary" onclick="saveSmsSettings()" style="padding: 10px 16px;">Save</button>
                                    <button class="btn" onclick="testSmsAlert()" style="padding: 10px 16px;">Test</button>
                                </div>
                                <div id="smsStatus" style="margin-top: 8px; font-size: 0.8rem;"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Google Sheets -->
                    <div class="card" id="sheetsCard" style="border-radius: 12px; padding: 20px;">
                        <div style="display: flex; align-items: flex-start; gap: 16px;">
                            <div style="width: 40px; height: 40px; background: #34a853; border-radius: 8px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 1.1rem;">üìä</div>
                            <div style="flex: 1; min-width: 0;">
                                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 4px;">
                                    <span style="font-weight: 600; font-size: 1rem;">Google Sheets</span>
                                    <span id="sheetsStatusBadge" style="font-size: 0.7rem; padding: 2px 8px; border-radius: 4px; background: var(--bg-secondary); color: var(--text-muted);">Not connected</span>
                                </div>
                                <div style="color: var(--text-muted); font-size: 0.8rem; margin-bottom: 12px;">Auto-export reports to spreadsheets</div>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                                    <input type="text" class="form-input" id="googleSheetId" placeholder="Spreadsheet ID" style="font-family: 'Space Mono', monospace; font-size: 0.75rem; padding: 10px 12px;">
                                    <input type="email" class="form-input" id="googleServiceEmail" placeholder="Service account email" style="font-size: 0.8rem; padding: 10px 12px;">
                                </div>
                                <div style="display: flex; gap: 10px;">
                                    <button class="btn btn-primary" onclick="saveSheetsSettings()" style="padding: 10px 16px;">Save</button>
                                    <button class="btn" onclick="testSheetsConnection()" style="padding: 10px 16px;">Test</button>
                                </div>
                                <div id="sheetsStatus" style="margin-top: 8px; font-size: 0.8rem;"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Coming Soon -->
                    <div style="display: flex; gap: 12px; margin-top: 8px;">
                        <div style="flex: 1; padding: 16px; background: var(--bg-secondary); border: 1px dashed var(--border); border-radius: 10px; text-align: center; opacity: 0.6;">
                            <div style="font-size: 1.2rem; margin-bottom: 4px;">üí¨</div>
                            <div style="font-size: 0.8rem; color: var(--text-muted);">Slack</div>
                            <div style="font-size: 0.65rem; color: var(--text-muted);">Coming soon</div>
                        </div>
                        <div style="flex: 1; padding: 16px; background: var(--bg-secondary); border: 1px dashed var(--border); border-radius: 10px; text-align: center; opacity: 0.6;">
                            <div style="font-size: 1.2rem; margin-bottom: 4px;">‚ö°</div>
                            <div style="font-size: 0.8rem; color: var(--text-muted);">Zapier</div>
                            <div style="font-size: 0.65rem; color: var(--text-muted);">Coming soon</div>
                        </div>
                        <div style="flex: 1; padding: 16px; background: var(--bg-secondary); border: 1px dashed var(--border); border-radius: 10px; text-align: center; opacity: 0.6;">
                            <div style="font-size: 1.2rem; margin-bottom: 4px;">üîÑ</div>
                            <div style="font-size: 0.8rem; color: var(--text-muted);">Make</div>
                            <div style="font-size: 0.65rem; color: var(--text-muted);">Coming soon</div>
                        </div>
                        <div style="flex: 1; padding: 16px; background: var(--bg-secondary); border: 1px dashed var(--border); border-radius: 10px; text-align: center; opacity: 0.6;">
                            <div style="font-size: 1.2rem; margin-bottom: 4px;">üõí</div>
                            <div style="font-size: 0.8rem; color: var(--text-muted);">TikTok API</div>
                            <div style="font-size: 0.65rem; color: var(--text-muted);">Coming soon</div>
                        </div>
                    </div>
                </div>
            </div>
    
    <!-- Add Webhook Modal -->
    <div class="modal-overlay" id="webhookModal">
        <div class="modal" style="max-width: 500px;">
            <div class="modal-header">
                <h3 class="modal-title" id="webhookModalTitle">Add Discord Webhook</h3>
                <button class="modal-close" onclick="closeWebhookModal()">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="webhookId">
                
                <div class="form-group">
                    <label class="form-label">Label *</label>
                    <input type="text" class="form-input" id="webhookLabel" placeholder="e.g., #wins, #alerts, #pc-updates">
                    <small style="color: var(--text-muted); font-size: 0.75rem; margin-top: 4px; display: block;">A friendly name to identify this webhook</small>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Webhook URL *</label>
                    <input type="text" class="form-input" id="webhookUrl" placeholder="https://discord.com/api/webhooks/..." style="font-family: 'Space Mono', monospace; font-size: 0.8rem;">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Use for</label>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 8px;">
                        <label style="display: flex; align-items: center; gap: 8px; padding: 10px 12px; background: var(--bg-secondary); border-radius: 6px; cursor: pointer;">
                            <input type="checkbox" id="webhookForWins" style="width: 16px; height: 16px;">
                            <span style="font-size: 0.85rem;">üèÜ Wins & Milestones</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; padding: 10px 12px; background: var(--bg-secondary); border-radius: 6px; cursor: pointer;">
                            <input type="checkbox" id="webhookForAlerts" style="width: 16px; height: 16px;">
                            <span style="font-size: 0.85rem;">üö® Alerts & Issues</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; padding: 10px 12px; background: var(--bg-secondary); border-radius: 6px; cursor: pointer;">
                            <input type="checkbox" id="webhookForReports" style="width: 16px; height: 16px;">
                            <span style="font-size: 0.85rem;">üìä Weekly Reports</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; padding: 10px 12px; background: var(--bg-secondary); border-radius: 6px; cursor: pointer;">
                            <input type="checkbox" id="webhookForApplications" style="width: 16px; height: 16px;">
                            <span style="font-size: 0.85rem;">üìù New Applications</span>
                        </label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Brand Filter (optional)</label>
                    <select class="form-input" id="webhookBrand">
                        <option value="all">All Brands</option>
                        <option value="physicians_choice">Physicians Choice only</option>
                        <option value="jiyu">JiYu only</option>
                        <option value="catakor">Cata-Kor only</option>
                        <option value="peach_slices">Peach Slices only</option>
                        <option value="yerba_magic">Yerba Magic only</option>
                    </select>
                    <small style="color: var(--text-muted); font-size: 0.75rem; margin-top: 4px; display: block;">Only send notifications for this brand to this webhook</small>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="closeWebhookModal()">Cancel</button>
                <button class="btn" onclick="testWebhook()" style="margin-right: auto;">üß™ Test</button>
                <button class="btn btn-primary" onclick="saveWebhook()">Save Webhook</button>
            </div>
        </div>
    </div>

            <!-- NOTIFICATIONS TAB -->
            <div id="settings-tab-notifications" class="settings-tab-content" style="display: none;">
                <div style="max-width: 900px;">
                    <!-- Event Types Explanation -->
                    <div class="card" style="border-radius: 12px; margin-bottom: 20px;">
                        <div style="font-weight: 600; font-size: 1rem; margin-bottom: 16px;">üìã Available Notification Events</div>
                        <div style="display: grid; gap: 12px;">
                            <div style="display: flex; gap: 12px; padding: 12px; background: var(--bg-secondary); border-radius: 8px;">
                                <div style="font-size: 1.2rem;">üèÜ</div>
                                <div style="flex: 1;">
                                    <div style="font-weight: 500;">Wins & Milestones</div>
                                    <div style="font-size: 0.8rem; color: var(--text-muted);">Creator hits $1K+ GMV day, weekly top 3 performers, first sale for new creator</div>
                                </div>
                                <div style="font-size: 0.75rem; color: var(--text-muted); align-self: center;">Triggers: Daily @ 9 PM</div>
                            </div>
                            <div style="display: flex; gap: 12px; padding: 12px; background: var(--bg-secondary); border-radius: 8px;">
                                <div style="font-size: 1.2rem;">üö®</div>
                                <div style="flex: 1;">
                                    <div style="font-weight: 500;">Alerts & Issues</div>
                                    <div style="font-size: 0.8rem; color: var(--text-muted);">Ghost creators (5+ days no post), retainer underperformers, declining trends</div>
                                </div>
                                <div style="font-size: 0.75rem; color: var(--text-muted); align-self: center;">Triggers: Daily @ 10 AM</div>
                            </div>
                            <div style="display: flex; gap: 12px; padding: 12px; background: var(--bg-secondary); border-radius: 8px;">
                                <div style="font-size: 1.2rem;">üìä</div>
                                <div style="flex: 1;">
                                    <div style="font-weight: 500;">Weekly Reports</div>
                                    <div style="font-size: 0.8rem; color: var(--text-muted);">Full performance summary, GMV by brand, top/bottom creators, trends</div>
                                </div>
                                <div style="font-size: 0.75rem; color: var(--text-muted); align-self: center;">Triggers: Monday @ 9 AM</div>
                            </div>
                            <div style="display: flex; gap: 12px; padding: 12px; background: var(--bg-secondary); border-radius: 8px;">
                                <div style="font-size: 1.2rem;">üìù</div>
                                <div style="flex: 1;">
                                    <div style="font-weight: 500;">New Applications</div>
                                    <div style="font-size: 0.8rem; color: var(--text-muted);">When a creator submits an application to join</div>
                                </div>
                                <div style="font-size: 0.75rem; color: var(--text-muted); align-self: center;">Triggers: Instant</div>
                            </div>
                        </div>
                    </div>

                    <!-- Discord Routing -->
                    <div class="card" style="border-radius: 12px; margin-bottom: 20px;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <div style="font-weight: 600; font-size: 1rem;">üí¨ Discord Routing</div>
                            <span style="font-size: 0.8rem; color: var(--text-muted);" id="discordRoutingStatus">No webhooks configured</span>
                        </div>
                        <div id="discordRoutingTable">
                            <div style="text-align: center; padding: 20px; color: var(--text-muted); background: var(--bg-secondary); border-radius: 8px;">
                                Add webhooks in <a href="#" onclick="switchSettingsTab('integrations'); return false;" style="color: var(--accent);">Integrations</a> to configure Discord routing
                            </div>
                        </div>
                    </div>

                    <!-- Manual Triggers -->
                    <div class="card" style="border-radius: 12px; margin-bottom: 20px;">
                        <div style="font-weight: 600; font-size: 1rem; margin-bottom: 16px;">üéÆ Manual Triggers</div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;">
                            <button class="btn" onclick="triggerWinsNotification()" style="padding: 14px; display: flex; flex-direction: column; align-items: center; gap: 6px;">
                                <span style="font-size: 1.2rem;">üèÜ</span>
                                <span>Send Today's Wins</span>
                            </button>
                            <button class="btn" onclick="triggerAlertsNotification()" style="padding: 14px; display: flex; flex-direction: column; align-items: center; gap: 6px;">
                                <span style="font-size: 1.2rem;">üö®</span>
                                <span>Send Current Alerts</span>
                            </button>
                            <button class="btn" onclick="triggerWeeklyReport()" style="padding: 14px; display: flex; flex-direction: column; align-items: center; gap: 6px;">
                                <span style="font-size: 1.2rem;">üìä</span>
                                <span>Send Weekly Report</span>
                            </button>
                        </div>
                    </div>

                    <!-- Notification Log -->
                    <div class="card" style="border-radius: 12px;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <div style="font-weight: 600; font-size: 1rem;">üìú Recent Notifications</div>
                            <button class="btn btn-sm" onclick="clearNotificationLog()" style="font-size: 0.75rem; padding: 6px 12px;">Clear Log</button>
                        </div>
                        <div id="notificationLogContainer" style="max-height: 300px; overflow-y: auto;">
                            <div id="notificationLog" style="display: grid; gap: 8px;">
                                <div style="text-align: center; padding: 30px; color: var(--text-muted);">No notifications sent yet</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- REPORTS TAB -->
            <div id="settings-tab-reports" class="settings-tab-content" style="display: none;">
                <div style="max-width: 900px;">
                    <!-- Quick Report Generator -->
                    <div class="card" style="border-radius: 12px; margin-bottom: 20px;">
                        <div style="font-weight: 600; font-size: 1rem; margin-bottom: 16px;">üöÄ Quick Report Generator</div>
                        <p style="color: var(--text-muted); font-size: 0.85rem; margin-bottom: 20px;">Generate a shareable report page for any brand. Copy the link and send to clients.</p>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px; margin-bottom: 20px;">
                            <div class="form-group" style="margin: 0;">
                                <label class="form-label" style="font-size: 0.75rem;">Period</label>
                                <select id="quickReportPeriod" class="form-input" style="padding: 10px;">
                                    <option value="last7" selected>Last 7 Days</option>
                                    <option value="lastWeek">Last Week (Mon-Sun)</option>
                                    <option value="thisMonth">This Month</option>
                                    <option value="lastMonth">Last Month</option>
                                    <option value="custom">Custom Range</option>
                                </select>
                            </div>
                            <div id="customDateRange" style="display: none; grid-column: span 2;">
                                <div style="display: flex; gap: 12px;">
                                    <div class="form-group" style="margin: 0; flex: 1;">
                                        <label class="form-label" style="font-size: 0.75rem;">Start Date</label>
                                        <input type="date" id="quickReportStart" class="form-input" style="padding: 10px;">
                                    </div>
                                    <div class="form-group" style="margin: 0; flex: 1;">
                                        <label class="form-label" style="font-size: 0.75rem;">End Date</label>
                                        <input type="date" id="quickReportEnd" class="form-input" style="padding: 10px;">
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div style="font-weight: 500; font-size: 0.85rem; margin-bottom: 12px; color: var(--text-secondary);">Select Brand to Generate Report</div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 10px;">
                            <button class="btn" onclick="openShareableReport('physicians_choice')" style="padding: 16px; display: flex; flex-direction: column; align-items: center; gap: 8px; background: var(--bg-secondary);">
                                <img src="logos/physicians_choice.png" style="height: 32px; object-fit: contain;" onerror="this.style.display='none'">
                                <span style="font-size: 0.85rem;">Physicians Choice</span>
                            </button>
                            <button class="btn" onclick="openShareableReport('jiyu')" style="padding: 16px; display: flex; flex-direction: column; align-items: center; gap: 8px; background: var(--bg-secondary);">
                                <img src="logos/jiyu.png" style="height: 32px; object-fit: contain;" onerror="this.style.display='none'">
                                <span style="font-size: 0.85rem;">JiYu</span>
                            </button>
                            <button class="btn" onclick="openShareableReport('peach_slices')" style="padding: 16px; display: flex; flex-direction: column; align-items: center; gap: 8px; background: var(--bg-secondary);">
                                <img src="logos/peach_slices.png" style="height: 32px; object-fit: contain;" onerror="this.style.display='none'">
                                <span style="font-size: 0.85rem;">Peach Slices</span>
                            </button>
                            <button class="btn" onclick="openShareableReport('yerba_magic')" style="padding: 16px; display: flex; flex-direction: column; align-items: center; gap: 8px; background: var(--bg-secondary);">
                                <img src="logos/yerba_magic.png" style="height: 32px; object-fit: contain;" onerror="this.style.display='none'">
                                <span style="font-size: 0.85rem;">Yerba Magic</span>
                            </button>
                            <button class="btn" onclick="openShareableReport('catakor')" style="padding: 16px; display: flex; flex-direction: column; align-items: center; gap: 8px; background: var(--bg-secondary);">
                                <span style="font-size: 1.5rem;">üê±</span>
                                <span style="font-size: 0.85rem;">Cata-Kor</span>
                            </button>
                            <button class="btn btn-primary" onclick="openShareableReport('all')" style="padding: 16px; display: flex; flex-direction: column; align-items: center; gap: 8px;">
                                <span style="font-size: 1.5rem;">üìä</span>
                                <span style="font-size: 0.85rem;">All Brands</span>
                            </button>
                        </div>
                    </div>

                    <!-- Recent Reports -->
                    <div class="card" style="border-radius: 12px; margin-bottom: 20px;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <div style="font-weight: 600; font-size: 1rem;">üìÅ Recent Reports</div>
                            <button class="btn btn-sm" onclick="clearReportHistory()" style="font-size: 0.75rem;">Clear History</button>
                        </div>
                        <div id="recentReportsList">
                            <div style="text-align: center; padding: 30px; color: var(--text-muted); background: var(--bg-secondary); border-radius: 8px;">
                                No reports generated yet. Click a brand above to create one.
                            </div>
                        </div>
                    </div>

                    <!-- Legacy Text Report (collapsed) -->
                    <details class="card" style="border-radius: 12px;">
                        <summary style="font-weight: 600; font-size: 1rem; cursor: pointer; padding: 4px 0;">üìù Text Report Generator (Legacy)</summary>
                        <div style="margin-top: 16px;">
                            <p style="color: var(--text-muted); font-size: 0.85rem; margin-bottom: 16px;">Generate a plain text report for Discord or copy/paste.</p>
                            
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 20px;">
                                <div class="form-group">
                                    <label class="form-label">Period</label>
                                    <select id="reportPeriod" class="form-input">
                                        <option value="last7">Last 7 Days</option>
                                        <option value="lastWeek" selected>Last Week (Mon-Sun)</option>
                                        <option value="thisMonth">This Month</option>
                                        <option value="lastMonth">Last Month</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Type</label>
                                    <select id="reportType" class="form-input">
                                        <option value="summary">Executive Summary</option>
                                        <option value="detailed">Detailed Report</option>
                                        <option value="brand">Brand-by-Brand</option>
                                        <option value="creator">Top Creators</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Brand</label>
                                    <select id="reportBrand" class="form-input">
                                        <option value="all">All Brands</option>
                                        <option value="catakor">Cata-Kor</option>
                                        <option value="jiyu">JiYu</option>
                                        <option value="physicians_choice">Physicians Choice</option>
                                        <option value="peach_slices">Peach Slices</option>
                                        <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div style="padding: 16px; background: var(--bg-secondary); border-radius: 8px; margin-bottom: 16px;">
                                <div style="font-weight: 600; margin-bottom: 12px;">Include in Report</div>
                                <div style="display: flex; gap: 16px; flex-wrap: wrap;">
                                    <label style="display: flex; align-items: center; gap: 6px; cursor: pointer;">
                                        <input type="checkbox" id="reportIncludeGmv" checked> GMV & Revenue
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 6px; cursor: pointer;">
                                        <input type="checkbox" id="reportIncludeCreators" checked> Top Creators
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 6px; cursor: pointer;">
                                        <input type="checkbox" id="reportIncludeVideos" checked> Top Videos
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 6px; cursor: pointer;">
                                        <input type="checkbox" id="reportIncludeProducts" checked> Top Products
                                    </label>
                                </div>
                            </div>
                            
                            <button class="btn btn-primary" onclick="generateWeeklyReport()">üìà Generate Text Report</button>
                            
                            <div id="reportPreview" style="display: none; margin-top: 20px; padding: 20px; background: var(--bg-secondary); border-radius: 10px; border: 1px solid var(--border);">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                                    <h4 style="margin: 0;">Report Preview</h4>
                                    <div style="display: flex; gap: 8px;">
                                        <button class="btn btn-sm" onclick="copyReportToClipboard()">üìã Copy</button>
                                        <button class="btn btn-sm" onclick="sendReportToDiscord()">üí¨ Discord</button>
                                    </div>
                                </div>
                                <div id="reportContent" style="font-family: 'Space Mono', monospace; font-size: 0.85rem; white-space: pre-wrap; line-height: 1.6;"></div>
                            </div>
                        </div>
                    </details>
                </div>
            </div>

            <!-- APPLICATION TAB -->
            <div id="settings-tab-application" class="settings-tab-content" style="display: none;">
                <!-- Brand Selector for Application Settings -->
                <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 24px; padding: 16px; background: var(--bg-secondary); border-radius: 12px;">
                    <div style="font-weight: 600;">Configure Application For:</div>
                    <select id="appSettingsBrandSelect" onchange="loadBrandAppSettings()" style="padding: 10px 16px; border-radius: 8px; border: 1px solid var(--border); background: var(--bg-card); font-weight: 500; min-width: 200px;">
                        <option value="default">üåê Default (All Brands)</option>
                        <option value="catakor">üíä Cata-Kor</option>
                        <option value="jiyu">‚ú® JiYu</option>
                        <option value="physicians_choice">ü©∫ Physicians Choice</option>
                        <option value="peach_slices">üçë Peach Slices</option>
                        <option value="yerba_magic">üßâ Yerba Magic</option>
                        <option value="toplux">‚ö° Toplux Nutrition</option>
                    </select>
                    <button class="btn" onclick="testApplyPageFromSettings()" style="margin-left: auto;">üëÅÔ∏è Preview</button>
                </div>

                <div class="card">
                    <div class="card-title"><span>üé®</span> Branding & Appearance</div>
                    <p style="color: var(--text-muted); margin-bottom: 20px;">Customize the look and feel for this brand's application</p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                        <div class="form-group">
                            <label class="form-label">Page Title</label>
                            <input type="text" class="form-input" id="appSettingsTitle" placeholder="Apply to Join [Brand Name]">
                            <small style="color: var(--text-muted); display: block; margin-top: 4px;">Header text shown on application page</small>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Subtitle / Tagline</label>
                            <input type="text" class="form-input" id="appSettingsSubtitle" placeholder="Partner with us and earn commissions on TikTok Shop">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Logo URL</label>
                            <input type="text" class="form-input" id="appSettingsLogo" placeholder="https://..." style="font-family: 'Space Mono', monospace; font-size: 0.85rem;">
                            <small style="color: var(--text-muted); display: block; margin-top: 4px;">Brand logo shown at top</small>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Primary Color</label>
                            <div style="display: flex; gap: 8px; align-items: center;">
                                <input type="color" id="appSettingsColor" value="#f5c518" style="width: 50px; height: 38px; border: none; border-radius: 6px; cursor: pointer;">
                                <input type="text" class="form-input" id="appSettingsColorText" placeholder="#f5c518" style="font-family: 'Space Mono', monospace; font-size: 0.85rem; flex: 1;" oninput="document.getElementById('appSettingsColor').value = this.value">
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card" style="margin-top: 20px;">
                    <div class="card-title"><span>üé¨</span> Videos</div>
                    <p style="color: var(--text-muted); margin-bottom: 20px;">Add welcome and thank-you videos to engage creators</p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                        <div class="form-group">
                            <label class="form-label">Welcome Video URL</label>
                            <input type="text" class="form-input" id="appSettingsWelcomeVideo" placeholder="https://www.youtube.com/embed/... or https://www.loom.com/share/..." style="font-family: 'Space Mono', monospace; font-size: 0.85rem;">
                            <small style="color: var(--text-muted); display: block; margin-top: 4px;">Shown at top of application form (YouTube, Loom, or direct MP4)</small>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Thank You Video URL</label>
                            <input type="text" class="form-input" id="appSettingsThankYouVideo" placeholder="https://www.youtube.com/embed/... or https://www.loom.com/share/..." style="font-family: 'Space Mono', monospace; font-size: 0.85rem;">
                            <small style="color: var(--text-muted); display: block; margin-top: 4px;">Shown after successful submission</small>
                        </div>
                    </div>
                </div>
                
                <div class="card" style="margin-top: 20px;">
                    <div class="card-title"><span>‚úÖ</span> Success Message</div>
                    <p style="color: var(--text-muted); margin-bottom: 20px;">Customize what creators see after applying</p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                        <div class="form-group">
                            <label class="form-label">Success Title</label>
                            <input type="text" class="form-input" id="appSettingsSuccessTitle" placeholder="Application Received! üéâ">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Success Message</label>
                            <textarea class="form-input" id="appSettingsSuccessMsg" rows="3" placeholder="We'll review your application and get back to you within 24-48 hours..."></textarea>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top: 20px;">
                    <div class="card-title"><span>üìã</span> Custom Form Fields</div>
                    <p style="color: var(--text-muted); margin-bottom: 20px;">Add brand-specific questions (in addition to standard fields)</p>
                    
                    <div id="customFieldsList" style="display: flex; flex-direction: column; gap: 12px; margin-bottom: 16px;">
                        <!-- Custom fields will be rendered here -->
                    </div>
                    
                    <button class="btn" onclick="addCustomField()">+ Add Custom Field</button>
                </div>
                
                <div class="card" style="margin-top: 20px;">
                    <div class="card-title"><span>üîê</span> Discord OAuth</div>
                    
                    <div class="form-group">
                        <label class="form-label">Discord Client ID</label>
                        <input type="text" class="form-input" id="appSettingsDiscordClientId" placeholder="123456789012345678" style="font-family: 'Space Mono', monospace; font-size: 0.85rem; max-width: 400px;">
                        <small style="color: var(--text-muted); display: block; margin-top: 4px;">
                            From <a href="https://discord.com/developers/applications" target="_blank" style="color: var(--accent);">Discord Developer Portal</a>. Leave blank to use default.
                        </small>
                    </div>
                </div>
                
                <div style="display: flex; gap: 12px; margin-top: 24px; padding: 20px; background: var(--bg-secondary); border-radius: 12px;">
                    <button class="btn btn-primary" onclick="saveBrandAppSettings()">üíæ Save Settings</button>
                    <button class="btn" onclick="resetBrandAppSettings()">üîÑ Reset to Default</button>
                    <div id="appSettingsStatus" style="margin-left: 16px; display: flex; align-items: center;"></div>
                </div>

                <div class="card" style="margin-top: 24px;">
                    <div class="card-title"><span>üîó</span> Quick Links</div>
                    <p style="color: var(--text-muted); margin-bottom: 16px;">Share these links with creators to direct them to brand-specific applications</p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 12px;" id="brandQuickLinks">
                        <!-- Generated dynamically -->
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== PORTAL CONFIG ==================== -->
        <div id="view-portalconfig" class="view-section">
            <div class="header">
                <div>
                    <h1 class="header-title">üéõÔ∏è Portal Config</h1>
                    <p class="header-subtitle">Manage creator portal content</p>
                </div>
            </div>

            <!-- Sub-tabs -->
            <div class="period-selector" style="margin-bottom: 20px;">
                <button class="period-btn active" data-tab="campaigns" onclick="switchConfigTab('campaigns')">üöÄ Campaigns</button>
                <button class="period-btn" data-tab="faq" onclick="switchConfigTab('faq')">‚ùì FAQ</button>
                <button class="period-btn" data-tab="resources" onclick="switchConfigTab('resources')">üì• Resources</button>
            </div>

            <!-- CAMPAIGNS TAB -->
            <div id="configCampaignsTab" class="config-tab active">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><span>üöÄ</span> Brand Campaigns</div>
                        <button class="btn btn-primary" onclick="openAddCampaignModal()">+ Add Campaign</button>
                    </div>
                    <p style="color: var(--text-secondary); margin-bottom: 16px;">
                        Configure campaigns shown in "Join More Brands" on the creator portal.
                    </p>
                    
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th style="width: 40px;"></th>
                                    <th>Brand</th>
                                    <th>Name</th>
                                    <th>Commission</th>
                                    <th>Discord</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="campaignsTableBody">
                                <tr>
                                    <td colspan="7" style="text-align: center; color: var(--text-muted); padding: 20px;">
                                        Loading campaigns...
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- FAQ TAB -->
            <div id="configFaqTab" class="config-tab" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><span>‚ùì</span> FAQ Items</div>
                        <button class="btn btn-primary" onclick="openAddFaqModal()">+ Add FAQ</button>
                    </div>
                    <p style="color: var(--text-secondary); margin-bottom: 16px;">
                        Manage frequently asked questions shown on the Learn tab.
                    </p>
                    
                    <div id="faqItemsList">
                        <div style="text-align: center; color: var(--text-muted); padding: 20px;">
                            Loading FAQ items...
                        </div>
                    </div>
                </div>
            </div>

            <!-- RESOURCES TAB -->
            <div id="configResourcesTab" class="config-tab" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><span>üì•</span> Resources</div>
                        <button class="btn btn-primary" onclick="openAddResourceModal()">+ Add Resource</button>
                    </div>
                    <p style="color: var(--text-secondary); margin-bottom: 16px;">
                        Manage downloadable files like brand guidelines, product sheets, and sample scripts.
                    </p>
                    
                    <div id="resourcesList">
                        <div style="text-align: center; color: var(--text-muted); padding: 20px;">
                            Loading resources...
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Campaign Modal -->
        <div id="campaignModal" class="modal" style="display: none;">
            <div class="modal-content" style="max-width: 500px;">
                <div class="modal-header">
                    <h3 id="campaignModalTitle">Add Campaign</h3>
                    <button class="modal-close" onclick="closeCampaignModal()">&times;</button>
                </div>
                <form id="campaignForm" onsubmit="saveCampaign(event)">
                    <input type="hidden" id="campaignId">
                    <div class="form-group">
                        <label class="form-label">Brand Key *</label>
                        <input type="text" class="form-input" id="campaignBrand" placeholder="e.g., physicians_choice" required>
                        <small style="color: var(--text-muted);">Lowercase, use underscores. Must match brand key in system.</small>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Display Name *</label>
                        <input type="text" class="form-input" id="campaignName" placeholder="e.g., Physicians Choice" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Description</label>
                        <input type="text" class="form-input" id="campaignDescription" placeholder="e.g., Probiotics & digestive health">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Commission Text *</label>
                        <input type="text" class="form-input" id="campaignCommission" placeholder="e.g., 10-15% commission" required>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                        <div class="form-group">
                            <label class="form-label">Icon (emoji)</label>
                            <input type="text" class="form-input" id="campaignIcon" placeholder="e.g., ü©∫" maxlength="4">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Color</label>
                            <input type="color" class="form-input" id="campaignColor" value="#3b82f6" style="height: 42px; padding: 4px;">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Application URL</label>
                        <input type="text" class="form-input" id="campaignApplyUrl" placeholder="e.g., apply.html?brand=physicians_choice">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Discord Invite URL</label>
                        <input type="text" class="form-input" id="campaignDiscordUrl" placeholder="e.g., https://discord.gg/yourserver">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Display Order</label>
                        <input type="number" class="form-input" id="campaignOrder" value="0" min="0">
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="campaignActive" checked> Active (visible to creators)
                        </label>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn" onclick="closeCampaignModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">üíæ Save Campaign</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- FAQ Modal -->
        <div id="faqModal" class="modal" style="display: none;">
            <div class="modal-content" style="max-width: 500px;">
                <div class="modal-header">
                    <h3 id="faqModalTitle">Add FAQ</h3>
                    <button class="modal-close" onclick="closeFaqModal()">&times;</button>
                </div>
                <form id="faqForm" onsubmit="saveFaq(event)">
                    <input type="hidden" id="faqId">
                    <div class="form-group">
                        <label class="form-label">Icon (emoji)</label>
                        <input type="text" class="form-input" id="faqIcon" placeholder="e.g., üí∞" maxlength="4">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Question *</label>
                        <input type="text" class="form-input" id="faqQuestion" placeholder="e.g., How do I get paid?" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Answer *</label>
                        <textarea class="form-input" id="faqAnswer" rows="4" placeholder="Enter the answer..." required></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Display Order</label>
                        <input type="number" class="form-input" id="faqOrder" value="0" min="0">
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="faqActive" checked> Active (visible to creators)
                        </label>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn" onclick="closeFaqModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">üíæ Save FAQ</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Resource Modal -->
        <div id="resourceModal" class="modal" style="display: none;">
            <div class="modal-content" style="max-width: 500px;">
                <div class="modal-header">
                    <h3 id="resourceModalTitle">Add Resource</h3>
                    <button class="modal-close" onclick="closeResourceModal()">&times;</button>
                </div>
                <form id="resourceForm" onsubmit="saveResource(event)">
                    <input type="hidden" id="resourceId">
                    <div class="form-group">
                        <label class="form-label">Title *</label>
                        <input type="text" class="form-input" id="resourceTitle" placeholder="e.g., Brand Guidelines PDF" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Description</label>
                        <input type="text" class="form-input" id="resourceDescription" placeholder="e.g., Official brand colors, fonts, and usage rules">
                    </div>
                    <div class="form-group">
                        <label class="form-label">File URL *</label>
                        <input type="url" class="form-input" id="resourceFileUrl" placeholder="https://..." required>
                        <small style="color: var(--text-muted);">Upload to Google Drive/Dropbox and paste the public link</small>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                        <div class="form-group">
                            <label class="form-label">Icon (emoji)</label>
                            <input type="text" class="form-input" id="resourceIcon" placeholder="e.g., üìÑ" maxlength="4">
                        </div>
                        <div class="form-group">
                            <label class="form-label">File Type</label>
                            <select class="form-input" id="resourceFileType">
                                <option value="pdf">PDF</option>
                                <option value="doc">Document</option>
                                <option value="image">Image</option>
                                <option value="video">Video</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Brand (optional)</label>
                        <select class="form-input" id="resourceBrand">
                            <option value="">All Brands</option>
                            <option value="catakor">Cata-Kor</option>
                            <option value="jiyu">JiYu</option>
                            <option value="physicians_choice">Physicians Choice</option>
                            <option value="peach_slices">Peach Slices</option>
                            <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                        </select>
                        <small style="color: var(--text-muted);">Leave empty to show for all brands</small>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Display Order</label>
                        <input type="number" class="form-input" id="resourceOrder" value="0" min="0">
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="resourceActive" checked> Active (visible to creators)
                        </label>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn" onclick="closeResourceModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">üíæ Save Resource</button>
                    </div>
                </form>
            </div>
        </div>

        <div id="view-payments" class="view-section">
            <!-- Loading Overlay -->
            <div id="payments-loading" class="loading-overlay hidden">
                <div class="loading-spinner-container">
                    <div class="spinner-ring spinner-ring-pulse"></div>
                    <div class="spinner-ring spinner-ring-active"></div>
                    <div class="loading-icon">üí∞</div>
                </div>
                <div class="loading-text">Loading payments...</div>
                <div class="loading-subtext">Processing payment data</div>
                <div class="loading-dots">
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                </div>
            </div>
            <div class="header">
                <div>
                    <h1 class="header-title">üí≥ Payment Tracking</h1>
                    <p class="header-subtitle">Track creator retainers, top-ups, and bonuses</p>
                </div>
                <div class="header-actions">
                    <select id="paymentsPeriodFilter" onchange="loadPaymentsView()">
                        <!-- Populated by JS -->
                    </select>
                    <select id="paymentsBrandFilter" onchange="loadPaymentsView()">
                        <option value="all">All Brands</option>
                        <option value="catakor">Cata-Kor</option>
                        <option value="jiyu">JiYu</option>
                        <option value="physicians_choice">Physicians Choice</option>
                        <option value="peach_slices">Peach Slices</option>
                        <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                    </select>
                    <button class="btn btn-success" onclick="openAddPaymentModal()">‚ûï Add Payment</button>
                    <button class="btn btn-primary" onclick="openMonthlyReportModal()">üìä Monthly Report</button>
                    <button class="btn" onclick="openForecastModal()" style="background: var(--purple-dim); color: var(--purple); border: 1px solid var(--purple);">üìà Spend Forecast</button>
                </div>
            </div>

            <!-- Stats -->
            <div class="stats-grid">
                <div class="stat-card highlight" onclick="filterPaymentsByStatus('pending')" style="cursor: pointer;">
                    <div class="stat-header"><div class="stat-icon yellow">‚è≥</div></div>
                    <div class="stat-value" id="paymentsPendingTotal">$0</div>
                    <div class="stat-label">Pending Approval</div>
                </div>
                <div class="stat-card" onclick="filterPaymentsByStatus('approved')" style="cursor: pointer;">
                    <div class="stat-header"><div class="stat-icon blue">‚úì</div></div>
                    <div class="stat-value" id="paymentsApprovedTotal">$0</div>
                    <div class="stat-label">Ready to Pay</div>
                </div>
                <div class="stat-card" onclick="filterPaymentsByStatus('paid')" style="cursor: pointer;">
                    <div class="stat-header"><div class="stat-icon green">‚úÖ</div></div>
                    <div class="stat-value" id="paymentsPaidTotal">$0</div>
                    <div class="stat-label">Paid This Period</div>
                </div>
                <div class="stat-card">
                    <div class="stat-header"><div class="stat-icon purple">üìã</div></div>
                    <div class="stat-value" id="paymentsCount">0</div>
                    <div class="stat-label">Total Records</div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div style="display: flex; gap: 12px; margin-bottom: 24px; flex-wrap: wrap;">
                <button class="btn btn-sm ${''}" onclick="setPaymentsStatusFilter('all')" id="filterAll">All</button>
                <button class="btn btn-sm" onclick="setPaymentsStatusFilter('pending')" id="filterPending">‚è≥ Pending</button>
                <button class="btn btn-sm" onclick="setPaymentsStatusFilter('approved')" id="filterApproved">‚úì Approved</button>
                <button class="btn btn-sm" onclick="setPaymentsStatusFilter('paid')" id="filterPaid">‚úÖ Paid</button>
                <button class="btn btn-sm" onclick="setPaymentsStatusFilter('rejected')" id="filterRejected">‚ùå Rejected</button>
                <div style="flex: 1;"></div>
                <button class="btn btn-sm btn-success" onclick="bulkApproveSelected()">‚úì Approve Selected</button>
                <button class="btn btn-sm" style="background: var(--success); color: white;" onclick="bulkMarkPaidSelected()">‚úÖ Mark Paid</button>
            </div>

            <!-- Payments Table -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title"><span>üí∞</span> Payment Records</div>
                    <div style="display: flex; gap: 8px; align-items: center;">
                        <input type="text" id="paymentsSearchInput" placeholder="Search creator..." 
                            style="padding: 6px 12px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 6px; color: var(--text-primary); width: 180px;"
                            onkeyup="filterPaymentsTable()">
                        <button class="btn btn-sm" onclick="exportPaymentsCSV()">üì• Export</button>
                    </div>
                </div>
                <div class="card-body no-padding">
                    <div class="table-container" style="max-height: 500px; overflow-y: auto;">
                        <table>
                            <thead style="position: sticky; top: 0; background: var(--bg-card); z-index: 1;">
                                <tr>
                                    <th style="width: 40px;"><input type="checkbox" id="selectAllPayments" onchange="toggleAllPayments(this)"></th>
                                    <th>Creator</th>
                                    <th>Brand</th>
                                    <th>Type</th>
                                    <th style="text-align: right;">Amount</th>
                                    <th>Period</th>
                                    <th style="text-align: center;">ROI</th>
                                    <th>Status</th>
                                    <th>Dates</th>
                                    <th style="text-align: right;">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="paymentsTableBody">
                                <tr><td colspan="10" style="text-align: center; padding: 40px; color: var(--text-muted);">Loading...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Creators on Retainer (Quick Reference) -->
            <div class="card" style="margin-top: 24px;">
                <div class="card-header">
                    <div class="card-title"><span>üìù</span> Creators on Retainer (Quick Claim)</div>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <input type="text" id="quickClaimSearch" placeholder="Search creator..." 
                            oninput="filterQuickClaimTable()"
                            style="padding: 6px 12px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 6px; color: var(--text-primary); font-size: 0.85rem; width: 200px;">
                        <span style="font-size: 0.8rem; color: var(--text-muted);">Click to add retainer claim</span>
                    </div>
                </div>
                <div class="card-body" id="retainerCreatorsList" style="max-height: 400px; overflow-y: auto;">
                    <div style="color: var(--text-muted);">Loading...</div>
                </div>
            </div>
        </div>

        <!-- ==================== COMMISSIONS ==================== -->
        <div id="view-commissions" class="view-section">
            <!-- Loading Overlay -->
            <div id="commissions-loading" class="loading-overlay hidden">
                <div class="loading-spinner-container">
                    <div class="spinner-ring spinner-ring-pulse"></div>
                    <div class="spinner-ring spinner-ring-active"></div>
                    <div class="loading-icon">üí∞</div>
                </div>
                <div class="loading-text">Loading commissions...</div>
                <div class="loading-subtext">Processing data</div>
                <div class="loading-dots">
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                </div>
            </div>
            
            <div class="view-header">
                <div class="header-left">
                    <h1 class="header-title">üí∞ 1% Creator Commissions</h1>
                    <p class="header-subtitle">Calculate monthly commissions from affiliate orders</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-secondary" onclick="showBaselineRatesModal()">‚öôÔ∏è Baseline Rates</button>
                    <button class="btn btn-primary" onclick="showUploadCommissionsModal()">üì§ Upload Orders File</button>
                </div>
            </div>
            
            <!-- Tabs -->
            <div style="display: flex; gap: 8px; margin-bottom: 20px; border-bottom: 1px solid var(--border); padding-bottom: 12px;">
                <button class="btn btn-sm active" id="commTabCalculator" onclick="switchCommissionsTab('calculator')">üßÆ Calculator</button>
                <button class="btn btn-sm" id="commTabHistory" onclick="switchCommissionsTab('history')">üìú History</button>
            </div>
            
            <!-- Calculator Tab -->
            <div id="commissions-calculator" class="commissions-tab-content">
                <!-- Upload Area -->
                <div id="commissionsUploadArea" style="background: var(--bg-card); border: 2px dashed var(--border); border-radius: 12px; padding: 40px; text-align: center; margin-bottom: 24px;">
                    <div style="font-size: 3rem; margin-bottom: 12px;">üìÑ</div>
                    <div style="font-size: 1.1rem; font-weight: 600; margin-bottom: 8px;">Upload Affiliate Orders File</div>
                    <div style="color: var(--text-muted); margin-bottom: 16px;">CSV file from TikTok Shop (creator_order_all_*.csv)</div>
                    <button class="btn btn-primary" onclick="showUploadCommissionsModal()">üì§ Select File</button>
                </div>
                
                <!-- Results Section (hidden initially) -->
                <div id="commissionsResults" style="display: none;">
                    <!-- Summary Cards -->
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 24px;">
                        <div style="background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 16px; text-align: center;">
                            <div style="font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 4px;">Period</div>
                            <div id="commPeriod" style="font-size: 1.1rem; font-weight: 700;">-</div>
                        </div>
                        <div style="background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 16px; text-align: center;">
                            <div style="font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 4px;">Creators (1%)</div>
                            <div id="commCreatorCount" style="font-size: 1.5rem; font-weight: 700; color: var(--accent);">0</div>
                        </div>
                        <div style="background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 16px; text-align: center;">
                            <div style="font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 4px;">Total GMV (1%)</div>
                            <div id="commTotalGmv" style="font-size: 1.5rem; font-weight: 700;">$0</div>
                        </div>
                        <div style="background: linear-gradient(135deg, var(--bg-card), rgba(34, 197, 94, 0.1)); border: 1px solid var(--success); border-radius: 12px; padding: 16px; text-align: center;">
                            <div style="font-size: 0.75rem; color: var(--success); text-transform: uppercase; margin-bottom: 4px;">Total Commission</div>
                            <div id="commTotalCommission" style="font-size: 1.5rem; font-weight: 700; color: var(--success);">$0</div>
                        </div>
                    </div>
                    
                    <!-- Actions -->
                    <div style="display: flex; gap: 12px; margin-bottom: 16px; justify-content: space-between; align-items: center;">
                        <div style="display: flex; gap: 12px;">
                            <input type="text" id="commSearchInput" placeholder="Search creators..." onkeyup="filterCommissionsTable()" style="padding: 8px 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg-secondary); color: var(--text-primary); width: 250px;">
                            <select id="commBrandFilter" onchange="filterCommissionsTable()" style="padding: 8px 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg-secondary); color: var(--text-primary);">
                                <option value="all">All Brands</option>
                            </select>
                        </div>
                        <div style="display: flex; gap: 8px;">
                            <button class="btn btn-secondary btn-sm" onclick="exportCommissionsCSV()">üì• Export CSV</button>
                            <button class="btn btn-success btn-sm" onclick="saveCommissionsToDatabase()">üíæ Save to Database</button>
                        </div>
                    </div>
                    
                    <!-- Results Table -->
                    <div style="background: var(--bg-card); border-radius: 12px; border: 1px solid var(--border); overflow: hidden;">
                        <table class="data-table" style="width: 100%;">
                            <thead>
                                <tr>
                                    <th style="cursor: pointer;" onclick="sortCommissionsTable('creator')">Creator ‚Üï</th>
                                    <th>Brand</th>
                                    <th style="text-align: right; cursor: pointer;" onclick="sortCommissionsTable('orders')">Orders ‚Üï</th>
                                    <th style="text-align: right; cursor: pointer;" onclick="sortCommissionsTable('standardGmv')">Standard GMV ‚Üï</th>
                                    <th style="text-align: right; cursor: pointer;" onclick="sortCommissionsTable('shopAdsGmv')">Shop Ads GMV ‚Üï</th>
                                    <th style="text-align: right; cursor: pointer;" onclick="sortCommissionsTable('commission')">Commission ‚Üï</th>
                                </tr>
                            </thead>
                            <tbody id="commissionsTableBody">
                                <tr><td colspan="6" style="text-align: center; padding: 40px; color: var(--text-muted);">Upload a file to see results</td></tr>
                            </tbody>
                            <tfoot id="commissionsTableFoot" style="display: none;">
                                <tr style="background: var(--bg-secondary); font-weight: 700;">
                                    <td>TOTAL</td>
                                    <td></td>
                                    <td id="commFootOrders" style="text-align: right;">0</td>
                                    <td id="commFootStandardGmv" style="text-align: right;">$0</td>
                                    <td id="commFootShopAdsGmv" style="text-align: right;">$0</td>
                                    <td id="commFootCommission" style="text-align: right; color: var(--success);">$0</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- History Tab -->
            <div id="commissions-history" class="commissions-tab-content" style="display: none;">
                <div style="display: flex; gap: 12px; margin-bottom: 16px;">
                    <select id="historyBrandFilter" onchange="loadCommissionsHistory()" style="padding: 8px 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg-secondary); color: var(--text-primary);">
                        <option value="all">All Brands</option>
                        <option value="jiyu">JiYu</option>
                        <option value="catakor">Cata-Kor</option>
                        <option value="physicians_choice">Physicians Choice</option>
                        <option value="peach_slices">Peach Slices</option>
                        <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                    </select>
                    <select id="historyPeriodFilter" onchange="loadCommissionsHistory()" style="padding: 8px 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg-secondary); color: var(--text-primary);">
                        <option value="all">All Periods</option>
                    </select>
                </div>
                
                <div style="background: var(--bg-card); border-radius: 12px; border: 1px solid var(--border); overflow: hidden;">
                    <table class="data-table" style="width: 100%;">
                        <thead>
                            <tr>
                                <th>Period</th>
                                <th>Brand</th>
                                <th>Creator</th>
                                <th style="text-align: right;">Orders</th>
                                <th style="text-align: right;">Total GMV</th>
                                <th style="text-align: right;">Commission</th>
                                <th style="text-align: right;">Calculated</th>
                            </tr>
                        </thead>
                        <tbody id="commissionsHistoryBody">
                            <tr><td colspan="7" style="text-align: center; padding: 40px; color: var(--text-muted);">No commission history found</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- ==================== ACTIVITY LOG ==================== -->
        <div id="view-activity" class="view-section">
            <!-- Loading Overlay -->
            <div id="activity-loading" class="loading-overlay hidden">
                <div class="loading-spinner-container">
                    <div class="spinner-ring spinner-ring-pulse"></div>
                    <div class="spinner-ring spinner-ring-active"></div>
                    <div class="loading-icon">üìú</div>
                </div>
                <div class="loading-text">Loading activity...</div>
                <div class="loading-subtext">Fetching activity log</div>
                <div class="loading-dots">
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                </div>
            </div>
            <div class="header">
                <div>
                    <h1 class="header-title">üìú Activity Log</h1>
                    <p class="header-subtitle">Track all system activities</p>
                </div>
                <div class="header-actions">
                    <select id="activityTypeFilter" onchange="loadActivityData()">
                        <option value="all">All Activities</option>
                        <option value="upload">Uploads</option>
                        <option value="payment">Payments</option>
                        <option value="edit">Edits</option>
                        <option value="note">Notes</option>
                        <option value="login">Logins</option>
                        <option value="export">Exports</option>
                    </select>
                    <select id="activityBrandFilter" onchange="loadActivityData()">
                        <option value="all">All Brands</option>
                        <option value="catakor">Cata-Kor</option>
                        <option value="jiyu">JiYu</option>
                        <option value="physicians_choice">Physicians Choice</option>
                        <option value="peach_slices">Peach Slices</option>
                        <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                    </select>
                    <button class="btn" onclick="loadActivityData()">üîÑ Refresh</button>
                </div>
            </div>

            <div class="card">
                <div class="card-body no-padding">
                    <div id="activityList" style="max-height: 70vh; overflow-y: auto;">
                        <div style="text-align: center; padding: 40px; color: var(--text-muted);">Loading activity...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== APPLICATION FUNNELS ==================== -->
        <div id="view-funnels" class="view-section">
            <div class="header">
                <div>
                    <h1 class="header-title">üöÄ Application Funnels</h1>
                    <p class="header-subtitle">Build custom creator application forms</p>
                </div>
                <div class="header-actions">
                    <button class="btn" onclick="switchView('applications')">‚Üê Back to Applications</button>
                    <button class="btn btn-primary" onclick="openFunnelBuilder()">
                        <span>‚ûï</span> Create Funnel
                    </button>
                </div>
            </div>

            <!-- Funnels Grid -->
            <div id="funnelsGrid" class="funnels-grid">
                <div style="text-align: center; padding: 60px; color: var(--text-muted);">Loading funnels...</div>
            </div>
        </div>

        <!-- Funnel Builder Modal - Revamped -->
        <div id="funnelBuilderModal" class="modal-overlay">
            <div class="modal funnel-builder-modal" style="max-width: 1400px; height: 92vh; display: flex; flex-direction: column;">
                <div class="modal-header" style="flex-shrink: 0; display: flex; justify-content: space-between; align-items: center; padding: 16px 24px; border-bottom: 1px solid var(--border);">
                    <div style="display: flex; align-items: center; gap: 16px;">
                        <button class="btn btn-sm" onclick="closeFunnelBuilder()">‚Üê Back</button>
                        <div>
                            <h2 id="funnelBuilderTitle" style="font-size: 1.1rem; margin: 0;">Create Application Funnel</h2>
                            <div id="funnelBuilderSubtitle" style="font-size: 0.85rem; color: var(--text-muted);">Design your creator application form</div>
                        </div>
                    </div>
                    <div style="display: flex; gap: 12px; align-items: center;">
                        <span id="funnelSaveStatus" style="font-size: 0.85rem; color: var(--text-muted);"></span>
                        <button class="btn" onclick="previewFunnelFullPage()">üëÅÔ∏è Preview</button>
                        <button class="btn btn-primary" onclick="saveFunnel()">üíæ Save</button>
                    </div>
                </div>
                
                <div class="modal-body" style="flex: 1; overflow: hidden; padding: 0; display: flex;">
                    <!-- Left Sidebar - Block Palette -->
                    <div class="funnel-sidebar" style="width: 260px; background: var(--bg-secondary); border-right: 1px solid var(--border); display: flex; flex-direction: column;">
                        <div style="padding: 16px; border-bottom: 1px solid var(--border);">
                            <div style="font-weight: 600; margin-bottom: 12px;">üì¶ Drag Blocks</div>
                            <div class="field-blocks-palette">
                                <div class="draggable-block" draggable="true" data-type="text" ondragstart="dragFieldStart(event, 'text')">
                                    <span class="block-icon">Aa</span>
                                    <span>Text Input</span>
                                </div>
                                <div class="draggable-block" draggable="true" data-type="email" ondragstart="dragFieldStart(event, 'email')">
                                    <span class="block-icon">üìß</span>
                                    <span>Email</span>
                                </div>
                                <div class="draggable-block" draggable="true" data-type="tel" ondragstart="dragFieldStart(event, 'tel')">
                                    <span class="block-icon">üì±</span>
                                    <span>Phone</span>
                                </div>
                                <div class="draggable-block" draggable="true" data-type="tiktok" ondragstart="dragFieldStart(event, 'tiktok')">
                                    <span class="block-icon">üéµ</span>
                                    <span>TikTok Handle</span>
                                </div>
                                <div class="draggable-block" draggable="true" data-type="select" ondragstart="dragFieldStart(event, 'select')">
                                    <span class="block-icon">‚ñº</span>
                                    <span>Dropdown</span>
                                </div>
                                <div class="draggable-block" draggable="true" data-type="textarea" ondragstart="dragFieldStart(event, 'textarea')">
                                    <span class="block-icon">üìù</span>
                                    <span>Long Text</span>
                                </div>
                                <div class="draggable-block" draggable="true" data-type="number" ondragstart="dragFieldStart(event, 'number')">
                                    <span class="block-icon">#</span>
                                    <span>Number</span>
                                </div>
                                <div class="draggable-block" draggable="true" data-type="url" ondragstart="dragFieldStart(event, 'url')">
                                    <span class="block-icon">üîó</span>
                                    <span>URL</span>
                                </div>
                                <div class="draggable-block" draggable="true" data-type="checkbox" ondragstart="dragFieldStart(event, 'checkbox')">
                                    <span class="block-icon">‚òëÔ∏è</span>
                                    <span>Checkbox</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Funnel Settings Accordion -->
                        <div style="flex: 1; overflow-y: auto;">
                            <div class="settings-section">
                                <div class="settings-section-header" onclick="toggleSettingsSection('basic')">
                                    <span>‚öôÔ∏è Basic Settings</span>
                                    <span class="settings-toggle">‚ñº</span>
                                </div>
                                <div id="settingsSection-basic" class="settings-section-content show">
                                    <div class="form-group-sm">
                                        <label>Funnel Name</label>
                                        <input type="text" id="funnelName" class="form-input" placeholder="e.g., Toplux Creators" oninput="autoGenerateSlug()">
                                    </div>
                                    <div class="form-group-sm">
                                        <label>URL Slug</label>
                                        <div style="display: flex; align-items: center; gap: 4px;">
                                            <span style="color: var(--text-muted); font-size: 0.85rem;">/apply?funnel=</span>
                                            <input type="text" id="funnelSlug" class="form-input" placeholder="toplux" style="flex: 1;">
                                        </div>
                                    </div>
                                    <div class="form-group-sm">
                                        <label>Brand</label>
                                        <select id="funnelBrand" class="form-input" onchange="updateFunnelPreview()">
                                            <option value="">All Brands (Generic)</option>
                                            <option value="catakor">Cata-Kor</option>
                                            <option value="jiyu">JiYu</option>
                                            <option value="physicians_choice">Physicians Choice</option>
                                            <option value="peach_slices">Peach Slices</option>
                                            <option value="yerba_magic">Yerba Magic</option>
                                            <option value="toplux">Toplux Nutrition</option>
                                        </select>
                                    </div>
                                    <div class="form-group-sm">
                                        <label>Status</label>
                                        <select id="funnelStatus" class="form-input">
                                            <option value="draft">üü° Draft</option>
                                            <option value="active">üü¢ Active</option>
                                            <option value="archived">‚ö™ Archived</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="settings-section">
                                <div class="settings-section-header" onclick="toggleSettingsSection('branding')">
                                    <span>üé® Branding</span>
                                    <span class="settings-toggle">‚ñº</span>
                                </div>
                                <div id="settingsSection-branding" class="settings-section-content">
                                    <div class="form-group-sm">
                                        <label>Primary Color</label>
                                        <div style="display: flex; gap: 8px;">
                                            <input type="color" id="funnelPrimaryColor" value="#f5c518" style="width: 44px; height: 36px; border: none; cursor: pointer; border-radius: 6px;" onchange="document.getElementById('funnelPrimaryColorText').value = this.value; updateFunnelPreview();">
                                            <input type="text" id="funnelPrimaryColorText" class="form-input" value="#f5c518" style="flex: 1; font-family: monospace;" oninput="document.getElementById('funnelPrimaryColor').value = this.value; updateFunnelPreview();">
                                        </div>
                                    </div>
                                    <div class="form-group-sm">
                                        <label>Header Title</label>
                                        <input type="text" id="funnelHeaderTitle" class="form-input" placeholder="Join Our Creator Team" oninput="updateFunnelPreview()">
                                    </div>
                                    <div class="form-group-sm">
                                        <label>Header Subtitle</label>
                                        <input type="text" id="funnelHeaderSubtitle" class="form-input" placeholder="Partner with us and earn" oninput="updateFunnelPreview()">
                                    </div>
                                    <div class="form-group-sm">
                                        <label>Logo URL</label>
                                        <input type="url" id="funnelLogoUrl" class="form-input" placeholder="https://..." oninput="updateFunnelPreview()">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="settings-section">
                                <div class="settings-section-header" onclick="toggleSettingsSection('videos')">
                                    <span>üé¨ Videos</span>
                                    <span class="settings-toggle">‚ñº</span>
                                </div>
                                <div id="settingsSection-videos" class="settings-section-content">
                                    <div class="form-group-sm">
                                        <label>Welcome Video</label>
                                        <input type="url" id="funnelWelcomeVideo" class="form-input" placeholder="YouTube or direct URL">
                                    </div>
                                    <div class="form-group-sm">
                                        <label>Thank You Video</label>
                                        <input type="url" id="funnelThankYouVideo" class="form-input" placeholder="YouTube or direct URL">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="settings-section">
                                <div class="settings-section-header" onclick="toggleSettingsSection('success')">
                                    <span>‚úÖ Success Page</span>
                                    <span class="settings-toggle">‚ñº</span>
                                </div>
                                <div id="settingsSection-success" class="settings-section-content">
                                    <div class="form-group-sm">
                                        <label>Success Title</label>
                                        <input type="text" id="funnelSuccessTitle" class="form-input" placeholder="Application Received! üéâ">
                                    </div>
                                    <div class="form-group-sm">
                                        <label>Success Message</label>
                                        <textarea id="funnelSuccessMessage" class="form-input" rows="2" placeholder="We'll review your application..."></textarea>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="settings-section">
                                <div class="settings-section-header" onclick="toggleSettingsSection('discord')">
                                    <span>üí¨ Discord OAuth</span>
                                    <span class="settings-toggle">‚ñº</span>
                                </div>
                                <div id="settingsSection-discord" class="settings-section-content">
                                    <div class="form-group-sm">
                                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                            <input type="checkbox" id="funnelDiscordOAuth" style="width: 18px; height: 18px;" onchange="toggleDiscordSettings()">
                                            <span>Enable Discord Connect</span>
                                        </label>
                                    </div>
                                    <div id="discordOAuthSettings" style="display: none;">
                                        <div class="form-group-sm">
                                            <label>Discord Client ID</label>
                                            <input type="text" id="funnelDiscordClientId" class="form-input" placeholder="1234567890123456789">
                                        </div>
                                        <div class="form-group-sm">
                                            <label>Discord Server Link</label>
                                            <input type="url" id="funnelDiscordLink" class="form-input" placeholder="https://discord.gg/...">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Center - Form Builder Canvas -->
                    <div class="funnel-canvas" style="flex: 1; display: flex; flex-direction: column; background: var(--bg-primary);">
                        <div style="padding: 12px 20px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center;">
                            <div style="font-weight: 600;">üìã Form Fields</div>
                            <div style="display: flex; gap: 8px;">
                                <button class="btn btn-sm" onclick="addStep()">+ Add Step</button>
                            </div>
                        </div>
                        
                        <!-- Steps Tabs -->
                        <div id="stepsTabs" style="display: flex; gap: 4px; padding: 12px 20px; border-bottom: 1px solid var(--border); overflow-x: auto;">
                            <!-- Steps will be rendered here -->
                        </div>
                        
                        <!-- Fields Drop Zone -->
                        <div id="fieldsDropZone" class="fields-drop-zone" ondrop="dropField(event)" ondragover="dragOverField(event)" ondragleave="dragLeaveField(event)">
                            <div id="fieldsList" class="fields-list-new">
                                <!-- Fields will be rendered here -->
                            </div>
                            <div id="dropHint" class="drop-hint">
                                <div style="font-size: 2rem; margin-bottom: 8px;">üì¶</div>
                                <div>Drag blocks here to add fields</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Right - Live Preview -->
                    <div class="funnel-preview-panel" style="width: 380px; background: #1a1a2e; border-left: 1px solid var(--border); display: flex; flex-direction: column;">
                        <div style="padding: 12px 16px; border-bottom: 1px solid rgba(255,255,255,0.1); display: flex; justify-content: space-between; align-items: center;">
                            <span style="font-weight: 600; color: #fff;">üì± Live Preview</span>
                            <div style="display: flex; gap: 8px;">
                                <button class="preview-device-btn active" onclick="setPreviewDevice('mobile')" title="Mobile">üì±</button>
                                <button class="preview-device-btn" onclick="setPreviewDevice('desktop')" title="Desktop">üñ•Ô∏è</button>
                            </div>
                        </div>
                        <div id="funnelPreviewContainer" style="flex: 1; overflow-y: auto; display: flex; justify-content: center; padding: 20px;">
                            <div id="funnelPreview" class="preview-mobile">
                                <!-- Preview will be rendered here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
            </div>
        </div>

        <!-- Field Editor Modal -->
        <div id="fieldEditorModal" class="modal-overlay">
            <div class="modal" style="max-width: 500px;">
                <div class="modal-header">
                    <h2>Edit Field</h2>
                    <button class="modal-close" onclick="closeFieldEditor()">&times;</button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="editingFieldId">
                    <div class="form-group">
                        <label class="form-label">Label</label>
                        <input type="text" id="fieldLabel" class="form-input" placeholder="Field Label">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Field ID (for database)</label>
                        <input type="text" id="fieldId" class="form-input" placeholder="field_id">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Type</label>
                        <select id="fieldType" class="form-input" onchange="toggleFieldOptions()">
                            <option value="text">Text</option>
                            <option value="email">Email</option>
                            <option value="tel">Phone</option>
                            <option value="url">URL</option>
                            <option value="number">Number</option>
                            <option value="select">Dropdown</option>
                            <option value="textarea">Text Area</option>
                            <option value="checkbox">Checkbox</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Placeholder</label>
                        <input type="text" id="fieldPlaceholder" class="form-input" placeholder="Placeholder text">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Step</label>
                        <select id="fieldStep" class="form-input">
                            <!-- Populated dynamically -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Width</label>
                        <select id="fieldWidth" class="form-input">
                            <option value="full">Full Width</option>
                            <option value="half">Half Width</option>
                        </select>
                    </div>
                    <div class="form-group" id="fieldOptionsGroup" style="display: none;">
                        <label class="form-label">Options (one per line: value|label)</label>
                        <textarea id="fieldOptions" class="form-input" rows="5" placeholder="option1|Option 1&#10;option2|Option 2"></textarea>
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 12px; cursor: pointer;">
                            <input type="checkbox" id="fieldRequired" style="width: 20px; height: 20px;">
                            <span>Required Field</span>
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn" onclick="closeFieldEditor()">Cancel</button>
                    <button class="btn btn-primary" onclick="saveFieldEdit()">Save Field</button>
                </div>
            </div>
        </div>

        <!-- User Management View -->
        <div id="view-users" class="view-section">
            <!-- Loading Overlay -->
            <div id="users-loading" class="loading-overlay hidden">
                <div class="loading-spinner-container">
                    <div class="spinner-ring spinner-ring-pulse"></div>
                    <div class="spinner-ring spinner-ring-active"></div>
                    <div class="loading-icon">üë•</div>
                </div>
                <div class="loading-text">Loading users...</div>
                <div class="loading-subtext">Fetching user data</div>
                <div class="loading-dots">
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                </div>
            </div>
            
            <div class="header">
                <div>
                    <h1 class="header-title">üë• User Management</h1>
                    <p class="header-subtitle">Manage internal team, creators, and brand clients</p>
                </div>
                <div class="header-actions">
                    <button class="btn" onclick="refreshUsersTab()">üîÑ Refresh</button>
                </div>
            </div>

            <!-- Summary Stats -->
            <div class="stats-grid" style="grid-template-columns: repeat(4, 1fr); margin-bottom: 24px;">
                <div class="stat-card" onclick="switchUsersTab('internal')" style="cursor: pointer;">
                    <div class="stat-icon" style="background: var(--accent-dim); color: var(--accent);">üëë</div>
                    <div>
                        <div class="stat-value" id="statInternalCount">0</div>
                        <div class="stat-label">Internal Team</div>
                    </div>
                </div>
                <div class="stat-card" onclick="switchUsersTab('creators')" style="cursor: pointer;">
                    <div class="stat-icon" style="background: var(--purple-dim); color: var(--purple);">üé¨</div>
                    <div>
                        <div class="stat-value" id="statCreatorsCount">0</div>
                        <div class="stat-label">Creators</div>
                    </div>
                </div>
                <div class="stat-card" onclick="switchUsersTab('brands')" style="cursor: pointer;">
                    <div class="stat-icon" style="background: var(--blue-dim); color: var(--blue);">üè¢</div>
                    <div>
                        <div class="stat-value" id="statBrandsCount">0</div>
                        <div class="stat-label">Brand Clients</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background: var(--warning-dim); color: var(--warning);">‚è≥</div>
                    <div>
                        <div class="stat-value" id="statPendingTotal">0</div>
                        <div class="stat-label">Pending Requests</div>
                    </div>
                </div>
            </div>

            <!-- Tab Navigation -->
            <div class="ops-tabs" style="display: flex; gap: 2px; margin-bottom: 24px; background: var(--bg-secondary); padding: 4px; border-radius: 12px; width: fit-content; border: 1px solid var(--border);">
                <button class="ops-tab active" id="usersTab-internal-btn" onclick="switchUsersTab('internal')" style="padding: 10px 24px; border: none; background: var(--bg-card); border-radius: 8px; cursor: pointer; font-weight: 600; color: var(--text-primary); transition: all 0.2s; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                    üëë Internal Team
                    <span class="tab-badge" id="internalPendingBadge" style="display: none;">0</span>
                </button>
                <button class="ops-tab" id="usersTab-creators-btn" onclick="switchUsersTab('creators')" style="padding: 10px 24px; border: none; background: transparent; border-radius: 8px; cursor: pointer; font-weight: 500; color: var(--text-muted); transition: all 0.2s;">
                    üé¨ Creators
                    <span class="tab-badge" id="creatorsPendingBadge" style="display: none;">0</span>
                </button>
                <button class="ops-tab" id="usersTab-brands-btn" onclick="switchUsersTab('brands')" style="padding: 10px 24px; border: none; background: transparent; border-radius: 8px; cursor: pointer; font-weight: 500; color: var(--text-muted); transition: all 0.2s;">
                    üè¢ Brand Clients
                    <span class="tab-badge" id="brandsPendingBadge" style="display: none;">0</span>
                </button>
            </div>

            <!-- ==================== INTERNAL TEAM TAB ==================== -->
            <div id="usersTab-internal" class="users-tab-content">
                <div style="background: var(--purple-dim); color: var(--purple); padding: 12px 16px; border-radius: 8px; margin-bottom: 16px; font-size: 0.85rem;">
                    üëë <strong>Internal Team</strong> - Your team members who access the admin dashboard. Invite via link, then approve and assign roles.
                </div>
                
                <!-- Pending Access Requests Section -->
                <div id="pendingAccessRequestsSection" style="display: none; margin-bottom: 24px;">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                        <h3 style="font-size: 1rem; font-weight: 600; margin: 0;">üîî Pending Access Requests</h3>
                        <span id="pendingRequestsCount" class="badge" style="background: var(--warning); color: #000;">0</span>
                    </div>
                    <div class="card" style="border: 1px solid var(--warning); background: rgba(245, 158, 11, 0.05);">
                        <div class="card-body no-padding">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>User</th>
                                        <th>Email</th>
                                        <th>Requested Role</th>
                                        <th>Reason</th>
                                        <th>Submitted</th>
                                        <th style="text-align: right;">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="pendingAccessRequestsBody">
                                    <tr><td colspan="6" style="text-align: center; padding: 20px; color: var(--text-muted);">Loading...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <div style="display: flex; gap: 12px; margin-bottom: 16px; flex-wrap: wrap; align-items: center;">
                    <select id="internalStatusFilter" onchange="loadInternalTeam()" style="padding: 8px 12px; border-radius: 6px; border: 1px solid var(--border); background: var(--bg-secondary); color: var(--text-primary);">
                        <option value="all">All Status</option>
                        <option value="pending">‚è≥ Pending</option>
                        <option value="approved">‚úÖ Approved</option>
                        <option value="rejected">‚ùå Rejected</option>
                    </select>
                    <select id="internalRoleFilter" onchange="loadInternalTeam()" style="padding: 8px 12px; border-radius: 6px; border: 1px solid var(--border); background: var(--bg-secondary); color: var(--text-primary);">
                        <option value="all">All Roles</option>
                        <option value="admin">üëë Admin</option>
                        <option value="content_lead">üéØ Content Lead</option>
                        <option value="analyst">üìä Analyst</option>
                        <option value="payments">üí∞ Payments</option>
                        <option value="automations">‚öôÔ∏è Automations</option>
                        <option value="va">üìã VA</option>
                    </select>
                    <div style="flex: 1;"></div>
                    <button class="btn btn-primary" onclick="showInviteTeamModal()">‚ûï Invite Team Member</button>
                </div>
                
                <div class="card">
                    <div class="card-body no-padding">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Email</th>
                                    <th>Role</th>
                                    <th>Status</th>
                                    <th>Joined</th>
                                    <th style="text-align: right;">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="internalTeamBody">
                                <tr><td colspan="6" style="text-align: center; padding: 40px; color: var(--text-muted);">Loading...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- ==================== CREATORS TAB ==================== -->
            <div id="usersTab-creators" class="users-tab-content" style="display: none;">
                <div style="background: var(--success-dim); color: var(--success); padding: 12px 16px; border-radius: 8px; margin-bottom: 16px; font-size: 0.85rem;">
                    üé¨ <strong>Creators</strong> - Manage your creator roster. New creators apply ‚Üí you approve ‚Üí they get added to roster. Existing creators claim their accounts via Discord.
                </div>
                <div style="display: flex; gap: 12px; margin-bottom: 16px; flex-wrap: wrap; align-items: center;">
                    <select id="rosterStatusFilter" onchange="loadCreatorsRoster()" style="padding: 8px 12px; border-radius: 6px; border: 1px solid var(--border); background: var(--bg-secondary); color: var(--text-primary);">
                        <option value="all">All Status</option>
                        <option value="Active">‚úÖ Active</option>
                        <option value="Applied">üìù Applied</option>
                        <option value="Pending">üëÄ Pending</option>
                        <option value="Inactive">‚è∏Ô∏è Inactive</option>
                        <option value="Paused">‚è≥ Paused</option>
                    </select>
                    <select id="rosterBrandFilter" onchange="loadCreatorsRoster()" style="padding: 8px 12px; border-radius: 6px; border: 1px solid var(--border); background: var(--bg-secondary); color: var(--text-primary);">
                        <option value="all">All Brands</option>
                        <option value="catakor">Cata-Kor</option>
                        <option value="jiyu">JiYu</option>
                        <option value="physicians_choice">Physicians Choice</option>
                        <option value="peach_slices">Peach Slices</option>
                        <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                    </select>
                    <input type="text" id="rosterSearch" placeholder="Search by name or handle..." 
                        oninput="filterRosterTable()" 
                        style="padding: 8px 12px; border-radius: 6px; border: 1px solid var(--border); background: var(--bg-secondary); color: var(--text-primary); width: 200px;">
                    <div style="flex: 1;"></div>
                    <span style="color: var(--text-muted); font-size: 0.85rem;" id="rosterCountLabel">0 creators</span>
                </div>
                
                <!-- Sub-tabs for Creators -->
                <div style="display: flex; gap: 2px; margin-bottom: 16px; background: var(--bg-secondary); padding: 3px; border-radius: 10px; width: fit-content; border: 1px solid var(--border);">
                    <button id="creatorsSubTab-roster" onclick="switchCreatorsSubTab('roster')" style="padding: 8px 16px; border: none; background: var(--bg-card); border-radius: 7px; cursor: pointer; font-weight: 600; font-size: 0.85rem; color: var(--text-primary); transition: all 0.2s; box-shadow: 0 1px 2px rgba(0,0,0,0.1);">
                        üìã Roster
                    </button>
                    <button id="creatorsSubTab-claims" onclick="switchCreatorsSubTab('claims')" style="padding: 8px 16px; border: none; background: transparent; border-radius: 7px; cursor: pointer; font-weight: 500; font-size: 0.85rem; color: var(--text-muted); transition: all 0.2s;">
                        üîó Claim Requests
                        <span class="tab-badge" id="claimRequestsBadge" style="display: none;">0</span>
                    </button>
                    <button id="creatorsSubTab-requests" onclick="switchCreatorsSubTab('requests')" style="padding: 8px 16px; border: none; background: transparent; border-radius: 7px; cursor: pointer; font-weight: 500; font-size: 0.85rem; color: var(--text-muted); transition: all 0.2s;">
                        üìù Account Requests
                        <span class="tab-badge" id="accountRequestsBadge" style="display: none;">0</span>
                    </button>
                    <button id="creatorsSubTab-applications" onclick="switchCreatorsSubTab('applications')" style="padding: 8px 16px; border: none; background: transparent; border-radius: 7px; cursor: pointer; font-weight: 500; font-size: 0.85rem; color: var(--text-muted); transition: all 0.2s;">
                        üì© Applications
                        <span class="tab-badge" id="applicationsBadge" style="display: none;">0</span>
                    </button>
                </div>
                
                <!-- Roster Sub-tab -->
                <div id="creatorsSubContent-roster">
                    <div class="card">
                        <div class="card-body no-padding">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Creator</th>
                                        <th>TikTok Handle</th>
                                        <th>Brand</th>
                                        <th>Status</th>
                                        <th>Discord Linked</th>
                                        <th>Joined</th>
                                        <th style="text-align: right;">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="creatorsRosterBody">
                                    <tr><td colspan="7" style="text-align: center; padding: 40px; color: var(--text-muted);">Loading...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Claim Requests Sub-tab -->
                <div id="creatorsSubContent-claims" style="display: none;">
                    <div style="background: var(--info-dim); color: var(--info); padding: 12px 16px; border-radius: 8px; margin-bottom: 16px; font-size: 0.85rem;">
                        üîó Existing creators can claim their accounts by entering their TikTok handle. Approve requests to link their Discord to all their managed_creators records.
                    </div>
                    <div class="card">
                        <div class="card-body no-padding">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Discord User</th>
                                        <th>Claiming</th>
                                        <th>Total GMV</th>
                                        <th>Requested</th>
                                        <th style="text-align: right;">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="claimRequestsBody">
                                    <tr><td colspan="5" style="text-align: center; padding: 40px; color: var(--text-muted);">Loading...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Account Requests Sub-tab -->
                <div id="creatorsSubContent-requests" style="display: none;">
                    <div style="background: var(--info-dim); color: var(--info); padding: 12px 16px; border-radius: 8px; margin-bottom: 16px; font-size: 0.85rem;">
                        ‚ÑπÔ∏è When creators request to add a TikTok account that has existing sales data, it requires admin verification to prevent account hijacking.
                    </div>
                    <div class="card">
                        <div class="card-body no-padding">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Requester</th>
                                        <th>Requested Handle</th>
                                        <th>Has Data?</th>
                                        <th>Requested</th>
                                        <th style="text-align: right;">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="creatorsRequestsBody">
                                    <tr><td colspan="5" style="text-align: center; padding: 40px; color: var(--text-muted);">Loading...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Applications Sub-tab -->
                <div id="creatorsSubContent-applications" style="display: none;">
                    <div style="background: var(--warning-dim); color: var(--warning); padding: 12px 16px; border-radius: 8px; margin-bottom: 16px; font-size: 0.85rem;">
                        üì© <strong>New creator applications</strong> - When you approve, you'll assign them to a brand and they'll be added to the roster with their Discord already linked for instant portal access.
                    </div>
                    <div class="card">
                        <div class="card-body no-padding">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Applicant</th>
                                        <th>Email</th>
                                        <th>TikTok</th>
                                        <th>Followers</th>
                                        <th>Applied</th>
                                        <th>Status</th>
                                        <th style="text-align: right;">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="creatorsApplicationsBody">
                                    <tr><td colspan="7" style="text-align: center; padding: 40px; color: var(--text-muted);">Loading...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==================== BRAND CLIENTS TAB ==================== -->
            <div id="usersTab-brands" class="users-tab-content" style="display: none;">
                <div style="background: var(--info-dim); color: var(--info); padding: 12px 16px; border-radius: 8px; margin-bottom: 16px; font-size: 0.85rem;">
                    üè¢ <strong>Brand Clients</strong> - Your brand partners who view their own creator performance on the Brand Portal. Share the portal link, they sign in, you approve and assign their brand.
                </div>
                <div style="display: flex; gap: 12px; margin-bottom: 16px; flex-wrap: wrap; align-items: center;">
                    <select id="brandsStatusFilter" onchange="loadBrandsTab()" style="padding: 8px 12px; border-radius: 6px; border: 1px solid var(--border); background: var(--bg-secondary); color: var(--text-primary);">
                        <option value="all">All Status</option>
                        <option value="pending">‚è≥ Pending</option>
                        <option value="approved">‚úÖ Approved</option>
                        <option value="denied">‚ùå Denied</option>
                    </select>
                    <select id="brandsBrandFilter" onchange="loadBrandsTab()" style="padding: 8px 12px; border-radius: 6px; border: 1px solid var(--border); background: var(--bg-secondary); color: var(--text-primary);">
                        <option value="all">All Brands</option>
                        <option value="catakor">Cata-Kor</option>
                        <option value="jiyu">JiYu</option>
                        <option value="physicians_choice">Physicians Choice</option>
                        <option value="peach_slices">Peach Slices</option>
                        <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                    </select>
                    <div style="flex: 1;"></div>
                    <button class="btn" onclick="copyBrandPortalLink()">üîó Copy Portal Link</button>
                </div>
                
                <div class="card">
                    <div class="card-body no-padding">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Email</th>
                                    <th>Assigned Brand</th>
                                    <th>Role</th>
                                    <th>Status</th>
                                    <th>Last Login</th>
                                    <th style="text-align: right;">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="brandsTableBody">
                                <tr><td colspan="7" style="text-align: center; padding: 40px; color: var(--text-muted);">Loading...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Invite Team Modal -->
        <div id="inviteTeamModal" class="modal-overlay" style="display: none;">
            <div class="modal-content" style="max-width: 450px;">
                <div class="modal-header">
                    <h3>‚ûï Invite Team Member</h3>
                    <button class="modal-close" onclick="hideInviteTeamModal()">√ó</button>
                </div>
                <div class="modal-body">
                    <p style="color: var(--text-muted); font-size: 0.85rem; margin-bottom: 16px;">
                        New team members must sign in with Discord first. Once they do, they'll appear in the pending list for you to approve and assign a role.
                    </p>
                    <div style="background: var(--bg-secondary); padding: 16px; border-radius: 8px; text-align: center;">
                        <p style="margin-bottom: 12px; font-size: 0.9rem;">Share this link with your team member:</p>
                        <code style="background: var(--bg-primary); padding: 8px 12px; border-radius: 6px; display: block; word-break: break-all; font-size: 0.85rem;" id="adminPortalLink"></code>
                        <button class="btn btn-primary" style="margin-top: 12px;" onclick="copyAdminPortalLink()">üìã Copy Link</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add Admin Modal -->
        <div id="addAdminModal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); z-index: 1000; align-items: center; justify-content: center;">
            <div style="background: var(--bg-card); border-radius: 12px; padding: 24px; max-width: 400px; width: 90%; border: 1px solid var(--border);">
                <h3 style="margin-bottom: 16px;">‚ûï Add Portal Admin</h3>
                <p style="color: var(--text-muted); font-size: 0.85rem; margin-bottom: 16px;">Enter the Discord ID of the user you want to make an admin. They must have logged into the Brand Portal at least once.</p>
                <input type="text" id="newAdminDiscordId" placeholder="Discord ID (e.g. 131571520597262336)" 
                    style="width: 100%; padding: 10px 14px; border-radius: 8px; border: 1px solid var(--border); background: var(--bg-secondary); color: var(--text-primary); font-size: 0.9rem; margin-bottom: 16px;">
                <div style="display: flex; gap: 12px; justify-content: flex-end;">
                    <button class="btn" onclick="hideAddAdminModal()">Cancel</button>
                    <button class="btn btn-primary" onclick="addPortalAdmin()">Add Admin</button>
                </div>
            </div>
        </div>

        <!-- Merge Creators Modal -->
        <div id="mergeCreatorsModal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); z-index: 1000; align-items: center; justify-content: center;">
            <div style="background: var(--bg-card); border-radius: 12px; padding: 24px; max-width: 500px; width: 90%; border: 1px solid var(--border); max-height: 80vh; overflow-y: auto;">
                <h3 style="margin-bottom: 16px;">üîó Merge Creators</h3>
                <p style="color: var(--text-muted); font-size: 0.85rem; margin-bottom: 16px;">These creators will be linked with the same Discord ID. This is useful when the same person has different entries across brands.</p>
                
                <div id="mergePreview" style="background: var(--bg-secondary); border-radius: 8px; padding: 12px; margin-bottom: 16px; max-height: 200px; overflow-y: auto;">
                    <!-- Selected creators will be listed here -->
                </div>
                
                <div style="margin-bottom: 16px;">
                    <label style="display: block; margin-bottom: 6px; font-size: 0.85rem; color: var(--text-muted);">Discord ID to link all selected creators:</label>
                    <input type="text" id="mergeDiscordId" placeholder="Discord ID (e.g. 131571520597262336)" 
                        style="width: 100%; padding: 10px 14px; border-radius: 8px; border: 1px solid var(--border); background: var(--bg-secondary); color: var(--text-primary); font-size: 0.9rem;">
                </div>
                
                <div id="mergeStats" style="background: var(--accent-dim); border-radius: 8px; padding: 12px; margin-bottom: 16px; font-size: 0.85rem;">
                    <!-- Merge stats will be shown here -->
                </div>
                
                <div style="display: flex; gap: 12px; justify-content: flex-end;">
                    <button class="btn" onclick="hideMergeModal()">Cancel</button>
                    <button class="btn btn-primary" onclick="executeMerge()">üîó Merge Creators</button>
                </div>
            </div>
        </div>

        <!-- Applications View -->
        <div id="view-applications" class="view-section">
            <!-- Loading Overlay -->
            <div id="applications-loading" class="loading-overlay hidden">
                <div class="loading-spinner-container">
                    <div class="spinner-ring spinner-ring-pulse"></div>
                    <div class="spinner-ring spinner-ring-active"></div>
                    <div class="loading-icon">üìù</div>
                </div>
                <div class="loading-text">Loading applications...</div>
                <div class="loading-subtext">Fetching applicant data</div>
                <div class="loading-dots">
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                </div>
            </div>
            <div class="header">
                <div>
                    <h1 class="header-title">üìã Creator Applications</h1>
                    <p class="header-subtitle">Review and approve new creator applications</p>
                </div>
                <div class="header-actions">
                    <select id="appStatusFilter" onchange="loadApplicationsData()">
                        <option value="all">All Status</option>
                        <option value="pending" selected>Pending</option>
                        <option value="reviewing">Reviewing</option>
                        <option value="accepted">Accepted</option>
                        <option value="rejected">Rejected</option>
                        <option value="waitlist">Waitlist</option>
                    </select>
                    <select id="appBrandFilter" onchange="loadApplicationsData()">
                        <option value="all">All Brands</option>
                        <option value="catakor">Cata-Kor</option>
                        <option value="jiyu">JiYu</option>
                        <option value="physicians_choice">Physicians Choice</option>
                        <option value="peach_slices">Peach Slices</option>
                        <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                    </select>
                    <button class="btn" onclick="loadApplicationsData()">üîÑ Refresh</button>
                    <button class="btn" onclick="switchView('funnels')">‚öôÔ∏è Customize Forms</button>
                    <div class="dropdown" style="position: relative; display: inline-block;">
                        <button class="btn btn-primary" onclick="toggleApplyLinksDropdown()">üîó Copy Apply Link ‚ñº</button>
                        <div id="applyLinksDropdown" class="dropdown-menu" style="display: none; position: absolute; right: 0; top: 100%; margin-top: 4px; background: var(--bg-card); border: 1px solid var(--border); border-radius: 8px; min-width: 240px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); z-index: 100;">
                            <div style="padding: 8px 12px; border-bottom: 1px solid var(--border); font-size: 0.8rem; color: var(--text-muted);">Click to copy link</div>
                            <div class="dropdown-item" onclick="copyBrandLink('catakor')" style="padding: 10px 12px; cursor: pointer; display: flex; align-items: center; gap: 10px; transition: background 0.2s;">
                                <span style="font-size: 1.1rem;">üíä</span>
                                <span>Cata-Kor</span>
                            </div>
                            <div class="dropdown-item" onclick="copyBrandLink('jiyu')" style="padding: 10px 12px; cursor: pointer; display: flex; align-items: center; gap: 10px; transition: background 0.2s;">
                                <span style="font-size: 1.1rem;">‚ú®</span>
                                <span>JiYu</span>
                            </div>
                            <div class="dropdown-item" onclick="copyBrandLink('physicians_choice')" style="padding: 10px 12px; cursor: pointer; display: flex; align-items: center; gap: 10px; transition: background 0.2s;">
                                <span style="font-size: 1.1rem;">ü©∫</span>
                                <span>Physicians Choice</span>
                            </div>
                            <div class="dropdown-item" onclick="copyBrandLink('peach_slices')" style="padding: 10px 12px; cursor: pointer; display: flex; align-items: center; gap: 10px; transition: background 0.2s;">
                                <span style="font-size: 1.1rem;">üçë</span>
                                <span>Peach Slices</span>
                            </div>
                            <div class="dropdown-item" onclick="copyBrandLink('yerba_magic')" style="padding: 10px 12px; cursor: pointer; display: flex; align-items: center; gap: 10px; transition: background 0.2s;">
                                <span style="font-size: 1.1rem;">üßâ</span>
                                <span>Yerba Magic</span>
                            </div>
                            <div class="dropdown-item" onclick="copyBrandLink('toplux')" style="padding: 10px 12px; cursor: pointer; display: flex; align-items: center; gap: 10px; transition: background 0.2s;">
                                <span style="font-size: 1.1rem;">‚ö°</span>
                                <span>Toplux Nutrition</span>
                            </div>
                            <div style="border-top: 1px solid var(--border);">
                                <div class="dropdown-item" onclick="copyBrandLink('')" style="padding: 10px 12px; cursor: pointer; display: flex; align-items: center; gap: 10px; color: var(--text-muted); transition: background 0.2s;">
                                    <span style="font-size: 1.1rem;">üåê</span>
                                    <span>Generic (All Brands)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Stats -->
            <div class="stats-grid" style="grid-template-columns: repeat(5, 1fr); margin-bottom: 24px;">
                <div class="stat-card" onclick="filterApplicationsByStatus('pending')" style="cursor: pointer; transition: transform 0.15s, box-shadow 0.15s;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.15)';" onmouseout="this.style.transform=''; this.style.boxShadow='';">
                    <div class="stat-icon" style="background: var(--warning-dim); color: var(--warning);">‚è≥</div>
                    <div>
                        <div class="stat-value" id="statPendingApps">0</div>
                        <div class="stat-label">Pending</div>
                    </div>
                </div>
                <div class="stat-card" onclick="filterApplicationsByStatus('reviewing')" style="cursor: pointer; transition: transform 0.15s, box-shadow 0.15s;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.15)';" onmouseout="this.style.transform=''; this.style.boxShadow='';">
                    <div class="stat-icon" style="background: var(--blue-dim); color: var(--blue);">üëÄ</div>
                    <div>
                        <div class="stat-value" id="statReviewingApps">0</div>
                        <div class="stat-label">Reviewing</div>
                    </div>
                </div>
                <div class="stat-card" onclick="filterApplicationsByStatus('accepted')" style="cursor: pointer; transition: transform 0.15s, box-shadow 0.15s;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.15)';" onmouseout="this.style.transform=''; this.style.boxShadow='';">
                    <div class="stat-icon" style="background: var(--success-dim); color: var(--success);">‚úÖ</div>
                    <div>
                        <div class="stat-value" id="statAcceptedApps">0</div>
                        <div class="stat-label">Accepted</div>
                    </div>
                </div>
                <div class="stat-card" onclick="filterApplicationsByStatus('rejected')" style="cursor: pointer; transition: transform 0.15s, box-shadow 0.15s;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.15)';" onmouseout="this.style.transform=''; this.style.boxShadow='';">
                    <div class="stat-icon" style="background: var(--danger-dim); color: var(--danger);">‚ùå</div>
                    <div>
                        <div class="stat-value" id="statRejectedApps">0</div>
                        <div class="stat-label">Rejected</div>
                    </div>
                </div>
                <div class="stat-card" onclick="filterApplicationsByStatus('all')" style="cursor: pointer; transition: transform 0.15s, box-shadow 0.15s;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.15)';" onmouseout="this.style.transform=''; this.style.boxShadow='';">
                    <div class="stat-icon" style="background: var(--purple-dim); color: var(--purple);">üìù</div>
                    <div>
                        <div class="stat-value" id="statTotalApps">0</div>
                        <div class="stat-label">Total</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <!-- Bulk Actions Bar -->
                <div class="bulk-actions-bar" id="applicationsBulkActions">
                    <span class="bulk-select-count"><span id="applicationsSelectedCount">0</span> selected</span>
                    <div class="bulk-actions-buttons">
                        <button class="bulk-btn success" onclick="bulkApproveApplications()">‚úÖ Approve All</button>
                        <button class="bulk-btn danger" onclick="bulkRejectApplications()">‚ùå Reject All</button>
                        <button class="bulk-btn" onclick="bulkExportApplications()">üì• Export</button>
                        <button class="bulk-btn" onclick="clearApplicationsSelection()">‚úï Clear</button>
                    </div>
                </div>
                
                <div class="card-body no-padding">
                    <table class="data-table" id="applicationsTable">
                        <thead>
                            <tr>
                                <th style="width: 40px;"><input type="checkbox" class="select-all-checkbox" onchange="toggleApplicationsSelectAll(this)"></th>
                                <th>Applicant</th>
                                <th>TikTok</th>
                                <th>Brand</th>
                                <th>Followers</th>
                                <th>Status</th>
                                <th>Applied</th>
                                <th style="text-align: right;">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="applicationsTableBody">
                            <tr>
                                <td colspan="8" style="text-align: center; padding: 40px; color: var(--text-muted);">Loading applications...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- ==================== DATA STATUS ==================== -->
        <div id="view-datastatus" class="view-section">
            <div class="header">
                <div>
                    <h1 class="header-title">üìä Data Status</h1>
                    <p class="header-subtitle">Check uploads and validate data accuracy</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-primary" onclick="refreshDataStatusTab()">üîÑ Refresh</button>
                </div>
            </div>

            <!-- Tabs -->
            <div class="tabs-container" style="margin-bottom: 24px;">
                <button class="tab active" onclick="switchDataStatusTab('uploads')" id="tab-uploads">üì§ Upload Status</button>
                <button class="tab" onclick="switchDataStatusTab('validation')" id="tab-validation">‚úÖ Data Validation</button>
            </div>

            <!-- Tab: Upload Status -->
            <div id="datastatus-uploads" class="datastatus-tab-content">
                <div style="display: flex; gap: 12px; margin-bottom: 24px;">
                    <select id="dataStatusDays" class="filter-select" onchange="loadDataHealth()" style="min-width: 140px;">
                        <option value="7">Last 7 Days</option>
                        <option value="14">Last 14 Days</option>
                        <option value="30">Last 30 Days</option>
                    </select>
                    <button class="btn" onclick="copyMissingDataList()">üìã Copy List</button>
                </div>

                <!-- Quick Status Banner -->
                <div id="dataStatusBanner" class="card" style="margin-bottom: 24px; padding: 20px;">
                    <div style="display: flex; align-items: center; gap: 16px;">
                        <div id="statusBannerIcon" style="font-size: 2.5rem;">‚úÖ</div>
                        <div>
                            <div id="statusBannerTitle" style="font-size: 1.25rem; font-weight: 600; color: var(--text-primary);">All caught up!</div>
                            <div id="statusBannerSubtitle" style="color: var(--text-muted); margin-top: 4px;">No missing files to upload</div>
                        </div>
                    </div>
                </div>

                <!-- Action Required - Missing Files -->
                <div id="actionRequiredSection" class="card" style="margin-bottom: 24px; display: none;">
                    <div class="card-header" style="background: linear-gradient(135deg, var(--warning-dim), var(--bg-card));">
                        <div class="card-title" style="color: var(--warning);">
                            <span>üö®</span> Action Required
                        </div>
                        <span class="badge" id="totalMissingBadge" style="background: var(--warning); color: var(--bg-primary);">0 files</span>
                    </div>
                    <div class="card-body" style="padding: 0;">
                        <div id="actionRequiredList" style="max-height: 400px; overflow-y: auto;">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                </div>

                <!-- Upload Checklist by Date -->
                <div id="uploadChecklistSection" class="card" style="margin-bottom: 24px;">
                    <div class="card-header">
                        <div class="card-title"><span>üìù</span> Upload Checklist</div>
                        <div style="display: flex; gap: 8px;">
                            <select id="checklistBrandFilter" class="filter-select" onchange="filterDataChecklist()" style="min-width: 120px;">
                                <option value="all">All Brands</option>
                                <option value="catakor">Cata-Kor</option>
                            <option value="jiyu">JiYu</option>
                            <option value="physicians_choice">Physicians Choice</option>
                            <option value="peach_slices">Peach Slices</option>
                            <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                        </select>
                    </div>
                </div>
                <div class="card-body" id="uploadChecklistBody" style="padding: 0;">
                    <!-- Populated by JS -->
                </div>
            </div>

            <!-- Summary Stats -->
            <div class="stats-grid" style="grid-template-columns: repeat(4, 1fr); margin-bottom: 24px;">
                <div class="stat-card">
                    <div class="stat-icon" style="background: var(--success-dim); color: var(--success);">‚úÖ</div>
                    <div>
                        <div class="stat-value" id="dataCompleteCount">0</div>
                        <div class="stat-label">Complete Days</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background: var(--warning-dim); color: var(--warning);">‚ö†Ô∏è</div>
                    <div>
                        <div class="stat-value" id="dataMissingCount">0</div>
                        <div class="stat-label">Missing Files</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background: var(--blue-dim); color: var(--blue);">üìÖ</div>
                    <div>
                        <div class="stat-value" id="dataLatestDate">--</div>
                        <div class="stat-label">Latest Data</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background: var(--purple-dim); color: var(--purple);">üè¢</div>
                    <div>
                        <div class="stat-value" id="dataBrandsComplete">0/5</div>
                        <div class="stat-label">Brands Up-to-Date</div>
                    </div>
                </div>
            </div>

            <!-- Full Data Matrix (Collapsed by default) -->
            <details class="card">
                <summary class="card-header" style="cursor: pointer; list-style: none;">
                    <div class="card-title"><span>üìã</span> Full Data Matrix</div>
                    <span class="badge" id="dataMatrixCount" style="background: var(--bg-card);">0 rows</span>
                </summary>
                <div class="card-body">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Brand</th>
                                    <th style="text-align: center;">Creator</th>
                                    <th style="text-align: center;">Video</th>
                                    <th style="text-align: center;">Product</th>
                                    <th style="text-align: center;">Shop</th>
                                    <th style="text-align: center;">Affiliate</th>
                                    <th style="text-align: center;">Status</th>
                                </tr>
                            </thead>
                            <tbody id="dataStatusBody">
                                <tr>
                                    <td colspan="8" style="text-align: center; padding: 40px; color: var(--text-muted);">Loading...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </details>
            </div> <!-- End uploads tab -->

            <!-- Tab: Data Validation -->
            <div id="datastatus-validation" class="datastatus-tab-content" style="display: none;">
                <!-- Loading Overlay -->
                <div id="validation-loading" class="loading-overlay hidden">
                    <div class="loading-spinner-container">
                        <div class="spinner-ring spinner-ring-pulse"></div>
                        <div class="spinner-ring spinner-ring-active"></div>
                        <div class="loading-icon">‚úÖ</div>
                    </div>
                    <div class="loading-text">Validating data...</div>
                    <div class="loading-subtext">Comparing affiliate totals vs creator data</div>
                    <div class="loading-dots">
                        <div class="loading-dot"></div>
                        <div class="loading-dot"></div>
                        <div class="loading-dot"></div>
                    </div>
                </div>

                <div style="display: flex; gap: 12px; margin-bottom: 24px;">
                    <select id="validationBrandFilter" class="filter-select" onchange="loadValidationData()">
                        <option value="all">All Brands</option>
                        <option value="catakor">Cata-Kor</option>
                        <option value="jiyu">JiYu</option>
                        <option value="physicians_choice">Physicians Choice</option>
                        <option value="peach_slices">Peach Slices</option>
                        <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                    </select>
                    <select id="validationDays" class="filter-select" onchange="loadValidationData()">
                        <option value="7">Last 7 Days</option>
                        <option value="14">Last 14 Days</option>
                        <option value="30">Last 30 Days</option>
                    </select>
                </div>

                <!-- Validation Status Banner -->
                <div id="validationBanner" class="card" style="margin-bottom: 24px; padding: 20px;">
                    <div style="display: flex; align-items: center; gap: 16px;">
                        <div id="validationBannerIcon" style="font-size: 2.5rem;">‚è≥</div>
                        <div>
                            <div id="validationBannerTitle" style="font-size: 1.25rem; font-weight: 600; color: var(--text-primary);">Click Refresh to load validation data</div>
                            <div id="validationBannerSubtitle" style="color: var(--text-muted); margin-top: 4px;">Comparing affiliate summary vs creator performance</div>
                        </div>
                    </div>
                </div>

                <!-- Summary Stats -->
                <div class="stats-grid" style="grid-template-columns: repeat(4, 1fr); margin-bottom: 24px;">
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon green">‚úì</div>
                        </div>
                        <div class="stat-value" id="validationMatchCount">0</div>
                        <div class="stat-label">Days Match</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon red">‚úï</div>
                        </div>
                        <div class="stat-value" id="validationMismatchCount">0</div>
                        <div class="stat-label">Days with Variance</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon yellow">üìä</div>
                        </div>
                        <div class="stat-value" id="validationTotalGmvVariance">$0</div>
                        <div class="stat-label">Total GMV Variance</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon blue">üìã</div>
                        </div>
                        <div class="stat-value" id="validationMissingAffiliate">0</div>
                        <div class="stat-label">Missing Affiliate Data</div>
                    </div>
                </div>

                <!-- Discrepancies Section -->
                <div id="validationDiscrepancies" class="card" style="margin-bottom: 24px; display: none;">
                    <div class="card-header" style="background: linear-gradient(135deg, var(--danger-dim), var(--bg-card));">
                        <div class="card-title" style="color: var(--danger);">
                            <span>‚ö†Ô∏è</span> Discrepancies Found
                        </div>
                        <span class="badge" id="discrepancyCount" style="background: var(--danger); color: #fff;">0</span>
                    </div>
                    <div class="card-body" style="padding: 0;">
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Brand</th>
                                        <th style="text-align: right;">GMV (Affiliate)</th>
                                        <th style="text-align: right;">GMV (Creator)</th>
                                        <th style="text-align: right;">Variance</th>
                                        <th style="text-align: right;">Variance %</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody id="discrepancyBody">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Full Validation Table -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title"><span>üìã</span> Validation Details</div>
                        <div style="display: flex; gap: 8px; align-items: center;">
                            <label style="display: flex; align-items: center; gap: 6px; font-size: 0.85rem; color: var(--text-muted);">
                                <input type="checkbox" id="showOnlyDiscrepancies" onchange="filterValidationTable()">
                                Show only discrepancies
                            </label>
                        </div>
                    </div>
                    <div class="card-body" style="padding: 0;">
                        <div class="table-container" style="max-height: 500px; overflow-y: auto;">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Brand</th>
                                        <th style="text-align: right;">Aff GMV</th>
                                        <th style="text-align: right;">CP GMV</th>
                                        <th style="text-align: right;">GMV Œî</th>
                                        <th style="text-align: right;">Aff Items</th>
                                        <th style="text-align: right;">CP Items</th>
                                        <th style="text-align: right;">Aff Videos</th>
                                        <th style="text-align: right;">CP Videos</th>
                                        <th style="text-align: right;">Aff Comm</th>
                                        <th style="text-align: right;">CP Comm</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody id="validationTableBody">
                                    <tr>
                                        <td colspan="12" style="text-align: center; padding: 40px; color: var(--text-muted);">
                                            Select filters and click Refresh to load validation data
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Brand Mismatch Scanner -->
                <div class="card" style="margin-top: 24px;">
                    <div class="card-header">
                        <div class="card-title"><span>üîç</span> Brand Mismatch Scanner</div>
                        <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 0.8rem;" onclick="runBrandMismatchScan()">
                            üîé Scan for Mismatches
                        </button>
                    </div>
                    <div class="card-body" id="brandMismatchResults">
                        <div style="text-align: center; padding: 40px; color: var(--text-muted);">
                            <div style="font-size: 2rem; margin-bottom: 12px;">üîç</div>
                            <p>Click "Scan for Mismatches" to find creators whose videos don't match their assigned brand.</p>
                            <p style="font-size: 0.8rem; margin-top: 8px;">This helps identify data that was uploaded under the wrong brand.</p>
                        </div>
                    </div>
                </div>

                <!-- Help Section -->
                <div class="card" style="margin-top: 24px;">
                    <div class="card-header">
                        <div class="card-title"><span>‚ÑπÔ∏è</span> How Validation Works</div>
                    </div>
                    <div class="card-body">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                            <div>
                                <h4 style="color: var(--text-primary); margin-bottom: 8px;">üì• Affiliate Summary</h4>
                                <p style="color: var(--text-muted); font-size: 0.85rem; line-height: 1.5;">
                                    Official daily totals from TikTok Shop's Affiliate Center. This is the <strong>source of truth</strong> for what actually happened on the platform.
                                </p>
                            </div>
                            <div>
                                <h4 style="color: var(--text-primary); margin-bottom: 8px;">üì§ Creator Performance</h4>
                                <p style="color: var(--text-muted); font-size: 0.85rem; line-height: 1.5;">
                                    Aggregated data from individual creator exports. Should <strong>sum up to match</strong> the affiliate totals if all data was captured correctly.
                                </p>
                            </div>
                            <div>
                                <h4 style="color: var(--text-primary); margin-bottom: 8px;">‚ö†Ô∏è Common Causes of Variance</h4>
                                <p style="color: var(--text-muted); font-size: 0.85rem; line-height: 1.5;">
                                    Missing creator data, pagination limits, timing differences, or creators not tracked in your roster.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div> <!-- End validation tab -->
        </div>
    </main>

    <!-- Validation Drill-Down Modal -->
    <div class="modal-overlay" id="validationDrilldownModal">
        <div class="modal" style="max-width: 1100px; width: 95%;">
            <div class="modal-header">
                <h3 class="modal-title" id="drilldownTitle">Validation Drill-Down</h3>
                <button class="modal-close" onclick="closeValidationDrilldown()">&times;</button>
            </div>
            <div class="modal-body" id="drilldownBody" style="max-height: 80vh; overflow-y: auto;">
                <div style="text-align: center; padding: 40px; color: var(--text-muted);">
                    Loading creator data...
                </div>
            </div>
        </div>
    </div>

    <!-- Creator Detail Modal -->
    <div class="modal-overlay" id="creatorDetailModal">
        <div class="modal" style="max-width: 900px; width: 95%;">
            <div class="modal-header" style="display: flex; align-items: center; gap: 12px;">
                <h3 class="modal-title" id="creatorDetailTitle" style="flex: 1;">Creator Details</h3>
                <div id="creatorDetailActions" style="display: flex; gap: 8px;">
                    <!-- Populated dynamically -->
                </div>
                <button class="modal-close" onclick="closeCreatorDetail()">&times;</button>
            </div>
            <div class="modal-body" id="creatorDetailBody" style="max-height: 80vh; overflow-y: auto;">
                <!-- Populated dynamically -->
            </div>
        </div>
    </div>

    <!-- Client Report Generator Modal -->
    <div class="modal-overlay" id="clientReportModal">
        <div class="modal" style="max-width: 900px; width: 95%;">
            <div class="modal-header">
                <h3 class="modal-title">üìä Generate Client Report</h3>
                <button class="modal-close" onclick="closeClientReportModal()">&times;</button>
            </div>
            <div class="modal-body" style="max-height: 80vh; overflow-y: auto;">
                <p style="color: var(--text-muted); margin-bottom: 16px;">Generate a professional performance report to share with brand clients. Includes GMV summary, top creators, and top videos.</p>
                
                <!-- Brand & Date Selection -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 24px;">
                    <div>
                        <label class="form-label">Brand</label>
                        <select id="clientReportBrand" class="form-input" onchange="updateReportBrandLogo()">
                            <option value="catakor">üê± Cata-Kor</option>
                            <option value="jiyu">‚ú® JiYu</option>
                            <option value="physicians_choice">üíä Physicians Choice</option>
                            <option value="peach_slices">üçë Peach Slices</option>
                            <option value="yerba_magic">üßâ Yerba Magic</option>
                        </select>
                    </div>
                    <div>
                        <label class="form-label">Report Period</label>
                        <select id="clientReportPeriod" class="form-input" onchange="handleReportPeriodChange()">
                            <option value="last7">Last 7 Days</option>
                            <option value="last14">Last 14 Days</option>
                            <option value="last30" selected>Last 30 Days</option>
                            <option value="mtd">Month to Date</option>
                            <option value="lastmonth">Last Month</option>
                            <option value="custom">Custom Range</option>
                        </select>
                    </div>
                    <div>
                        <label class="form-label">Date Range</label>
                        <input type="text" class="form-input date-range-input" id="clientReportDateRange" placeholder="Select dates" readonly style="cursor: pointer;">
                        <input type="hidden" id="clientReportStartDate">
                        <input type="hidden" id="clientReportEndDate">
                    </div>
                </div>
                
                <!-- White Label Options -->
                <div style="background: var(--bg-secondary); padding: 16px; border-radius: 8px; margin-bottom: 24px;">
                    <div style="font-weight: 600; margin-bottom: 12px;">Branding:</div>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
                        <div>
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; margin-bottom: 12px;">
                                <input type="checkbox" id="reportIncludeBrandLogo" checked> Include Brand Logo
                            </label>
                            <div style="background: var(--bg-card); padding: 12px; border-radius: 8px; text-align: center; min-height: 70px; display: flex; align-items: center; justify-content: center;">
                                <img id="brandLogoImg" src="" alt="Brand Logo" style="max-height: 50px; max-width: 150px; display: none;">
                                <span id="brandLogoPlaceholder" style="color: var(--text-muted); font-size: 12px;">No logo uploaded</span>
                            </div>
                            <div style="margin-top: 8px;">
                                <label class="btn btn-secondary" style="display: inline-block; padding: 6px 12px; font-size: 12px; cursor: pointer;">
                                    üìÅ Upload Logo
                                    <input type="file" id="brandLogoUpload" accept="image/*" style="display: none;" onchange="handleBrandLogoUpload(event)">
                                </label>
                                <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px; margin-left: 4px;" onclick="clearBrandLogo()">‚úï Clear</button>
                            </div>
                        </div>
                        <div>
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; margin-bottom: 12px;">
                                <input type="checkbox" id="reportIncludeAgencyLogo" checked> Include Agency Logo
                            </label>
                            <div style="background: white; padding: 12px; border-radius: 8px; text-align: center; min-height: 70px; display: flex; align-items: center; justify-content: center;">
                                <img src="logo-dark.png" alt="Creators Corner" style="max-height: 50px; max-width: 150px;">
                            </div>
                            <div style="margin-top: 8px; font-size: 11px; color: var(--text-muted);">Dark version for white backgrounds</div>
                        </div>
                    </div>
                </div>
                
                <!-- Report Options -->
                <div style="background: var(--bg-secondary); padding: 16px; border-radius: 8px; margin-bottom: 24px;">
                    <div style="font-weight: 600; margin-bottom: 12px;">Include in Report:</div>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="reportIncludeExecutiveSummary" checked> üìù Executive Summary
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="reportIncludeSummary" checked> üìä Summary Stats
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="reportIncludeWoW" checked> üìà Week-over-Week
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="reportIncludeHighlights" checked> üåü Top 3 Highlights
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="reportIncludeManaged" checked> ‚úÖ Managed vs Unmanaged
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="reportIncludeNewReturning" checked> üÜï New vs Returning
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="reportIncludeDayOfWeek" checked> üìÜ Day of Week
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="reportIncludeDaily" checked> üìÖ Daily Breakdown
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="reportIncludeCreators" checked> üèÜ Top Creators (10)
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="reportIncludeVideos" checked> üé¨ Top Videos (10)
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="reportIncludeProducts" checked> üì¶ Top Products (5)
                        </label>
                    </div>
                </div>
                
                <!-- Preview -->
                <div id="clientReportPreviewContainer" style="border: 1px solid var(--border); border-radius: 12px; overflow: hidden; display: none;">
                    <div style="background: var(--bg-secondary); padding: 12px 16px; font-weight: 600; border-bottom: 1px solid var(--border);">
                        Report Preview
                    </div>
                    <div id="clientReportPreview" style="padding: 24px; background: white; color: #1a1a1a; max-height: 400px; overflow-y: auto;">
                        <!-- Preview will be populated here -->
                    </div>
                </div>
                
                <!-- Actions -->
                <div style="display: flex; gap: 12px; margin-top: 20px; justify-content: flex-end;">
                    <button class="btn btn-secondary" onclick="previewClientReport()">üëÅÔ∏è Preview</button>
                    <button class="btn btn-primary" onclick="generateClientReport()">üöÄ Open Report</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Invoice Generator Modal -->
    <div class="modal-overlay" id="invoiceModal">
        <div class="modal" style="max-width: 900px; width: 95%;">
            <div class="modal-header">
                <h3 class="modal-title">üìÑ Generate Brand Invoices</h3>
                <button class="modal-close" onclick="closeInvoiceModal()">&times;</button>
            </div>
            <div class="modal-body" style="max-height: 80vh; overflow-y: auto;">
                <p style="color: var(--text-muted); margin-bottom: 16px;">Select brands to generate individual invoices for billing. Each invoice will include managed GMV, commission, retainer, and top performing creators.</p>
                
                <!-- Brand Selection -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 12px; margin-bottom: 24px;">
                    <label style="display: flex; align-items: center; gap: 8px; padding: 12px; background: var(--bg-secondary); border-radius: 8px; cursor: pointer;">
                        <input type="checkbox" id="invoiceCatakor" checked> üê± Cata-Kor
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px; padding: 12px; background: var(--bg-secondary); border-radius: 8px; cursor: pointer;">
                        <input type="checkbox" id="invoiceJiyu" checked> ‚ú® JiYu
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px; padding: 12px; background: var(--bg-secondary); border-radius: 8px; cursor: pointer;">
                        <input type="checkbox" id="invoicePC" checked> üíä Physicians Choice
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px; padding: 12px; background: var(--bg-secondary); border-radius: 8px; cursor: pointer;">
                        <input type="checkbox" id="invoicePeach" checked> üçë Peach Slices
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px; padding: 12px; background: var(--bg-secondary); border-radius: 8px; cursor: pointer;">
                        <input type="checkbox" id="invoiceYerba" checked> üßâ Yerba Magic
                    </label>
                </div>
                
                <!-- Invoice Preview -->
                <div id="invoicePreviewContainer" style="border: 1px solid var(--border); border-radius: 12px; overflow: hidden;">
                    <div style="background: var(--bg-secondary); padding: 12px 16px; font-weight: 600; border-bottom: 1px solid var(--border);">
                        Invoice Preview
                    </div>
                    <div id="invoicePreview" style="padding: 24px; background: white; color: #1a1a1a;">
                        <!-- Preview will be populated here -->
                        <p style="text-align: center; color: #666;">Click "Preview Invoice" to see a sample</p>
                    </div>
                </div>
                
                <!-- Actions -->
                <div style="display: flex; gap: 12px; margin-top: 20px; justify-content: flex-end;">
                    <button class="btn btn-secondary" onclick="previewInvoice()">üëÅÔ∏è Preview Invoice</button>
                    <button class="btn btn-primary" onclick="generateAllInvoices()">üìÑ Generate All Selected</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Payment Modal -->
    <div class="modal-overlay" id="addPaymentModal">
        <div class="modal" style="max-width: 500px;">
            <div class="modal-header">
                <h3 class="modal-title">‚ûï Add Payment Record</h3>
                <button class="modal-close" onclick="closeAddPaymentModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div style="margin-bottom: 16px;">
                    <label style="display: block; font-size: 0.85rem; color: var(--text-muted); margin-bottom: 6px;">Creator</label>
                    <input type="text" id="addPaymentCreator" placeholder="@tiktokhandle" list="creatorSuggestions"
                        style="width: 100%; padding: 10px 12px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 8px; color: var(--text-primary);">
                    <datalist id="creatorSuggestions"></datalist>
                </div>
                <div style="margin-bottom: 16px;">
                    <label style="display: block; font-size: 0.85rem; color: var(--text-muted); margin-bottom: 6px;">Brand</label>
                    <select id="addPaymentBrand" style="width: 100%; padding: 10px 12px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 8px; color: var(--text-primary);">
                        <option value="catakor">Cata-Kor</option>
                        <option value="jiyu">JiYu</option>
                        <option value="physicians_choice">Physicians Choice</option>
                        <option value="peach_slices">Peach Slices</option>
                        <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                    </select>
                </div>
                <div style="margin-bottom: 16px;">
                    <label style="display: block; font-size: 0.85rem; color: var(--text-muted); margin-bottom: 6px;">Payment Type</label>
                    <select id="addPaymentType" style="width: 100%; padding: 10px 12px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 8px; color: var(--text-primary);">
                        <option value="retainer">Retainer</option>
                        <option value="commission_topup">Commission Top-Up</option>
                        <option value="bonus">Bonus</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div style="margin-bottom: 16px;">
                    <label style="display: block; font-size: 0.85rem; color: var(--text-muted); margin-bottom: 6px;">Amount ($)</label>
                    <input type="number" id="addPaymentAmount" placeholder="500" min="0" step="0.01"
                        style="width: 100%; padding: 10px 12px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 8px; color: var(--text-primary);">
                </div>
                <div style="margin-bottom: 16px;">
                    <label style="display: block; font-size: 0.85rem; color: var(--text-muted); margin-bottom: 6px;">Period Month</label>
                    <input type="month" id="addPaymentPeriod" 
                        style="width: 100%; padding: 10px 12px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 8px; color: var(--text-primary);">
                </div>
                <div style="margin-bottom: 16px;">
                    <label style="display: block; font-size: 0.85rem; color: var(--text-muted); margin-bottom: 6px;">Notes (optional)</label>
                    <textarea id="addPaymentNotes" placeholder="Any additional notes..." rows="2"
                        style="width: 100%; padding: 10px 12px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 8px; color: var(--text-primary); resize: vertical;"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeAddPaymentModal()">Cancel</button>
                <button class="btn btn-success" onclick="submitAddPayment()">Add Payment</button>
            </div>
        </div>
    </div>

    <!-- Video Player Modal -->
    <div id="videoPlayerModal" onclick="closeVideoPlayer()" style="display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 10000; align-items: center; justify-content: center; padding: 20px; cursor: pointer;">
        <div onclick="event.stopPropagation()" style="position: relative; width: 100%; max-width: 400px; height: 90vh; max-height: 720px; cursor: default;">
            <button onclick="closeVideoPlayer()" style="position: absolute; top: -50px; right: 0; background: rgba(255,255,255,0.1); border: none; color: white; font-size: 1.5rem; cursor: pointer; z-index: 10001; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center;" onmouseover="this.style.background='rgba(255,255,255,0.2)'" onmouseout="this.style.background='rgba(255,255,255,0.1)'">&times;</button>
            <div id="videoEmbedContainer" style="width: 100%; height: 100%; border-radius: 12px; overflow: hidden; background: #000;"></div>
            <div id="videoEmbedInfo" style="position: absolute; bottom: -40px; left: 0; right: 0; text-align: center; color: rgba(255,255,255,0.7); font-size: 0.85rem;"></div>
        </div>
    </div>

    <!-- Edit Payment Modal -->
    <div class="modal-overlay" id="editPaymentModal">
        <div class="modal" style="max-width: 500px;">
            <div class="modal-header">
                <h3 class="modal-title">‚úèÔ∏è Edit Payment Record</h3>
                <button class="modal-close" onclick="closeEditPaymentModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div style="margin-bottom: 16px;">
                    <label style="display: block; font-size: 0.85rem; color: var(--text-muted); margin-bottom: 6px;">Creator</label>
                    <input type="text" id="editPaymentCreator" placeholder="Creator name"
                        style="width: 100%; padding: 10px 12px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 8px; color: var(--text-primary);">
                </div>
                <div style="margin-bottom: 16px;">
                    <label style="display: block; font-size: 0.85rem; color: var(--text-muted); margin-bottom: 6px;">Brand</label>
                    <select id="editPaymentBrand" style="width: 100%; padding: 10px 12px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 8px; color: var(--text-primary);">
                        <option value="catakor">Cata-Kor</option>
                        <option value="jiyu">JiYu</option>
                        <option value="physicians_choice">Physicians Choice</option>
                        <option value="peach_slices">Peach Slices</option>
                        <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                    </select>
                </div>
                <div style="margin-bottom: 16px;">
                    <label style="display: block; font-size: 0.85rem; color: var(--text-muted); margin-bottom: 6px;">Payment Type</label>
                    <select id="editPaymentType" style="width: 100%; padding: 10px 12px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 8px; color: var(--text-primary);">
                        <option value="retainer">Retainer</option>
                        <option value="commission_topup">Commission Top-Up</option>
                        <option value="bonus">Bonus</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div style="margin-bottom: 16px;">
                    <label style="display: block; font-size: 0.85rem; color: var(--text-muted); margin-bottom: 6px;">Amount ($)</label>
                    <input type="number" id="editPaymentAmount" placeholder="500" min="0" step="0.01"
                        style="width: 100%; padding: 10px 12px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 8px; color: var(--text-primary);">
                </div>
                <div style="margin-bottom: 16px;">
                    <label style="display: block; font-size: 0.85rem; color: var(--text-muted); margin-bottom: 6px;">Period Month</label>
                    <input type="month" id="editPaymentPeriod" 
                        style="width: 100%; padding: 10px 12px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 8px; color: var(--text-primary);">
                </div>
                <div style="margin-bottom: 16px;">
                    <label style="display: block; font-size: 0.85rem; color: var(--text-muted); margin-bottom: 6px;">Status</label>
                    <select id="editPaymentStatus" style="width: 100%; padding: 10px 12px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 8px; color: var(--text-primary);">
                        <option value="pending">‚è≥ Pending</option>
                        <option value="approved">‚úì Approved</option>
                        <option value="paid">‚úÖ Paid</option>
                        <option value="rejected">‚ùå Rejected</option>
                    </select>
                </div>
                <div style="margin-bottom: 16px;">
                    <label style="display: block; font-size: 0.85rem; color: var(--text-muted); margin-bottom: 6px;">Notes (optional)</label>
                    <textarea id="editPaymentNotes" placeholder="Any additional notes..." rows="2"
                        style="width: 100%; padding: 10px 12px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 8px; color: var(--text-primary); resize: vertical;"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeEditPaymentModal()">Cancel</button>
                <button class="btn btn-primary" onclick="submitEditPayment()">Save Changes</button>
            </div>
        </div>
    </div>

    <!-- Spend Forecast Modal -->
    <div class="modal-overlay" id="forecastModal">
        <div class="modal" style="max-width: 700px;">
            <div class="modal-header">
                <h3 class="modal-title">üìà Monthly Spend Forecast</h3>
                <button class="modal-close" onclick="closeForecastModal()">&times;</button>
            </div>
            <div class="modal-body" style="padding: 20px;">
                <div style="display: flex; gap: 12px; margin-bottom: 20px; align-items: center;">
                    <select id="forecastBrand" class="filter-select" onchange="generateForecast()" style="min-width: 180px;">
                        <option value="catakor">Cata-Kor</option>
                        <option value="jiyu">JiYu</option>
                        <option value="physicians_choice">Physicians Choice</option>
                        <option value="peach_slices">Peach Slices</option>
                        <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                    </select>
                    <select id="forecastMonth" class="filter-select" onchange="generateForecast()" style="min-width: 180px;">
                    </select>
                </div>
                
                <div id="forecastContent" style="min-height: 300px;">
                    <div style="text-align: center; padding: 40px; color: var(--text-muted);">
                        Select a brand and month to generate forecast...
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeForecastModal()">Close</button>
                <button class="btn btn-primary" onclick="copyForecastToClipboard()">üìã Copy Summary</button>
            </div>
        </div>
    </div>

    <!-- Monthly Performance Report Modal -->
    <div class="modal-overlay" id="monthlyReportModal">
        <div class="modal" style="max-width: 1000px; max-height: 90vh;">
            <div class="modal-header">
                <h3 class="modal-title">üìä Monthly Performance & ROI Report</h3>
                <button class="modal-close" onclick="closeMonthlyReportModal()">&times;</button>
            </div>
            <div class="modal-body" style="padding: 16px;">
                <div style="display: flex; gap: 12px; margin-bottom: 20px; align-items: center; flex-wrap: wrap;">
                    <select id="reportBrand" class="filter-select" onchange="generateMonthlyReport()">
                        <option value="catakor">Cata-Kor</option>
                        <option value="jiyu">JiYu</option>
                        <option value="physicians_choice">Physicians Choice</option>
                        <option value="peach_slices">Peach Slices</option>
                        <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                    </select>
                    <select id="reportMonth" class="filter-select" onchange="generateMonthlyReport()">
                        <!-- Populated by JS -->
                    </select>
                    <button class="btn btn-secondary" onclick="generateMonthlyReport()">üîÑ Generate</button>
                    <div style="flex: 1;"></div>
                    <button class="btn btn-secondary" onclick="downloadReportPDF()">üì• Download PDF</button>
                    <button class="btn btn-secondary" onclick="copyReportHTML()">üìã Copy HTML</button>
                </div>
                
                <!-- Report Preview -->
                <div id="monthlyReportPreview" style="background: white; border-radius: 8px; overflow: hidden; max-height: 60vh; overflow-y: auto;">
                    <div style="padding: 40px; text-align: center; color: #666;">
                        Select a brand and month, then click Generate
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bulk Add to Roster Modal -->
    <div class="modal-overlay" id="bulkAddModal">
        <div class="modal" style="max-width: 900px; max-height: 90vh;">
            <div class="modal-header">
                <h3 class="modal-title">‚ûï Add Creators to Roster</h3>
                <button class="modal-close" onclick="closeBulkAddModal()">&times;</button>
            </div>
            <div class="modal-body" style="max-height: 65vh; overflow-y: auto;">
                <!-- Batch Settings -->
                <div style="background: var(--bg-secondary); padding: 16px; border-radius: 10px; margin-bottom: 20px;">
                    <div style="font-weight: 600; margin-bottom: 12px;">‚öôÔ∏è Batch Settings (apply to all)</div>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;">
                        <div>
                            <label class="form-label">Default Role</label>
                            <select id="bulkAddRole" class="form-input" onchange="applyBulkRole()">
                                <option value="Incubator">Incubator</option>
                                <option value="Closer">Closer</option>
                                <option value="Creatives">Creatives</option>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">Default Status</label>
                            <select id="bulkAddStatus" class="form-input" onchange="applyBulkStatus()">
                                <option value="Active">Active</option>
                                
                                <option value="On Hold">On Hold</option>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">Auto-Suggest Role</label>
                            <label style="display: flex; align-items: center; gap: 8px; margin-top: 8px; cursor: pointer;">
                                <input type="checkbox" id="bulkAutoSuggestRole" checked onchange="recalculateSuggestedRoles()">
                                <span style="font-size: 0.85rem;">Based on GMV (>$500 = Closer)</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Cross-brand hint -->
                <div id="crossBrandHint" style="display: none; background: var(--blue-dim); color: var(--blue); padding: 12px; border-radius: 8px; margin-bottom: 16px; font-size: 0.9rem;">
                    <strong>üí° Cross-Brand Match:</strong> <span id="crossBrandMessage"></span>
                </div>
                
                <!-- Creators Table -->
                <div style="border: 1px solid var(--border); border-radius: 10px; overflow: hidden;">
                    <table style="width: 100%; border-collapse: collapse; font-size: 0.9rem;">
                        <thead>
                            <tr style="background: var(--bg-secondary);">
                                <th style="text-align: left; padding: 12px; width: 30px;">
                                    <input type="checkbox" id="bulkSelectAll" checked onchange="toggleBulkSelectAll()">
                                </th>
                                <th style="text-align: left; padding: 12px;">TikTok</th>
                                <th style="text-align: left; padding: 12px;">Brand</th>
                                <th style="text-align: right; padding: 12px;">GMV</th>
                                <th style="text-align: left; padding: 12px;">Discord <span style="color: var(--danger);">*</span></th>
                                <th style="text-align: left; padding: 12px;">Role</th>
                                <th style="text-align: center; padding: 12px; width: 60px;">Match</th>
                            </tr>
                        </thead>
                        <tbody id="bulkAddTableBody">
                            <!-- Populated dynamically -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Summary -->
                <div style="margin-top: 16px; padding: 12px; background: var(--bg-secondary); border-radius: 8px; display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <span id="bulkAddCount">0</span> creators selected
                        <span id="bulkAddWarning" style="color: var(--warning); margin-left: 12px; display: none;">‚ö†Ô∏è <span id="bulkAddWarningCount">0</span> missing Discord</span>
                    </div>
                    <div style="font-size: 0.85rem; color: var(--text-muted);">
                        Tip: Fill Discord names to properly track creators
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="display: flex; gap: 12px; justify-content: space-between;">
                <button class="btn btn-secondary" onclick="closeBulkAddModal()">Cancel</button>
                <div style="display: flex; gap: 12px;">
                    <button class="btn" onclick="addBulkWithoutDiscord()" style="background: var(--warning); color: #1a1a1a;">
                        ‚ö° Quick Add (Skip Discord)
                    </button>
                    <button class="btn btn-primary" onclick="submitBulkAdd()">
                        ‚úÖ Add to Roster
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- CSV Import Modal -->
    <div class="modal-overlay" id="csvImportModal">
        <div class="modal" style="max-width: 700px;">
            <div class="modal-header">
                <h3 class="modal-title">üìÅ Import Creators from CSV</h3>
                <button class="modal-close" onclick="closeCSVImportModal()">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Instructions -->
                <div style="background: var(--bg-secondary); padding: 16px; border-radius: 10px; margin-bottom: 20px;">
                    <div style="font-weight: 600; margin-bottom: 8px;">üìã CSV Format</div>
                    <div style="font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px;">
                        Your CSV should have headers. Supported columns:
                    </div>
                    <div style="display: flex; flex-wrap: wrap; gap: 8px; font-size: 0.8rem;">
                        <span style="background: var(--accent); color: #1a1a1a; padding: 4px 8px; border-radius: 4px;">tiktok *</span>
                        <span style="background: var(--bg-card); padding: 4px 8px; border-radius: 4px; border: 1px solid var(--border);">discord</span>
                        <span style="background: var(--bg-card); padding: 4px 8px; border-radius: 4px; border: 1px solid var(--border);">name</span>
                        <span style="background: var(--bg-card); padding: 4px 8px; border-radius: 4px; border: 1px solid var(--border);">email</span>
                        <span style="background: var(--bg-card); padding: 4px 8px; border-radius: 4px; border: 1px solid var(--border);">brand</span>
                        <span style="background: var(--bg-card); padding: 4px 8px; border-radius: 4px; border: 1px solid var(--border);">role</span>
                    </div>
                    <button class="btn btn-small" style="margin-top: 12px;" onclick="downloadCSVTemplate()">üì• Download Template</button>
                </div>
                
                <!-- File Upload -->
                <div style="border: 2px dashed var(--border); border-radius: 10px; padding: 32px; text-align: center; margin-bottom: 20px;" id="csvDropZone">
                    <div style="font-size: 2rem; margin-bottom: 8px;">üìÑ</div>
                    <div style="margin-bottom: 12px;">Drag & drop CSV file here or</div>
                    <input type="file" id="csvFileInput" accept=".csv" style="display: none;" onchange="handleCSVUpload(event)">
                    <button class="btn btn-primary" onclick="document.getElementById('csvFileInput').click()">Choose File</button>
                </div>
                
                <!-- Preview -->
                <div id="csvPreviewSection" style="display: none;">
                    <div style="font-weight: 600; margin-bottom: 12px;">üëÄ Preview (<span id="csvPreviewCount">0</span> rows)</div>
                    <div style="border: 1px solid var(--border); border-radius: 8px; max-height: 200px; overflow: auto;">
                        <table style="width: 100%; border-collapse: collapse; font-size: 0.85rem;">
                            <thead id="csvPreviewHead"></thead>
                            <tbody id="csvPreviewBody"></tbody>
                        </table>
                    </div>
                    <div id="csvImportStats" style="margin-top: 12px; padding: 12px; background: var(--bg-secondary); border-radius: 8px; font-size: 0.85rem;"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeCSVImportModal()">Cancel</button>
                <button class="btn btn-primary" id="csvImportBtn" onclick="executeCSVImport()" disabled>üì• Import</button>
            </div>
        </div>
    </div>

    <!-- Add/Edit Creator Modal -->
    <div class="modal-overlay" id="creatorModal">
        <div class="modal" style="max-width: 600px;">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Add Creator</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
                <input type="hidden" id="editCreatorId">
                
                <!-- Validation Error Banner -->
                <div id="creatorValidationError" style="display: none; background: var(--danger-dim); color: var(--danger); padding: 12px; border-radius: 8px; margin-bottom: 16px; font-size: 0.9rem;">
                    <strong>‚ö†Ô∏è Missing Required Fields:</strong>
                    <span id="creatorValidationMessage"></span>
                </div>
                
                <!-- Required Fields Notice -->
                <div style="background: var(--bg-secondary); padding: 10px 12px; border-radius: 8px; margin-bottom: 16px; font-size: 0.85rem; color: var(--text-muted);">
                    <span style="color: var(--danger);">*</span> Required fields ‚Äî Discord and TikTok are needed for roster tracking
                </div>
                
                <!-- Basic Info Section -->
                <div style="margin-bottom: 16px; padding-bottom: 12px; border-bottom: 1px solid var(--border);">
                    <div style="font-weight: 600; margin-bottom: 12px; color: var(--text-secondary);">üë§ Basic Info</div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Real Name</label>
                            <input type="text" class="form-input" id="creatorRealName" placeholder="Enter real name">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Discord Name <span style="color: var(--danger);">*</span></label>
                            <input type="text" class="form-input" id="creatorDiscord" placeholder="Discord username" required onblur="checkExistingDiscord()">
                            <div id="existingCreatorHint" style="display: none; margin-top: 6px; padding: 8px 12px; background: var(--blue-dim); color: var(--blue); border-radius: 6px; font-size: 0.8rem;">
                                <strong>‚ÑπÔ∏è Existing Creator</strong> ‚Äî <span id="existingCreatorBrands"></span>
                                <button type="button" onclick="autoFillFromDiscord()" style="margin-left: 8px; padding: 2px 8px; font-size: 0.75rem; background: var(--blue); color: white; border: none; border-radius: 4px; cursor: pointer;">Auto-Fill Info</button>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-input" id="creatorEmail" placeholder="email@example.com">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Phone</label>
                            <input type="tel" class="form-input" id="creatorPhone" placeholder="(555) 123-4567">
                        </div>
                    </div>
                </div>

                <!-- Role & Status Section -->
                <div style="margin-bottom: 16px; padding-bottom: 12px; border-bottom: 1px solid var(--border);">
                    <div style="font-weight: 600; margin-bottom: 12px; color: var(--text-secondary);">üè∑Ô∏è Classification</div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Brand <span style="color: var(--danger);">*</span></label>
                            <select class="form-input" id="creatorBrand" onchange="onCreatorBrandChange()">
                                <option value="catakor">Cata-Kor</option>
                                <option value="jiyu">JiYu</option>
                                <option value="physicians_choice">Physicians Choice</option>
                                <option value="peach_slices">Peach Slices</option>
                                <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Role</label>
                            <select class="form-input" id="creatorRole">
                                <option value="Incubator">Incubator</option>
                                <option value="Closer">Closer</option>
                                <option value="Creatives">Creatives</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Status</label>
                            <select class="form-input" id="creatorStatus">
                                <option value="Active">Active</option>
                                
                                <option value="On Hold">On Hold</option>
                                <option value="Churned">Churned</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Post Requirement</label>
                            <select class="form-input" id="creatorMonthlyPostReq" onchange="updateContractSummary()">
                                <option value="30">30 posts</option>
                                <option value="20">20 posts</option>
                                <option value="15">15 posts</option>
                                <option value="10">10 posts</option>
                                <option value="5">5 posts</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Contract Length</label>
                            <select class="form-input" id="creatorContractLength" onchange="updateContractSummary()">
                                <option value="30">30 days (standard)</option>
                                <option value="45">45 days</option>
                                <option value="60">60 days</option>
                                <option value="90">90 days</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Contract Start Date</label>
                            <div style="display: flex; gap: 8px;">
                                <input type="date" class="form-input" id="creatorRetainerStartDate" style="flex: 1;">
                                <button type="button" class="btn btn-sm" onclick="setContractStartToday()" title="Start new contract period today" style="padding: 8px; white-space: nowrap;">üìÖ Today</button>
                            </div>
                            <small style="color: var(--text-muted); display: block; margin-top: 4px;">When their current contract period began</small>
                        </div>
                        <div class="form-group">
                            <!-- Contract summary -->
                            <label class="form-label">Contract Summary</label>
                            <div id="contractSummary" style="padding: 8px 12px; background: var(--bg-secondary); border-radius: 6px; font-size: 0.85rem; color: var(--text-muted);">
                                30 posts in 30 days
                            </div>
                        </div>
                    </div>
                    
                    <!-- Performance Metrics (shown when editing) -->
                    <div id="creatorPerformanceMetrics" style="display: none; margin-top: 12px; padding: 12px; background: var(--bg-secondary); border-radius: 8px;">
                        <div style="font-weight: 600; margin-bottom: 8px; font-size: 0.85rem; display: flex; justify-content: space-between; align-items: center;">
                            <span>üìä Performance Metrics (Last 90 Days)</span>
                            <button type="button" class="btn btn-sm" onclick="refreshCreatorMetrics()" style="padding: 4px 8px; font-size: 0.75rem;">üîÑ</button>
                        </div>
                        <div id="creatorMetricsContent" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; font-size: 0.85rem;">
                            <div style="text-align: center;">
                                <div style="color: var(--text-muted); font-size: 0.75rem;">GMV</div>
                                <div id="metricGmv" style="font-weight: 700; color: var(--success);">$0</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="color: var(--text-muted); font-size: 0.75rem;">Orders</div>
                                <div id="metricOrders" style="font-weight: 700;">0</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="color: var(--text-muted); font-size: 0.75rem;">Last Active</div>
                                <div id="metricLastActive" style="font-weight: 700;">‚Äî</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="color: var(--text-muted); font-size: 0.75rem;">Retainer ROI</div>
                                <div id="metricRetainerRoi" style="font-weight: 700;">‚Äî</div>
                            </div>
                        </div>
                        <div id="creatorHealthIndicator" style="margin-top: 10px; padding: 8px; border-radius: 6px; font-size: 0.8rem; text-align: center;"></div>
                    </div>
                </div>
                
                <!-- Compensation Section -->
                <div id="compensationSection" style="margin-bottom: 16px; padding-bottom: 12px; border-bottom: 1px solid var(--border);">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                        <div style="font-weight: 600; color: var(--text-secondary);">üí∞ Compensation</div>
                        <button type="button" class="btn btn-sm" onclick="showRetainerHistory()" title="View retainer history" style="padding: 4px 8px; font-size: 0.75rem;">üìú History</button>
                    </div>
                    
                    <!-- Base Brand Retainer -->
                    <div style="display: flex; align-items: center; gap: 12px; padding: 12px; background: var(--bg-secondary); border-radius: 8px; border: 1px solid var(--border); margin-bottom: 8px;">
                        <div style="flex: 1;">
                            <div style="font-weight: 500; font-size: 0.9rem;">Brand Base Retainer</div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">Monthly payment for overall brand work</div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <button type="button" id="baseAffiliateBtn" class="btn btn-sm" onclick="toggleBaseAffiliate()" style="padding: 4px 10px; font-size: 0.75rem;">
                                Affiliate
                            </button>
                            <div style="display: flex; align-items: center; gap: 4px;">
                                <span style="color: var(--text-muted); font-size: 0.85rem;">$</span>
                                <input type="number" class="form-input" id="creatorRetainer" placeholder="0" value="0" style="width: 90px; padding: 6px 10px; text-align: right;" onchange="updateCompensationTotal()">
                                <span style="color: var(--text-muted); font-size: 0.75rem;">/mo</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Product Retainers (dynamically loaded) -->
                    <div id="productRetainersContainer" style="display: flex; flex-direction: column; gap: 8px;">
                        <!-- Products will be loaded here -->
                    </div>
                    
                    <!-- Total -->
                    <div id="compensationTotalRow" style="display: none; margin-top: 12px; padding: 10px 12px; background: linear-gradient(135deg, var(--accent-dim), transparent); border-radius: 8px; border: 1px solid var(--accent);">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="font-weight: 600; color: var(--text-secondary);">Total Monthly</span>
                            <span id="compensationTotal" style="font-weight: 700; font-size: 1.1rem; color: var(--accent);">$0/mo</span>
                        </div>
                    </div>
                </div>

                <!-- CRM Section -->
                <div style="margin-bottom: 16px; padding-bottom: 12px; border-bottom: 1px solid var(--border);">
                    <div style="font-weight: 600; margin-bottom: 12px; color: var(--text-secondary);">üí¨ Discord & Follow-up</div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Discord Channel ID</label>
                            <div style="display: flex; gap: 8px;">
                                <input type="text" class="form-input" id="creatorDiscordChannelId" placeholder="e.g. 1234567890123456789" style="flex: 1;">
                                <button type="button" class="btn btn-sm" onclick="testDiscordLink()" title="Test link" style="padding: 8px;">üîó</button>
                            </div>
                            <small style="color: var(--text-muted); display: block; margin-top: 4px;">Right-click creator's coaching channel ‚Üí Copy Link ‚Üí paste channel ID</small>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Discord User ID</label>
                            <input type="text" class="form-input" id="creatorDiscordUserId" placeholder="For @mentions (optional)">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Last Contact Date</label>
                            <input type="date" class="form-input" id="creatorLastContact">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Next Follow-up Date</label>
                            <input type="date" class="form-input" id="creatorNextFollowup">
                        </div>
                    </div>
                </div>

                <!-- TikTok Accounts Section -->
                <div style="margin-bottom: 16px; padding-bottom: 12px; border-bottom: 1px solid var(--border);">
                    <div style="font-weight: 600; margin-bottom: 12px; color: var(--text-secondary);">üé¨ TikTok Accounts</div>
                    <div class="form-group">
                        <label class="form-label">Primary Account <span style="color: var(--danger);">*</span></label>
                        <input type="text" class="form-input" id="creatorAccount1" placeholder="username (without @)" required onblur="checkCrossBrandTikTok()">
                        <div id="crossBrandTikTokHint" style="display: none; margin-top: 6px; padding: 8px 12px; background: var(--blue-dim); color: var(--blue); border-radius: 6px; font-size: 0.8rem;">
                            <strong>üí° Found in other brand:</strong> <span id="crossBrandTikTokInfo"></span>
                            <button type="button" onclick="autoFillFromTikTok()" style="margin-left: 8px; padding: 2px 8px; font-size: 0.75rem; background: var(--blue); color: white; border: none; border-radius: 4px; cursor: pointer;">Copy Info</button>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Account 2</label>
                            <input type="text" class="form-input" id="creatorAccount2" placeholder="optional">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Account 3</label>
                            <input type="text" class="form-input" id="creatorAccount3" placeholder="optional">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Account 4</label>
                            <input type="text" class="form-input" id="creatorAccount4" placeholder="optional">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Account 5</label>
                            <input type="text" class="form-input" id="creatorAccount5" placeholder="optional">
                        </div>
                    </div>
                </div>

                <!-- Notes Section -->
                <div>
                    <div style="font-weight: 600; margin-bottom: 12px; color: var(--text-secondary);">üìù Notes</div>
                    <div class="form-group">
                        <textarea class="form-input" id="creatorNotes" placeholder="Add notes about this creator..." rows="3" style="resize: vertical;"></textarea>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                <button class="btn btn-primary" onclick="saveCreator()">Save</button>
            </div>
        </div>
    </div>

    <!-- Goal Modal -->
    <div class="modal-overlay" id="goalModal">
        <div class="modal" style="max-width: 450px;">
            <div class="modal-header">
                <h3 class="modal-title">Set Goal</h3>
                <button class="modal-close" onclick="closeGoalModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Goal Type</label>
                    <select class="form-input" id="goalType">
                        <option value="overall">Overall (All Brands)</option>
                        <option value="brand">Specific Brand</option>
                    </select>
                </div>
                <div class="form-group" id="goalBrandGroup" style="display:none;">
                    <label class="form-label">Brand</label>
                    <select class="form-input" id="goalBrand">
                        <option value="catakor">Cata-Kor</option>
                        <option value="jiyu">JiYu</option>
                        <option value="physicians_choice">Physicians Choice</option>
                        <option value="peach_slices">Peach Slices</option>
                        <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Period</label>
                    <select class="form-input" id="goalPeriod">
                        <option value="weekly">Weekly</option>
                        <option value="monthly">Monthly</option>
                        <option value="quarterly">Quarterly</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Target GMV ($)</label>
                    <input type="number" class="form-input" id="goalTargetGmv" placeholder="50000">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeGoalModal()">Cancel</button>
                <button class="btn btn-primary" onclick="saveGoal()">Save Goal</button>
            </div>
        </div>
    </div>

    <!-- Comparison Modal -->
    <div class="modal-overlay" id="comparisonModal">
        <div class="modal" style="max-width: 900px;">
            <div class="modal-header">
                <h3 class="modal-title">‚öñÔ∏è Compare Periods</h3>
                <button class="modal-close" onclick="closeComparisonModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 20px;">
                    <div>
                        <label class="form-label">Period A (Base)</label>
                        <div style="display: flex; gap: 8px;">
                            <input type="text" class="form-input" id="compareStartA" placeholder="Start" readonly>
                            <input type="text" class="form-input" id="compareEndA" placeholder="End" readonly>
                        </div>
                    </div>
                    <div>
                        <label class="form-label">Period B (Compare)</label>
                        <div style="display: flex; gap: 8px;">
                            <input type="text" class="form-input" id="compareStartB" placeholder="Start" readonly>
                            <input type="text" class="form-input" id="compareEndB" placeholder="End" readonly>
                        </div>
                    </div>
                </div>
                <button class="btn btn-primary" onclick="runComparison()" style="margin-bottom: 20px;">üîç Compare</button>
                <div id="comparisonResults" style="display: none;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
                        <div class="card" style="margin: 0;">
                            <div class="card-title">Period A</div>
                            <div id="comparisonA"></div>
                        </div>
                        <div class="card" style="margin: 0;">
                            <div class="card-title">Period B</div>
                            <div id="comparisonB"></div>
                        </div>
                    </div>
                    <div class="card" style="margin-top: 16px;">
                        <div class="card-title">üìä Change Summary</div>
                        <div id="comparisonSummary"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Subscriber Modal -->
    <div class="modal-overlay" id="subscriberModal">
        <div class="modal" style="max-width: 500px;">
            <div class="modal-header">
                <h3 class="modal-title" id="subscriberModalTitle">Add Subscriber</h3>
                <button class="modal-close" onclick="closeSubscriberModal()">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="editSubscriberId">
                <div class="form-group">
                    <label class="form-label">Name *</label>
                    <input type="text" class="form-input" id="subscriberName" placeholder="John Smith">
                </div>
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" id="subscriberEmail" placeholder="john@example.com">
                </div>
                <div class="form-group">
                    <label class="form-label">Phone (with country code)</label>
                    <input type="tel" class="form-input" id="subscriberPhone" placeholder="+12125551234">
                </div>
                <div class="form-group">
                    <label class="form-label">Brand Filter</label>
                    <select class="form-input" id="subscriberBrand">
                        <option value="">All Brands</option>
                        <option value="catakor">Cata-Kor</option>
                        <option value="jiyu">JiYu</option>
                        <option value="physicians_choice">Physicians Choice</option>
                        <option value="peach_slices">Peach Slices</option>
                        <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                    </select>
                    <small style="color: var(--text-muted); display: block; margin-top: 6px;">
                        Leave as "All Brands" to receive alerts for all brands
                    </small>
                </div>
                <div class="form-group">
                    <label class="form-label">Notifications</label>
                    <div style="display: flex; flex-direction: column; gap: 8px; margin-top: 8px;">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="subNotifyWins" checked> Daily Wins
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="subNotifyWeekly" checked> Weekly Summary
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="subNotifyAttention" checked> Attention Alerts
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="subNotifyGoals"> Goal Progress
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeSubscriberModal()">Cancel</button>
                <button class="btn btn-primary" onclick="saveSubscriber()">Save Subscriber</button>
            </div>
        </div>
    </div>

    <!-- Creator Notes Modal -->
    <div class="modal-overlay" id="notesModal">
        <div class="modal" style="max-width: 600px;">
            <div class="modal-header">
                <h3 class="modal-title">üìù Creator Notes: <span id="notesCreatorName">-</span></h3>
                <button class="modal-close" onclick="closeNotesModal()">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="notesCreatorHandle">
                <input type="hidden" id="notesCreatorBrand">
                
                <!-- Add New Note -->
                <div class="form-group">
                    <label class="form-label">Add Note</label>
                    <div style="display: flex; gap: 8px; margin-bottom: 8px;">
                        <select class="form-input" id="noteType" style="width: 140px;">
                            <option value="general">üìã General</option>
                            <option value="payment">üí≥ Payment</option>
                            <option value="performance">üìà Performance</option>
                            <option value="communication">üí¨ Communication</option>
                            <option value="urgent">üö® Urgent</option>
                        </select>
                        <label style="display: flex; align-items: center; gap: 4px; font-size: 0.85rem;">
                            <input type="checkbox" id="notePinned"> Pin
                        </label>
                    </div>
                    <textarea class="form-input" id="noteText" rows="3" placeholder="Add a note about this creator..."></textarea>
                </div>
                <button class="btn btn-primary" onclick="saveCreatorNote()" style="margin-bottom: 20px;">‚ûï Add Note</button>
                
                <!-- Existing Notes -->
                <div class="form-label">History</div>
                <div id="notesHistory" style="max-height: 300px; overflow-y: auto;">
                    <div style="text-align: center; color: var(--text-muted); padding: 20px;">No notes yet</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Smart Match Modal -->
    <div class="modal-overlay" id="smartMatchModal">
        <div class="modal" style="max-width: 1000px; height: 85vh; display: flex; flex-direction: column;">
            <div class="modal-header">
                <h3 class="modal-title">üîó Smart Match Tool</h3>
                <button class="modal-close" onclick="closeSmartMatchModal()">&times;</button>
            </div>
            <div class="modal-body" style="flex: 1; overflow: hidden; display: flex; flex-direction: column; padding: 0;">
                <!-- Tabs -->
                <div style="display: flex; border-bottom: 1px solid var(--border); background: var(--bg-secondary); flex-wrap: wrap;">
                    <button class="smart-match-tab active" onclick="switchSmartMatchTab('orphanPerformance')" id="tabOrphanPerformance">
                        üìä Unlinked Performance
                        <span class="tab-count" id="orphanPerformanceCount">0</span>
                    </button>
                    <button class="smart-match-tab" onclick="switchSmartMatchTab('missingDiscord')" id="tabMissingDiscord">
                        ‚ö†Ô∏è Missing Discord
                        <span class="tab-count" id="missingDiscordTabCount">0</span>
                    </button>
                    <button class="smart-match-tab" onclick="switchSmartMatchTab('missingTikTok')" id="tabMissingTikTok">
                        üö® Missing TikTok
                        <span class="tab-count" id="missingTikTokTabCount">0</span>
                    </button>
                    <button class="smart-match-tab" onclick="switchSmartMatchTab('missingName')" id="tabMissingName">
                        üë§ Missing Name
                        <span class="tab-count" id="missingNameTabCount">0</span>
                    </button>
                    <button class="smart-match-tab" onclick="switchSmartMatchTab('duplicates')" id="tabDuplicates">
                        üë• Duplicates
                        <span class="tab-count" id="duplicatesTabCount">0</span>
                    </button>
                </div>
                
                <!-- Filter Bar -->
                <div style="padding: 12px 16px; background: var(--bg-primary); border-bottom: 1px solid var(--border); display: flex; gap: 12px; align-items: center;">
                    <select id="smartMatchBrandFilter" onchange="runSmartMatch()" style="padding: 6px 12px; border-radius: 6px; background: var(--bg-secondary); border: 1px solid var(--border); color: var(--text-primary);">
                        <option value="all">All Brands</option>
                        <option value="catakor">Cata-Kor</option>
                        <option value="jiyu">JiYu</option>
                        <option value="physicians_choice">Physicians Choice</option>
                        <option value="peach_slices">Peach Slices</option>
                        <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                    </select>
                    <input type="text" id="smartMatchSearch" placeholder="Search..." onkeyup="filterSmartMatchResults()" style="padding: 6px 12px; border-radius: 6px; background: var(--bg-secondary); border: 1px solid var(--border); color: var(--text-primary); flex: 1; max-width: 250px;">
                    <div style="flex: 1;"></div>
                    <button class="btn btn-secondary" onclick="runSmartMatch()" style="padding: 6px 12px;">üîÑ Refresh</button>
                </div>
                
                <!-- Results Container -->
                <div id="smartMatchResults" style="flex: 1; overflow-y: auto; padding: 16px;">
                    <div class="loading"><div class="spinner"></div> Analyzing data...</div>
                </div>
            </div>
            <div class="modal-footer" style="border-top: 1px solid var(--border); padding: 12px 16px; display: flex; justify-content: space-between; align-items: center;">
                <div id="smartMatchSelectedCount" style="color: var(--text-muted);">0 selected</div>
                <div style="display: flex; gap: 8px;">
                    <button class="btn btn-secondary" onclick="closeSmartMatchModal()">Close</button>
                    <button class="btn btn-primary" onclick="applySmartMatches()" id="applyMatchesBtn" disabled>Apply Selected Matches</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Merge Entries Modal -->
    <div class="modal-overlay" id="mergeEntriesModal">
        <div class="modal" style="max-width: 900px; max-height: 85vh; display: flex; flex-direction: column;">
            <div class="modal-header">
                <h3 class="modal-title">üîÄ Merge Duplicate Entries</h3>
                <button class="modal-close" onclick="closeMergeEntriesModal()">&times;</button>
            </div>
            <div class="modal-body" style="flex: 1; overflow-y: auto;">
                <p style="color: var(--text-muted); margin-bottom: 16px;">
                    These creators have multiple entries for the same brand. Select entries to merge into a single entry with multiple accounts.
                </p>
                <div id="mergeEntriesList">
                    <div class="loading"><div class="spinner"></div> Finding duplicates...</div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeMergeEntriesModal()">Close</button>
            </div>
        </div>
    </div>

    <!-- Payment Status Modal -->
    <div class="modal-overlay" id="paymentStatusModal">
        <div class="modal" style="max-width: 500px;">
            <div class="modal-header">
                <h3 class="modal-title">üí≥ Update Payment: <span id="paymentCreatorName">-</span></h3>
                <button class="modal-close" onclick="closePaymentStatusModal()">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="paymentRecordId">
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Status</label>
                        <select class="form-input" id="paymentStatus">
                            <option value="pending">‚è≥ Pending</option>
                            <option value="processing">üîÑ Processing</option>
                            <option value="paid">‚úÖ Paid</option>
                            <option value="issue">‚ö†Ô∏è Issue</option>
                            <option value="hold">‚è∏Ô∏è On Hold</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Payment Method</label>
                        <select class="form-input" id="paymentMethod">
                            <option value="">Select...</option>
                            <option value="paypal">PayPal</option>
                            <option value="lumanu">Lumanu</option>
                            <option value="wire">Wire Transfer</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Reference/Transaction ID</label>
                    <input type="text" class="form-input" id="paymentReference" placeholder="e.g., PayPal transaction ID">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Notes</label>
                    <textarea class="form-input" id="paymentNotes" rows="2" placeholder="Optional payment notes..."></textarea>
                </div>
                
                <div style="background: var(--bg-secondary); padding: 12px; border-radius: 8px; margin-bottom: 16px;">
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; text-align: center;">
                        <div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">GMV</div>
                            <div id="paymentGmv" style="font-weight: 700;">$0</div>
                        </div>
                        <div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">Rate</div>
                            <div id="paymentRate" style="font-weight: 700;">0%</div>
                        </div>
                        <div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">Amount</div>
                            <div id="paymentAmount" style="font-weight: 700; color: var(--accent);">$0</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closePaymentStatusModal()">Cancel</button>
                <button class="btn btn-primary" onclick="savePaymentStatus()">üíæ Save</button>
            </div>
        </div>
    </div>

    <!-- Retainer History Modal -->
    <div class="modal-overlay" id="retainerHistoryModal">
        <div class="modal" style="max-width: 600px;">
            <div class="modal-header">
                <h3 class="modal-title">üìú Retainer History</h3>
                <button class="modal-close" onclick="closeRetainerHistoryModal()">&times;</button>
            </div>
            <div class="modal-body" id="retainerHistoryContent" style="max-height: 400px; overflow-y: auto;">
                <div style="text-align: center; padding: 20px; color: var(--text-muted);">Loading...</div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeRetainerHistoryModal()">Close</button>
            </div>
        </div>
    </div>
    
    <!-- Contact Log Modal -->
    <div class="modal-overlay" id="contactLogModal">
        <div class="modal" style="max-width: 600px;">
            <div class="modal-header">
                <h3 class="modal-title">üìû Log Contact</h3>
                <button class="modal-close" onclick="closeContactLogModal()">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="contactCreatorId">
                <input type="hidden" id="contactCreatorKey">
                <input type="hidden" id="contactCreatorBrandKey">
                <input type="hidden" id="contactCreatorChannelId">
                
                <!-- Creator Info with Discord Button -->
                <div style="background: var(--bg-secondary); padding: 12px; border-radius: 8px; margin-bottom: 16px; display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <div style="font-weight: 600;" id="contactCreatorName">Creator Name</div>
                        <div style="font-size: 0.85rem; color: var(--text-muted);" id="contactCreatorBrand">Brand</div>
                    </div>
                    <button class="btn btn-primary" onclick="openDiscordFromModal()" style="display: flex; align-items: center; gap: 6px;" id="contactDiscordBtn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03z"/></svg>
                        Open Discord
                    </button>
                </div>
                
                <!-- Message Templates -->
                <div style="margin-bottom: 16px;">
                    <label class="form-label" style="margin-bottom: 8px;">Quick Message Templates</label>
                    <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                        <button type="button" class="btn btn-sm" onclick="useMessageTemplate('checkin')" style="font-size: 0.75rem;">üëã Check-in</button>
                        <button type="button" class="btn btn-sm" onclick="useMessageTemplate('warning')" style="font-size: 0.75rem; background: var(--warning-dim); color: var(--warning);">‚ö†Ô∏è Warning</button>
                        <button type="button" class="btn btn-sm" onclick="useMessageTemplate('final')" style="font-size: 0.75rem; background: var(--danger-dim); color: var(--danger);">üö® Final Notice</button>
                        <button type="button" class="btn btn-sm" onclick="useMessageTemplate('praise')" style="font-size: 0.75rem; background: var(--success-dim); color: var(--success);">üéâ Great Job</button>
                    </div>
                    <div id="messagePreview" style="display: none; margin-top: 12px; padding: 12px; background: var(--bg-primary); border-radius: 8px; border: 1px solid var(--border);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <span style="font-size: 0.75rem; color: var(--text-muted);">Message Preview:</span>
                            <button type="button" class="btn btn-sm" onclick="copyMessageToClipboard()" style="padding: 2px 8px; font-size: 0.7rem;">üìã Copy</button>
                        </div>
                        <div id="messageText" style="font-size: 0.9rem; white-space: pre-wrap;"></div>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                    <div class="form-group">
                        <label class="form-label">Method *</label>
                        <select class="form-input" id="contactMethod">
                            <option value="Discord">Discord</option>
                            <option value="Email">Email</option>
                            <option value="Phone">Phone Call</option>
                            <option value="Text">Text/SMS</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Type *</label>
                        <select class="form-input" id="contactType">
                            <option value="Check-in">Check-in</option>
                            <option value="Warning">‚ö†Ô∏è Warning</option>
                            <option value="Final Notice">üö® Final Notice</option>
                            <option value="Positive Feedback">üëè Positive Feedback</option>
                            <option value="Contract Discussion">üìù Contract Discussion</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Outcome</label>
                    <select class="form-input" id="contactOutcome">
                        <option value="">-- Select Outcome --</option>
                        <option value="No Response">No Response (yet)</option>
                        <option value="Acknowledged">Acknowledged</option>
                        <option value="Committed to Improve">Committed to Improve</option>
                        <option value="Excuse Given">Excuse Given</option>
                        <option value="Dispute">Dispute / Pushback</option>
                        <option value="Positive">Positive Response</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Notes</label>
                    <textarea class="form-input" id="contactNotes" rows="3" placeholder="Brief summary of conversation..."></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Set Follow-up Date</label>
                    <input type="date" class="form-input" id="contactFollowup">
                </div>
                
                <!-- Contact History -->
                <div style="margin-top: 20px; border-top: 1px solid var(--border); padding-top: 16px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                        <h4 style="margin: 0; font-size: 0.9rem;">üìã Contact History</h4>
                        <span style="font-size: 0.75rem; color: var(--text-muted);" id="contactHistoryCount">0 records</span>
                    </div>
                    <div id="contactHistoryList" style="max-height: 200px; overflow-y: auto;">
                        <div style="text-align: center; padding: 20px; color: var(--text-muted); font-size: 0.85rem;">No previous contacts</div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeContactLogModal()">Cancel</button>
                <button class="btn btn-primary" onclick="saveContactLog()">üíæ Save Contact</button>
            </div>
        </div>
    </div>
    
    <!-- Weekly Review Detail Modal -->
    <div class="modal-overlay" id="weeklyDetailModal">
        <div class="modal" style="max-width: 900px; max-height: 90vh;">
            <div class="modal-header">
                <h3 class="modal-title" id="weeklyDetailTitle">üåü Top Performers</h3>
                <button class="modal-close" onclick="closeWeeklyDetailModal()">&times;</button>
            </div>
            <div class="modal-body" style="padding: 0;">
                <!-- Summary Stats -->
                <div id="weeklyDetailSummary" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; padding: 16px; background: var(--bg-secondary); border-bottom: 1px solid var(--border);">
                    <!-- Dynamically filled -->
                </div>
                
                <!-- Filter/Sort Bar -->
                <div id="weeklyDetailFilters" style="display: flex; gap: 12px; padding: 12px 16px; background: var(--bg-primary); border-bottom: 1px solid var(--border); flex-wrap: wrap; align-items: center;">
                    <div style="display: flex; align-items: center; gap: 6px;">
                        <span style="font-size: 0.75rem; color: var(--text-muted);">üîç</span>
                        <input type="text" id="weeklyDetailSearch" placeholder="Search creator..." 
                            style="padding: 6px 10px; border: 1px solid var(--border); border-radius: 6px; background: var(--bg-secondary); color: var(--text-primary); font-size: 0.85rem; width: 150px;"
                            oninput="applyWeeklyDetailFilters()">
                    </div>
                    <div style="display: flex; align-items: center; gap: 6px;">
                        <span style="font-size: 0.75rem; color: var(--text-muted);">Brand:</span>
                        <select id="weeklyDetailBrand" style="padding: 6px 10px; border: 1px solid var(--border); border-radius: 6px; background: var(--bg-secondary); color: var(--text-primary); font-size: 0.85rem;" onchange="applyWeeklyDetailFilters()">
                            <option value="all">All Brands</option>
                            <option value="catakor">Cata-Kor</option>
                            <option value="jiyu">JiYu</option>
                            <option value="physicians_choice">Physicians Choice</option>
                            <option value="peach_slices">Peach Slices</option>
                            <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                        </select>
                    </div>
                    <div style="display: flex; align-items: center; gap: 6px;">
                        <span style="font-size: 0.75rem; color: var(--text-muted);">Retainer:</span>
                        <select id="weeklyDetailRetainer" style="padding: 6px 10px; border: 1px solid var(--border); border-radius: 6px; background: var(--bg-secondary); color: var(--text-primary); font-size: 0.85rem;" onchange="applyWeeklyDetailFilters()">
                            <option value="all">All</option>
                            <option value="has">With Retainer</option>
                            <option value="affiliate">Affiliate ($0)</option>
                            <option value="none">Not Set</option>
                        </select>
                    </div>
                    <div style="display: flex; align-items: center; gap: 6px; margin-left: auto;">
                        <span style="font-size: 0.75rem; color: var(--text-muted);">Sort:</span>
                        <select id="weeklyDetailSort" style="padding: 6px 10px; border: 1px solid var(--border); border-radius: 6px; background: var(--bg-secondary); color: var(--text-primary); font-size: 0.85rem;" onchange="applyWeeklyDetailFilters()">
                            <!-- Options populated dynamically based on type -->
                        </select>
                    </div>
                    <span id="weeklyDetailCount" style="font-size: 0.75rem; color: var(--text-muted);"></span>
                </div>
                
                <!-- Table -->
                <div class="table-container" style="max-height: 45vh; overflow-y: auto;">
                    <table>
                        <thead id="weeklyDetailHead">
                            <tr>
                                <th>Creator</th>
                                <th>Brand</th>
                                <th style="text-align: right;">GMV</th>
                            </tr>
                        </thead>
                        <tbody id="weeklyDetailBody">
                            <tr><td colspan="5" style="padding: 40px; text-align: center; color: var(--text-muted);">Loading...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer" style="display: flex; justify-content: space-between;">
                <button class="btn" onclick="exportWeeklyDetail()">üì• Export CSV</button>
                <div style="display: flex; gap: 8px;">
                    <button class="btn" onclick="copyWeeklyDetailForDiscord()">üì§ Copy for Discord</button>
                    <button class="btn btn-secondary" onclick="closeWeeklyDetailModal()">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bulk Payment Modal -->
    <div class="modal-overlay" id="bulkPaymentModal">
        <div class="modal" style="max-width: 500px;">
            <div class="modal-header">
                <h3 class="modal-title">üí∏ Bulk Payment Update</h3>
                <button class="modal-close" onclick="closeBulkPaymentModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Set Status For Selected</label>
                    <select class="form-input" id="bulkPaymentStatus">
                        <option value="processing">üîÑ Mark as Processing</option>
                        <option value="paid">‚úÖ Mark as Paid</option>
                        <option value="hold">‚è∏Ô∏è Put on Hold</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Payment Method</label>
                    <select class="form-input" id="bulkPaymentMethod">
                        <option value="">Keep Existing</option>
                        <option value="paypal">PayPal</option>
                        <option value="lumanu">Lumanu</option>
                        <option value="wire">Wire Transfer</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Reference (applied to all)</label>
                    <input type="text" class="form-input" id="bulkPaymentReference" placeholder="Batch payment reference">
                </div>
                
                <div style="background: var(--accent-dim); padding: 12px; border-radius: 8px; border: 1px solid rgba(245, 197, 24, 0.3);">
                    <div style="font-weight: 600; color: var(--accent);" id="bulkPaymentSummary">0 payments selected</div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeBulkPaymentModal()">Cancel</button>
                <button class="btn btn-primary" onclick="applyBulkPayment()">‚úÖ Apply to Selected</button>
            </div>
        </div>
    </div>

    <!-- Edit User Modal -->
    <div class="modal-overlay" id="editUserModal">
        <div class="modal" style="max-width: 500px;">
            <div class="modal-header">
                <h3 class="modal-title">üë§ Edit User</h3>
                <button class="modal-close" onclick="closeEditUserModal()">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="editUserId">
                
                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 20px; padding: 12px; background: var(--bg-secondary); border-radius: 8px;">
                    <div id="editUserAvatar" style="width: 48px; height: 48px; border-radius: 50%; background: var(--accent-dim); border: 2px solid var(--accent); display: flex; align-items: center; justify-content: center; font-weight: 700; color: var(--accent); font-size: 1.2rem;">?</div>
                    <div>
                        <div id="editUserName" style="font-weight: 600; font-size: 1.1rem;">User Name</div>
                        <div id="editUserEmail" style="font-size: 0.85rem; color: var(--text-muted);"></div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Status</label>
                    <select class="form-input" id="editUserStatus">
                        <option value="pending">‚è≥ Pending</option>
                        <option value="approved">‚úÖ Approved</option>
                        <option value="rejected">‚ùå Rejected</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Role</label>
                    <select class="form-input" id="editUserRole" onchange="toggleUserRoleFields()">
                        <option value="admin">üëë Admin</option>
                        <option value="content_lead">üéØ Content Lead</option>
                        <option value="analyst">üìä Analyst</option>
                        <option value="payments">üí∞ Payments</option>
                        <option value="automations">‚öôÔ∏è Automations</option>
                        <option value="va">üìã VA</option>
                        <option value="creator">üé¨ Creator</option>
                        <option value="brand">üè∑Ô∏è Brand Client</option>
                    </select>
                </div>
                
                <div id="creatorFields">
                    <div class="form-group">
                        <label class="form-label">Creator Handle (TikTok @username)</label>
                        <input type="text" class="form-input" id="editCreatorHandle" placeholder="@username">
                    </div>
                </div>
                
                <div id="brandFields" style="display: none;">
                    <div class="form-group">
                        <label class="form-label">Assigned Brand</label>
                        <select class="form-input" id="editUserBrand">
                            <option value="">Select Brand...</option>
                            <option value="catakor">Cata-Kor</option>
                            <option value="jiyu">JiYu</option>
                            <option value="physicians_choice">Physicians Choice</option>
                            <option value="peach_slices">Peach Slices</option>
                            <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger" onclick="rejectUser()" style="margin-right: auto;">‚ùå Reject</button>
                <button class="btn btn-secondary" onclick="closeEditUserModal()">Cancel</button>
                <button class="btn btn-primary" onclick="saveUserChanges()">üíæ Save</button>
            </div>
        </div>
    </div>

    <!-- Application Review Modal -->
    <!-- Generate Payments Modal -->
    <div class="modal-overlay" id="generatePaymentsModal">
        <div class="modal" style="max-width: 600px;">
            <div class="modal-header" style="background: linear-gradient(135deg, var(--success-dim), var(--bg-card));">
                <h3 class="modal-title">‚ûï Generate Payments</h3>
                <button class="modal-close" onclick="closeGeneratePaymentsModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p style="color: var(--text-secondary); margin-bottom: 20px;">
                    Calculate commissions for managed creators based on their performance data and commission rates from the Roster.
                </p>
                
                <!-- Date Range -->
                <div class="form-group">
                    <label class="form-label">Pay Period</label>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                        <div>
                            <label style="font-size: 0.75rem; color: var(--text-muted);">Start Date</label>
                            <input type="date" class="form-input" id="payPeriodStart">
                        </div>
                        <div>
                            <label style="font-size: 0.75rem; color: var(--text-muted);">End Date</label>
                            <input type="date" class="form-input" id="payPeriodEnd">
                        </div>
                    </div>
                </div>
                
                <!-- Quick Select -->
                <div style="display: flex; gap: 8px; margin-bottom: 20px; flex-wrap: wrap;">
                    <button class="btn btn-sm" onclick="setPayPeriodLastWeek()">Last Week</button>
                    <button class="btn btn-sm" onclick="setPayPeriodLast2Weeks()">Last 2 Weeks</button>
                    <button class="btn btn-sm" onclick="setPayPeriodLastMonth()">Last Month</button>
                    <button class="btn btn-sm" onclick="setPayPeriodThisMonth()">This Month (so far)</button>
                </div>
                
                <!-- Brand Selection -->
                <div class="form-group">
                    <label class="form-label">Brands</label>
                    <select class="form-input" id="paymentsBrandSelect">
                        <option value="all">All Brands</option>
                        <option value="catakor">Cata-Kor</option>
                        <option value="jiyu">JiYu</option>
                        <option value="physicians_choice">Physicians Choice</option>
                        <option value="peach_slices">Peach Slices</option>
                        <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                    </select>
                </div>
                
                <!-- Preview -->
                <div id="paymentPreviewSection" style="display: none; margin-top: 20px;">
                    <div class="card" style="background: var(--bg-secondary);">
                        <div class="card-header" style="padding: 12px 16px;">
                            <div class="card-title" style="font-size: 0.9rem;"><span>üìä</span> Preview</div>
                        </div>
                        <div class="card-body" id="paymentPreviewBody" style="padding: 16px; max-height: 200px; overflow-y: auto;">
                            <!-- Preview populated here -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="previewPayments()">üëÅÔ∏è Preview</button>
                <button class="btn btn-secondary" onclick="closeGeneratePaymentsModal()">Cancel</button>
                <button class="btn btn-success" onclick="confirmGeneratePayments()">üí∞ Generate Payments</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="applicationModal">
        <div class="modal" style="max-width: 700px;">
            <div class="modal-header" style="background: linear-gradient(135deg, var(--bg-secondary), var(--bg-card));">
                <h3 class="modal-title">üìã Review Application</h3>
                <button class="modal-close" onclick="closeApplicationModal()">&times;</button>
            </div>
            <div class="modal-body" style="padding: 0;">
                <!-- Content is dynamically generated by openApplicationModal() -->
            </div>
        </div>
    </div>

    <div class="toast" id="toast">
        <div class="toast-content">
            <span class="toast-icon" id="toastIcon">‚úì</span>
            <span class="toast-message" id="toastMessage"></span>
            <button class="toast-close" onclick="hideToast()">√ó</button>
        </div>
        <div class="toast-progress" id="toastProgress"></div>
    </div>
    
    <!-- Product Modal -->
    <!-- Create Product Group Modal -->
    <div class="modal-overlay" id="productGroupModal">
        <div class="modal" style="max-width: 700px; max-height: 90vh; display: flex; flex-direction: column;">
            <div class="modal-header">
                <h3 class="modal-title" id="productGroupModalTitle">üìÅ Create Product Group</h3>
                <button class="modal-close" onclick="closeProductGroupModal()">&times;</button>
            </div>
            <div class="modal-body" style="flex: 1; overflow-y: auto;">
                <input type="hidden" id="productGroupId">
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 20px;">
                    <div class="form-group" style="margin-bottom: 0;">
                        <label class="form-label">Group Name *</label>
                        <input type="text" class="form-input" id="productGroupName" placeholder="e.g., Probiotics, Fiber Products">
                    </div>
                    <div class="form-group" style="margin-bottom: 0;">
                        <label class="form-label">Brand *</label>
                        <select class="form-input" id="productGroupBrand" onchange="loadProductsForGrouping()">
                            <option value="">Select Brand</option>
                            <option value="physicians_choice">Physicians Choice</option>
                            <option value="jiyu">JiYu</option>
                            <option value="catakor">Cata-Kor</option>
                            <option value="peach_slices">Peach Slices</option>
                            <option value="yerba_magic">Yerba Magic</option>
                            <option value="toplux">Toplux Nutrition</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Select Products to Include</label>
                    <div style="display: flex; gap: 8px; margin-bottom: 12px;">
                        <input type="text" id="groupProductSearch" class="form-input" placeholder="üîç Search products..." oninput="filterGroupProducts()" style="flex: 1;">
                        <button class="btn btn-sm" onclick="selectAllGroupProducts()" style="white-space: nowrap;">Select All</button>
                        <button class="btn btn-sm" onclick="deselectAllGroupProducts()" style="white-space: nowrap;">Clear</button>
                    </div>
                    <div id="groupProductsContainer" style="max-height: 300px; overflow-y: auto; border: 1px solid var(--border); border-radius: 8px; background: var(--bg-secondary);">
                        <div style="padding: 40px; text-align: center; color: var(--text-muted);">
                            Select a brand to see available products
                        </div>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-top: 8px;">
                        <span id="groupSelectedCount" style="font-size: 0.85rem; color: var(--text-muted);">0 products selected</span>
                        <span id="groupSelectedGmv" style="font-size: 0.85rem; color: var(--success);">$0 combined GMV</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeProductGroupModal()">Cancel</button>
                <button class="btn btn-primary" onclick="saveProductGroup()">üíæ Save Group</button>
            </div>
        </div>
    </div>
    
    <!-- Floating Action Button -->
    <!-- Scroll to Top Button -->
    <button class="scroll-to-top" id="scrollToTop" onclick="scrollToTop()">‚Üë</button>


    <!-- JavaScript Modules (split for maintainability) -->
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/data.js"></script>
    <script src="js/ops-center.js"></script>
    <script src="js/views.js"></script>
    <script src="js/overview.js"></script>
    <script src="js/data-views.js"></script>
    <script src="js/daily-weekly.js"></script>
    <script src="js/roster.js"></script>
    <script src="js/creator-detail.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/payments.js"></script>
    <script src="js/users.js"></script>
    <script src="js/portal.js"></script>
</body>
</html>
